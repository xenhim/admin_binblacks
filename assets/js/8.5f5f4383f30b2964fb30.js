(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"15PL":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CcnG"),l=(n("p4DR"),n("wrqk"),0);e.RecaptchaComponent=function(){function t(t,e,n,r){this.elementRef=t,this.loader=e,this.zone=n,this.id="ngrecaptcha-"+l++,this.resolved=new i.EventEmitter,r&&(this.siteKey=r.siteKey,this.theme=r.theme,this.type=r.type,this.size=r.size,this.badge=r.badge)}return t.prototype.ngAfterViewInit=function(){var t=this;this.subscription=this.loader.ready.subscribe(function(e){null!=e&&e.render instanceof Function&&(t.grecaptcha=e,t.renderRecaptcha())})},t.prototype.ngOnDestroy=function(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()},t.prototype.execute=function(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)},t.prototype.reset=function(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())},t.prototype.expired=function(){this.resolved.emit(null)},t.prototype.captchaResponseCallback=function(t){this.resolved.emit(t)},t.prototype.grecaptchaReset=function(){var t=this;null!=this.widget&&this.zone.runOutsideAngular(function(){return t.grecaptcha.reset(t.widget)})},t.prototype.renderRecaptcha=function(){var t=this;this.widget=this.grecaptcha.render(this.elementRef.nativeElement,{badge:this.badge,callback:function(e){t.zone.run(function(){return t.captchaResponseCallback(e)})},"expired-callback":function(){t.zone.run(function(){return t.expired()})},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type}),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())},t.decorators=[{type:i.Component,args:[{exportAs:"reCaptcha",selector:"re-captcha",template:""}]}],t.propDecorators={id:[{type:i.Input},{type:i.HostBinding,args:["attr.id"]}],siteKey:[{type:i.Input}],theme:[{type:i.Input}],type:[{type:i.Input}],size:[{type:i.Input}],tabIndex:[{type:i.Input}],badge:[{type:i.Input}],resolved:[{type:i.Output}]},t}()},5756:function(t,e,n){var i=function(){"use strict";return i=function(t){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},i.prototype._singletonInstance)return i.prototype._singletonInstance;if(i.prototype._singletonInstance=this,this.instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,t.displayCall&&"function"!=typeof t.displayCall)throw new Error("displayCall is not a function");if(!t.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(t),void 0===this.config.navigateToLoginRequestUrl&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&"function"==typeof this.config.callback&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},"undefined"!=typeof window&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(t){}}),i.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var t=this._guid();this.config.state=t,this._idTokenNonce=this._guid();var e=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);e&&""!==e?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):e=window.location.href,this.verbose("Expected state: "+t+" startPage:"+e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,t,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var n=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(n):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(t),this.registerCallback(t,this.config.clientId,this.callback),this._loginPopup(n)):this.promptUser(n)}},i.prototype._openPopup=function(t,e,n,i){try{var l=window.screenLeft?window.screenLeft:window.screenX,r=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=window.open(t,e,"width="+n+", height="+i+", top="+(o/2-i/2+r)+", left="+(s/2-n/2+l));return a.focus&&a.focus(),a}catch(u){return this.warn("Error opening popup, "+u.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},i.prototype._handlePopupError=function(t,e,n,i,l){this.warn(i),this._saveItem(this.CONSTANTS.STORAGE.ERROR,n),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,i),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,l),e&&this._activeRenewals[e]&&(this._activeRenewals[e]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,t&&t(i,null,n)},i.prototype._loginPopup=function(t,e,n){var i=this._openPopup(t,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),l=n||this.callback;if(null!=i){if(this._openedWindows.push(i),-1!=this.config.redirectUri.indexOf("#"))var r=this.config.redirectUri.split("#")[0];else r=this.config.redirectUri;var s=this,o=window.setInterval(function(){if(!i||i.closed||void 0===i.closed){var t="Popup Window closed",n="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return s.isAngular&&s._broadcast("adal:popUpClosed",n+s.CONSTANTS.RESOURCE_DELIMETER+t),s._handlePopupError(l,e,t,n,n),void window.clearInterval(o)}try{var a=i.location;if(-1!=encodeURI(a.href).indexOf(encodeURI(r)))return s.isAngular?s._broadcast("adal:popUpHashChanged",a.hash):s.handleWindowCallback(a.hash),window.clearInterval(o),s._loginInProgress=!1,s._acquireTokenInProgress=!1,s.info("Closing popup window"),s._openedWindows=[],void i.close()}catch(u){}},1)}else{var a="Popup Window is null. This can happen if you are using IE";this._handlePopupError(l,e,"Error opening popup",a,a)}},i.prototype._broadcast=function(t,e){!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)},i.prototype.loginInProgress=function(){return this._loginInProgress},i.prototype._hasResource=function(t){var e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return e&&!this._isEmpty(e)&&e.indexOf(t+this.CONSTANTS.RESOURCE_DELIMETER)>-1},i.prototype.getCachedToken=function(t){if(!this._hasResource(t))return null;var e=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+t),n=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+t),i=this.config.expireOffsetSeconds||300;return n&&n>this._now()+i?e:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+t,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+t,0),null)},i.prototype.getCachedUser=function(){if(this._user)return this._user;var t=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(t),this._user},i.prototype.registerCallback=function(t,e,n){this._activeRenewals[e]=t,this._callBacksMappedToRenewStates[t]||(this._callBacksMappedToRenewStates[t]=[]);var i=this;this._callBacksMappedToRenewStates[t].push(n),this._callBackMappedToRenewStates[t]||(this._callBackMappedToRenewStates[t]=function(n,l,r,s){i._activeRenewals[e]=null;for(var o=0;o<i._callBacksMappedToRenewStates[t].length;++o)try{i._callBacksMappedToRenewStates[t][o](n,l,r,s)}catch(r){i.warn(r)}i._callBacksMappedToRenewStates[t]=null,i._callBackMappedToRenewStates[t]=null})},i.prototype._renewToken=function(t,e,n){this.info("renewToken is called for resource:"+t);var i=this._addAdalFrame("adalRenewFrame"+t),l=this._guid()+"|"+t;this.config.state=l,this._renewStates.push(l),this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl(n=n||"token",t),"prompt");n===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),r+="&nonce="+encodeURIComponent(this._idTokenNonce)),r=this._addHintParameters(r+="&prompt=none"),this.registerCallback(l,t,e),this.verbosePii("Navigate to:"+r),i.src="about:blank",this._loadFrameTimeout(r,"adalRenewFrame"+t,t)},i.prototype._renewIdToken=function(t,e){this.info("renewIdToken is called");var n=this._addAdalFrame("adalIdTokenFrame"),i=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=i,this._renewStates.push(i),this.verbose("Renew Idtoken Expected state: "+i);var l=null==e?null:this.config.clientId,r=this._urlRemoveQueryStringParameter(this._getNavigateUrl(e=e||"id_token",l),"prompt");r=this._addHintParameters(r+="&prompt=none"),r+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(i,this.config.clientId,t),this.verbosePii("Navigate to:"+r),n.src="about:blank",this._loadFrameTimeout(r,"adalIdTokenFrame",this.config.clientId)},i.prototype._urlContainsQueryStringParameter=function(t,e){return new RegExp("[\\?&]"+t+"=").test(e)},i.prototype._urlRemoveQueryStringParameter=function(t,e){var n=new RegExp("(\\&"+e+"=)[^&]+");return t=t.replace(n,""),n=new RegExp("("+e+"=)[^&]+&"),t=t.replace(n,""),n=new RegExp("("+e+"=)[^&]+"),t.replace(n,"")},i.prototype._loadFrameTimeout=function(t,e,n){this.verbose("Set loading state to pending for: "+n),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(t,e);var i=this;setTimeout(function(){if(i._getItem(i.CONSTANTS.STORAGE.RENEW_STATUS+n)===i.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){i.verbose("Loading frame has timed out after: "+i.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+n);var t=i._activeRenewals[n];t&&i._callBackMappedToRenewStates[t]&&i._callBackMappedToRenewStates[t]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),i._saveItem(i.CONSTANTS.STORAGE.RENEW_STATUS+n,i.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}},i.CONSTANTS.LOADFRAME_TIMEOUT)},i.prototype._loadFrame=function(t,e){var n=this;n.info("LoadFrame: "+e);var i=e;setTimeout(function(){var e=n._addAdalFrame(i);""!==e.src&&"about:blank"!==e.src||(e.src=t,n._loadFrame(t,i))},500)},i.prototype.acquireToken=function(t,e){if(this._isEmpty(t))return this.warn("resource is required"),void e("resource is required",null,"resource is required");var n=this.getCachedToken(t);return n?(this.info("Token is already in cache for resource:"+t),void e(null,n,null)):this._user||this.config.extraQueryParameter&&-1!==this.config.extraQueryParameter.indexOf("login_hint")?void(this._activeRenewals[t]?this.registerCallback(this._activeRenewals[t],t,e):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,t===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(e)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(e,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(t,e)):(this.verbose("renewing idtoken and access_token"),this._renewToken(t,e,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void e("User login is required",null,"login required"))},i.prototype.acquireTokenPopup=function(t,e,n,i){if(this._isEmpty(t))return this.warn("resource is required"),void i("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void i("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void i("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var l=this._guid()+"|"+t;this.config.state=l,this._renewStates.push(l),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",t),"prompt");if(r+="&prompt=select_account",e&&(r+=e),n&&-1===r.indexOf("&claims"))r+="&claims="+encodeURIComponent(n);else if(n&&-1!==r.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");r=this._addHintParameters(r),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+t),this.registerCallback(l,t,i),this._loginPopup(r,t,i)},i.prototype.acquireTokenRedirect=function(t,e,n){if(this._isEmpty(t))return this.warn("resource is required"),void i("resource is required",null,"resource is required");var i=this.callback;if(!this._user)return this.warn("User login is required"),void i("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void i("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var l=this._guid()+"|"+t;this.config.state=l,this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",t),"prompt");if(r+="&prompt=select_account",e&&(r+=e),n&&-1===r.indexOf("&claims"))r+="&claims="+encodeURIComponent(n);else if(n&&-1!==r.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");r=this._addHintParameters(r),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,l,!0),this.promptUser(r)},i.prototype.promptUser=function(t){t?(this.infoPii("Navigate to:"+t),window.location.replace(t)):this.info("Navigate url is empty")},i.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(t)){t=t.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var e=0;e<t.length&&""!==t[e];e++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+t[e],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+t[e],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},i.prototype.clearCacheForResource=function(t){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(t)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+t,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+t,0))},i.prototype.logOut=function(){var t;if(this.clearCache(),this._user=null,this.config.logOutUri)t=this.config.logOutUri;else{var e="common",n="";this.config.tenant&&(e=this.config.tenant),this.config.postLogoutRedirectUri&&(n="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),t=this.instance+e+"/oauth2/logout?"+n}this.infoPii("Logout navigate to: "+t),this.promptUser(t)},i.prototype._isEmpty=function(t){return void 0===t||!t||0===t.length},i.prototype.getUser=function(t){if("function"!=typeof t)throw new Error("callback is not a function");if(this._user)t(null,this._user);else{var e=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(e)?(this.warn("User information is not available"),t("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(e),t(null,this._user))}},i.prototype._addHintParameters=function(t){if(this._user&&this._user.profile)if(this._user.profile.sid&&-1!==t.indexOf("&prompt=none"))this._urlContainsQueryStringParameter("sid",t)||(t+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",t)||(t+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",t)&&this._user.profile.upn.indexOf("@")>-1)){var e=this._user.profile.upn.split("@");t+="&domain_hint="+encodeURIComponent(e[e.length-1])}return t},i.prototype._createUser=function(t){var e=null,n=this._extractIdToken(t);return n&&n.hasOwnProperty("aud")&&(n.aud.toLowerCase()===this.config.clientId.toLowerCase()?(e={userName:"",profile:n},n.hasOwnProperty("upn")?e.userName=n.upn:n.hasOwnProperty("email")&&(e.userName=n.email)):this.warn("IdToken has invalid aud field")),e},i.prototype._getHash=function(t){return t.indexOf("#/")>-1?t=t.substring(t.indexOf("#/")+2):t.indexOf("#")>-1&&(t=t.substring(1)),t},i.prototype.isCallback=function(t){t=this._getHash(t);var e=this._deserialize(t);return e.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||e.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||e.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},i.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},i.prototype.getRequestInfo=function(t){t=this._getHash(t);var e=this._deserialize(t),n={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(e&&(n.parameters=e,e.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||e.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||e.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){if(n.valid=!0,!e.hasOwnProperty("state"))return this.warn("No state returned"),n;if(this.verbose("State: "+e.state),n.stateResponse=e.state,this._matchState(n))return n;if(!n.stateMatch&&window.parent){n.requestType=this._requestType;for(var i=this._renewStates,l=0;l<i.length;l++)if(i[l]===n.stateResponse){n.stateMatch=!0;break}}}return n},i.prototype._matchNonce=function(t){var e=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(e){e=e.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<e.length;n++)if(e[n]===t.profile.nonce)return!0}return!1},i.prototype._matchState=function(t){var e=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(e){e=e.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<e.length;n++)if(e[n]===t.stateResponse)return t.requestType=this.REQUEST_TYPE.LOGIN,t.stateMatch=!0,!0}var i=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(i)for(i=i.split(this.CONSTANTS.CACHE_DELIMETER),n=0;n<i.length;n++)if(i[n]===t.stateResponse)return t.requestType=this.REQUEST_TYPE.RENEW_TOKEN,t.stateMatch=!0,!0;return!1},i.prototype._getResourceFromState=function(t){if(t){var e=t.indexOf("|");if(e>-1&&e+1<t.length)return t.substring(e+1)}return""},i.prototype.saveTokenFromHash=function(t){this.info("State status:"+t.stateMatch+"; Request type:"+t.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var e,n=this._getResourceFromState(t.stateResponse);t.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+t.parameters.error+"; Error description:"+t.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,t.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,t.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),t.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,t.parameters.error_description))):t.stateMatch?(this.info("State is right"),t.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,t.parameters[this.CONSTANTS.SESSION_STATE]),t.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(n)||(e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,e+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,t.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._expiresIn(t.parameters[this.CONSTANTS.EXPIRES_IN]))),t.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(t.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,t.parameters[this.CONSTANTS.ID_TOKEN]),this._hasResource(n=this.config.loginResource?this.config.loginResource:this.config.clientId)||(e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,e+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,t.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(t.parameters.error="invalid id_token",t.parameters.error_description="Invalid id_token. id_token: "+t.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+t.parameters[this.CONSTANTS.ID_TOKEN])))):(t.parameters.error="Invalid_state",t.parameters.error_description="Invalid_state. state: "+t.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+t.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},i.prototype.getResourceForEndpoint=function(t){if(this.config&&this.config.anonymousEndpoints)for(var e=0;e<this.config.anonymousEndpoints.length;e++)if(t.indexOf(this.config.anonymousEndpoints[e])>-1)return null;if(this.config&&this.config.endpoints)for(var n in this.config.endpoints)if(t.indexOf(n)>-1)return this.config.endpoints[n];return t.indexOf("http://")>-1||t.indexOf("https://")>-1?this._getHostFromUri(t)===this._getHostFromUri(this.config.redirectUri)?this.config.loginResource:null:this.config.loginResource},i.prototype._getHostFromUri=function(t){return String(t).replace(/^(https?:)\/\//,"").split("/")[0]},i.prototype.handleWindowCallback=function(t){if(null==t&&(t=window.location.hash),this.isCallback(t)){var e=null,n=!1;this._openedWindows.length>0&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(e=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,n=!0):window.parent&&window.parent._adalInstance&&(e=window.parent._adalInstance);var i,l,r=e.getRequestInfo(t),s=null;l=n||window.parent!==window?e._callBackMappedToRenewStates[r.stateResponse]:e.callback,e.info("Returned from redirect url"),e.saveTokenFromHash(r),r.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?e.verbose("Window is in iframe, acquiring token silently"):e.verbose("acquiring token interactive in progress"),i=r.parameters[e.CONSTANTS.ACCESS_TOKEN]||r.parameters[e.CONSTANTS.ID_TOKEN],s=e.CONSTANTS.ACCESS_TOKEN):r.requestType===this.REQUEST_TYPE.LOGIN&&(i=r.parameters[e.CONSTANTS.ID_TOKEN],s=e.CONSTANTS.ID_TOKEN);var o=r.parameters[e.CONSTANTS.ERROR_DESCRIPTION],a=r.parameters[e.CONSTANTS.ERROR];try{l&&l(o,i,a,s)}catch(u){e.error("Error occurred in user defined callback function: "+u)}window.parent!==window||n||(e.config.navigateToLoginRequestUrl?window.location.href=e._getItem(e.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},i.prototype._getNavigateUrl=function(t,e){var n="common";this.config.tenant&&(n=this.config.tenant);var i=this.instance+n+"/oauth2/authorize"+this._serialize(t,this.config,e)+this._addLibMetadata();return this.info("Navigate url:"+i),i},i.prototype._extractIdToken=function(t){var e=this._decodeJwt(t);if(!e)return null;try{var n=this._base64DecodeStringUrlSafe(e.JWSPayload);return n?JSON.parse(n):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(i){this.error("The returned id_token could not be decoded",i)}return null},i.prototype._base64DecodeStringUrlSafe=function(t){return t=t.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(t))):decodeURIComponent(escape(this._decode(t)))},i.prototype._decode=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(t=String(t).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var i,l,r,s,o,a,u,c="",d=0;d<n;d+=4){if(i=e.indexOf(t.charAt(d)),l=e.indexOf(t.charAt(d+1)),r=e.indexOf(t.charAt(d+2)),s=e.indexOf(t.charAt(d+3)),d+2===n-1){a=(o=i<<18|l<<12|r<<6)>>16&255,u=o>>8&255,c+=String.fromCharCode(a,u);break}if(d+1===n-1){a=(o=i<<18|l<<12)>>16&255,c+=String.fromCharCode(a);break}a=(o=i<<18|l<<12|r<<6|s)>>16&255,u=o>>8&255,c+=String.fromCharCode(a,u,255&o)}return c},i.prototype._decodeJwt=function(t){if(this._isEmpty(t))return null;var e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);return!e||e.length<4?(this.warn("The returned id_token is not parseable."),null):{header:e[1],JWSPayload:e[2],JWSSig:e[3]}},i.prototype._convertUrlSafeToRegularBase64EncodedString=function(t){return t.replace("-","+").replace("_","/")},i.prototype._serialize=function(t,e,n){var i=[];if(null!==e){i.push("?response_type="+t),i.push("client_id="+encodeURIComponent(e.clientId)),n&&i.push("resource="+encodeURIComponent(n)),i.push("redirect_uri="+encodeURIComponent(e.redirectUri)),i.push("state="+encodeURIComponent(e.state)),e.hasOwnProperty("slice")&&i.push("slice="+encodeURIComponent(e.slice)),e.hasOwnProperty("extraQueryParameter")&&i.push(e.extraQueryParameter);var l=e.correlationId?e.correlationId:this._guid();i.push("client-request-id="+encodeURIComponent(l))}return i.join("&")},i.prototype._deserialize=function(t){var e,n=/\+/g,i=/([^&=]+)=([^&]*)/g,l=function(t){return decodeURIComponent(t.replace(n," "))},r={};for(e=i.exec(t);e;)r[l(e[1])]=l(e[2]),e=i.exec(t);return r},i.prototype._decimalToHex=function(t){for(var e=t.toString(16);e.length<2;)e="0"+e;return e},i.prototype._guid=function(){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues){var e=new Uint8Array(16);return t.getRandomValues(e),e[6]|=64,e[6]&=79,e[8]|=128,e[8]&=191,this._decimalToHex(e[0])+this._decimalToHex(e[1])+this._decimalToHex(e[2])+this._decimalToHex(e[3])+"-"+this._decimalToHex(e[4])+this._decimalToHex(e[5])+"-"+this._decimalToHex(e[6])+this._decimalToHex(e[7])+"-"+this._decimalToHex(e[8])+this._decimalToHex(e[9])+"-"+this._decimalToHex(e[10])+this._decimalToHex(e[11])+this._decimalToHex(e[12])+this._decimalToHex(e[13])+this._decimalToHex(e[14])+this._decimalToHex(e[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",i="0123456789abcdef",l=0,r="",s=0;s<36;s++)"-"!==n[s]&&"4"!==n[s]&&(l=16*Math.random()|0),"x"===n[s]?r+=i[l]:"y"===n[s]?(l&=3,r+=i[l|=8]):r+=n[s];return r},i.prototype._expiresIn=function(t){return t||(t=3599),this._now()+parseInt(t,10)},i.prototype._now=function(){return Math.round((new Date).getTime()/1e3)},i.prototype._addAdalFrame=function(t){if(void 0!==t){this.info("Add adal frame to document:"+t);var e=document.getElementById(t);if(!e){if(document.createElement&&document.documentElement&&(window.opera||-1===window.navigator.userAgent.indexOf("MSIE 5.0"))){var n=document.createElement("iframe");n.setAttribute("id",t),n.setAttribute("aria-hidden","true"),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height=n.borderWidth="0px",e=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+t+'" id="'+t+'" style="display:none"></iframe>');window.frames&&window.frames[t]&&(e=window.frames[t])}return e}},i.prototype._saveItem=function(t,e,n){if(this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(n){var i=this._getItem(t)||"";localStorage.setItem(t,i+e+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(t,e);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(t,e),!0):(this.info("Session storage is not supported"),!1)},i.prototype._getItem=function(t){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?localStorage.getItem(t):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(t):(this.info("Session storage is not supported"),null)},i.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),"A"==window.localStorage.getItem("storageTest")&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch(t){return!1}},i.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),"A"==window.sessionStorage.getItem("storageTest")&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch(t){return!1}},i.prototype._cloneConfig=function(t){if(null===t||"object"!=typeof t)return t;var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},i.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},i.prototype.log=function(t,e,n,i){if(t<=Logging.level){if(!Logging.piiLoggingEnabled&&i)return;var l=(new Date).toUTCString(),r="";r=this.config.correlationId?l+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[t]+" "+e:l+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[t]+" "+e,n&&(r+="\nstack:\n"+n.stack),Logging.log(r)}},i.prototype.error=function(t,e){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,t,e)},i.prototype.warn=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,t,null)},i.prototype.info=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,t,null)},i.prototype.verbose=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,t,null)},i.prototype.errorPii=function(t,e){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,t,e,!0)},i.prototype.warnPii=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,t,null,!0)},i.prototype.infoPii=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,t,null,!0)},i.prototype.verbosePii=function(t){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,t,null,!0)},i.prototype._libVersion=function(){return"1.0.17"},t.exports&&(t.exports=i,t.exports.inject=function(t){return new i(t)}),i}()},"9cOK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("15PL");e.RecaptchaComponent=i.RecaptchaComponent;var l=n("p4DR");e.RecaptchaLoaderService=l.RecaptchaLoaderService,e.RECAPTCHA_LANGUAGE=l.RECAPTCHA_LANGUAGE,e.RECAPTCHA_BASE_URL=l.RECAPTCHA_BASE_URL,e.RECAPTCHA_NONCE=l.RECAPTCHA_NONCE;var r=n("uOf+");e.RecaptchaModule=r.RecaptchaModule;var s=n("wrqk");e.RECAPTCHA_SETTINGS=s.RECAPTCHA_SETTINGS},DPfx:function(t,e,n){"use strict";n.r(e);var i=n("CcnG"),l=function(){return function(){}}(),r=n("z5nN"),s=n("pMnS"),o=n("Ip0R"),a=n("gIcY"),u=n("S8ex"),c=n("O7Fb"),d=n("kPyj"),h=n("DQlY"),p=n("lqqz"),g=n("mrSG"),f=n("Q86s"),m=n("KALY"),v=(n("Jc0W"),n("2WpN")),y=function(t){function e(e,n){var i=t.call(this,n)||this;return i._accountService=e,i.tenancyName="",i.tenancyNameBuffer="",i.submitButtonText="",i.isSwitchToTenant=!1,i.active=!1,i.saving=!1,i}return Object(g.__extends)(e,t),e.prototype.focusTenancyNameInput=function(){setTimeout(function(){document.getElementById("tenancyNameInput").focus()},100)},e.prototype.updateSubmitButtonText=function(){this.submitButtonText=this.l(this.isSwitchToTenant?"SwitchToTheTenant":"SwitchToTheHost")},e.prototype.show=function(t){this.tenancyName=t,this.isSwitchToTenant=!!t,this.updateSubmitButtonText(),this.active=!0,this.modal.show()},e.prototype.onShown=function(){this.focusTenancyNameInput()},e.prototype.switchToTenant=function(t){t.target.checked?(this.tenancyName=this.tenancyNameBuffer,this.focusTenancyNameInput()):(this.tenancyNameBuffer=this.tenancyName,this.tenancyName=""),this.updateSubmitButtonText()},e.prototype.save=function(){var t=this;if(!this.tenancyName)return abp.multiTenancy.setTenantIdCookie(void 0),this.close(),void location.reload();var e=new m.cb;e.tenancyName=this.tenancyName,this.saving=!0,this._accountService.isTenantAvailable(e).pipe(Object(v.a)(function(){t.saving=!1})).subscribe(function(e){switch(e.state){case m.Ub.Available:return abp.multiTenancy.setTenantIdCookie(e.tenantId),t.close(),void location.reload();case m.Ub.InActive:t.message.warn(t.l("TenantIsNotActive",t.tenancyName)),t.focusTenancyNameInput();break;case m.Ub.NotFound:t.message.warn(t.l("ThereIsNoTenantDefinedWithName{0}",t.tenancyName)),t.focusTenancyNameInput()}})},e.prototype.close=function(){this.active=!1,this.modal.hide()},e}(f.a),S=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function b(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"span",[["class","form-text text-danger text-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent.parent,0),"TenancyNameRequired"));t(e,1,0,n)})}function _(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,55,"form",[["class","kt-form kt-form--label-right"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,2).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,2).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](2,4210688,[["changeTenantForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](4,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](5,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,3,"h5",[["class","modal-title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,0,"button",[["aria-hidden","true"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.close()&&i),i},null,null)),(t()(),i["\u0275eld"](11,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,13,"div",[["class","form-group row text-left mb-0"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,2,"label",[["class","col-4 col-form-label"]],null,null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,1),(t()(),i["\u0275eld"](16,0,null,null,9,"div",[["class","col"]],null,null,null,null,null)),(t()(),i["\u0275eld"](17,0,null,null,8,"span",[["class","kt-switch kt-switch--icon"]],null,null,null,null,null)),(t()(),i["\u0275eld"](18,0,null,null,7,"label",[],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,5,"input",[["checked","checked"],["name","SwitchToTenant"],["type","checkbox"]],[[8,"value",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,r=t.component;return"change"===e&&(l=!1!==i["\u0275nov"](t,20).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,20).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(r.isSwitchToTenant=n)&&l),"change"===e&&(l=!1!==r.switchToTenant(n)&&l),l},null,null)),i["\u0275did"](20,16384,null,0,a.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.CheckboxControlValueAccessor]),i["\u0275did"](22,671744,null,0,a.NgModel,[[2,a.ControlContainer],[8,null],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](24,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),(t()(),i["\u0275eld"](25,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](26,0,null,null,20,"div",[["class","form-group row mb-0"]],null,null,null,null,null)),(t()(),i["\u0275eld"](27,0,null,null,3,"label",[["class","col-4 col-form-label"]],null,null,null,null,null)),(t()(),i["\u0275eld"](28,0,null,null,2,"label",[],null,null,null,null,null)),(t()(),i["\u0275ted"](29,null,["",""])),i["\u0275ppd"](30,1),(t()(),i["\u0275eld"](31,0,null,null,15,"label",[["class","col"]],null,null,null,null,null)),(t()(),i["\u0275eld"](32,0,null,null,12,"input",[["class","form-control"],["id","tenancyNameInput"],["maxlength","64"],["name","tenancyNameInput"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,36)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,36).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,36)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,36)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.tenancyName=n)&&l),l},null,null)),i["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](34,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](35,{edited:0}),i["\u0275did"](36,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](37,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](38,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](41,671744,[[2,4],["tenancyNameInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](43,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](44,1),(t()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](46,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](47,0,null,null,8,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i["\u0275eld"](48,0,null,null,2,"button",[["class","btn btn-secondary close-button"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.close()&&i),i},null,null)),(t()(),i["\u0275ted"](49,null,[" "," "])),i["\u0275ppd"](50,1),(t()(),i["\u0275eld"](51,0,null,null,4,"button",[["class","btn btn-primary save-button"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](52,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](53,0,null,null,0,"i",[["class","fa fa-arrow-circle-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](54,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](55,null,["",""]))],function(t,e){var n=e.component;t(e,22,0,"SwitchToTenant",n.isSwitchToTenant);var l=t(e,35,0,n.tenancyName);t(e,34,0,"form-control",l),t(e,37,0,""),t(e,38,0,"64"),t(e,41,0,"tenancyNameInput",!n.isSwitchToTenant,n.tenancyName),t(e,46,0,n.isSwitchToTenant&&!i["\u0275nov"](e,41).pristine&&!n.tenancyName),t(e,52,0,n.saving,n.l("ProcessingWithThreeDot"))},function(t,e){var n=e.component;t(e,0,0,i["\u0275nov"](e,4).ngClassUntouched,i["\u0275nov"](e,4).ngClassTouched,i["\u0275nov"](e,4).ngClassPristine,i["\u0275nov"](e,4).ngClassDirty,i["\u0275nov"](e,4).ngClassValid,i["\u0275nov"](e,4).ngClassInvalid,i["\u0275nov"](e,4).ngClassPending);var l=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"ChangeTenant"));t(e,8,0,l);var r=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"SwitchToTenant"));t(e,14,0,r),t(e,19,0,i["\u0275inlineInterpolate"](1,"",n.isSwitchToTenant?"true":"false",""),i["\u0275nov"](e,24).ngClassUntouched,i["\u0275nov"](e,24).ngClassTouched,i["\u0275nov"](e,24).ngClassPristine,i["\u0275nov"](e,24).ngClassDirty,i["\u0275nov"](e,24).ngClassValid,i["\u0275nov"](e,24).ngClassInvalid,i["\u0275nov"](e,24).ngClassPending);var s=i["\u0275unv"](e,29,0,t(e,30,0,i["\u0275nov"](e.parent,0),"TenancyName"));t(e,29,0,s);var o=i["\u0275inlineInterpolate"](1,"",n.isSwitchToTenant?i["\u0275unv"](e,32,0,t(e,44,0,i["\u0275nov"](e.parent,0),"EnterTenancyName")):"","");t(e,32,0,o,i["\u0275nov"](e,37).required?"":null,i["\u0275nov"](e,38).maxlength?i["\u0275nov"](e,38).maxlength:null,i["\u0275nov"](e,43).ngClassUntouched,i["\u0275nov"](e,43).ngClassTouched,i["\u0275nov"](e,43).ngClassPristine,i["\u0275nov"](e,43).ngClassDirty,i["\u0275nov"](e,43).ngClassValid,i["\u0275nov"](e,43).ngClassInvalid,i["\u0275nov"](e,43).ngClassPending),t(e,48,0,n.saving);var a=i["\u0275unv"](e,49,0,t(e,50,0,i["\u0275nov"](e.parent,0),"Cancel"));t(e,49,0,a),t(e,51,0,!i["\u0275nov"](e,2).form.valid),t(e,55,0,n.submitButtonText)})}function C(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275qud"](402653184,1,{modal:0}),i["\u0275qud"](402653184,2,{tenancyNameInput:0}),(t()(),i["\u0275eld"](3,16777216,null,null,6,"div",[["aria-hidden","true"],["aria-labelledby","tenantChangeModal"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"onShown"],[null,"click"],[null,"keydown.esc"]],function(t,e,n){var l=!0,r=t.component;return"click"===e&&(l=!1!==i["\u0275nov"](t,4).onClick(n)&&l),"keydown.esc"===e&&(l=!1!==i["\u0275nov"](t,4).onEsc(n)&&l),"onShown"===e&&(l=!1!==r.onShown()&&l),l},null,null)),i["\u0275did"](4,212992,[[1,4],["tenantChangeModal",4]],0,h.d,[i.ElementRef,i.ViewContainerRef,i.Renderer2,p.a],{config:[0,"config"]},{onShown:"onShown"}),i["\u0275pod"](5,{backdrop:0}),(t()(),i["\u0275eld"](6,0,null,null,3,"div",[["class","modal-dialog"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,2,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,_)),i["\u0275did"](9,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component,i=t(e,5,0,"static");t(e,4,0,i),t(e,9,0,n.active)},null)}var E=function(t){function e(e,n){var i=t.call(this,e)||this;return i._accountService=n,i}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){this.appSession.tenant&&(this.tenancyName=this.appSession.tenant.tenancyName,this.name=this.appSession.tenant.name)},Object.defineProperty(e.prototype,"isMultiTenancyEnabled",{get:function(){return abp.multiTenancy.isEnabled},enumerable:!0,configurable:!0}),e.prototype.showChangeModal=function(){this.tenantChangeModal.show(this.tenancyName)},e}(f.a),w=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function A(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"span",[],[[8,"title",0]],null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,i["\u0275inlineInterpolate"](1,"",n.name,"")),t(e,2,0,n.tenancyName)})}function T(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent.parent,0),"NotSelected"));t(e,1,0,n)})}function x(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,12,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" ",": "])),i["\u0275ppd"](2,1),(t()(),i["\u0275and"](16777216,null,null,1,null,A)),i["\u0275did"](4,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,T)),i["\u0275did"](6,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275ted"](-1,null,[" ("])),(t()(),i["\u0275eld"](8,0,null,null,1,"a",[["href","javascript:;"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showChangeModal()&&i),i},null,null)),(t()(),i["\u0275ted"](9,null,["",""])),(t()(),i["\u0275ted"](-1,null,[") "])),(t()(),i["\u0275eld"](11,0,null,null,1,"tenantChangeModal",[],null,null,null,C,S)),i["\u0275did"](12,49152,[[1,4],["tenantChangeModal",4]],0,y,[m.b,i.Injector],null,null)],function(t,e){var n=e.component;t(e,4,0,n.tenancyName),t(e,6,0,!n.tenancyName)},function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"CurrentTenant"));t(e,1,0,l),t(e,9,0,n.l("Change"))})}function I(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275qud"](671088640,1,{tenantChangeModal:0}),(t()(),i["\u0275and"](16777216,null,null,1,null,x)),i["\u0275did"](3,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,3,0,e.component.isMultiTenancyEnabled)},null)}var R=n("LvDl"),F=function(t){function e(e){var n=t.call(this,e)||this;return n.languages=[],n}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){this.languages=R.filter(abp.localization.languages,function(t){return!1===t.isDisabled}),this.currentLanguage=abp.localization.currentLanguage},e.prototype.changeLanguage=function(t){abp.utils.setCookieValue("Abp.Localization.CultureName",t.name,new Date((new Date).getTime()+15768e7),abp.appPath),location.reload()},e}(f.a),N=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function k(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"a",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.changeLanguage(t.context.$implicit)&&i),i},null,null)),(t()(),i["\u0275eld"](1,0,null,null,4,"span",[],[[8,"title",0]],null,null,null,null)),i["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](3,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](4,{"language-icon-current":0}),(t()(),i["\u0275eld"](5,0,null,null,0,"i",[],[[8,"className",0],[1,"aria-label",0]],null,null,null,null))],function(t,e){var n=t(e,4,0,e.context.$implicit.name==e.component.currentLanguage.name);t(e,3,0,n)},function(t,e){t(e,1,0,i["\u0275inlineInterpolate"](1,"",e.context.$implicit.displayName,"")),t(e,5,0,i["\u0275inlineInterpolate"](1,"",e.context.$implicit.icon,""),e.context.$implicit.displayName)})}function P(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","language-switch-area"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](2,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.languages)},null)}function O(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,P)),i["\u0275did"](1,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,1,0,e.component.languages.length>1)},null)}var D=n("ZYCi"),H=n("nS6G"),L=n("i3/Z"),B=n("wd/R"),V=n("w3U3"),j=n("zvtx"),U=n("wlJd"),q=n("ep+e"),M=n("Tr3h"),K=n("Q9gK"),G=n("t/Na"),W=n("K9Ia"),z=n("F/XL"),Y=n("W0Ae"),J=n("XlPw"),X=n("VnD/"),$=n("T1DM"),Q=n("FFOo"),Z=n("60iU");function tt(t,e){void 0===e&&(e=$.a);var n,i=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return function(t){return t.lift(new et(i,e))}}var et=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new nt(t,this.delay,this.scheduler))},t}(),nt=function(t){function e(e,n,i){var l=t.call(this,e)||this;return l.delay=n,l.scheduler=i,l.queue=[],l.active=!1,l.errored=!1,l}return g.__extends(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,i=t.scheduler,l=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(l);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(t,r)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new it(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(Z.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(Z.a.createComplete()),this.unsubscribe()},e}(Q.a),it=function(){return function(t,e){this.time=t,this.notification=e}}(),lt=n("P6uZ"),rt=n("xMyE"),st=n("67Y/"),ot=n("9Z1F"),at=(n("gfpf"),function(){return function(){}}()),ut=function(){return function(){}}(),ct=function(){return function(){}}(),dt=function(){function t(){}return t.prototype.getHashFragmentParams=function(t){var e=t||window.location.hash;if(0!==(e=decodeURIComponent(e)).indexOf("#"))return{};var n=e.indexOf("?");return e=e.substr(n>-1?n+1:1),this.parseQueryString(e)},t.prototype.parseQueryString=function(t){var e,n,i,l,r,s,o,a={};if(null===t)return a;e=t.split("&");for(var u=0;u<e.length;u++)-1===(i=(n=e[u]).indexOf("="))?(l=n,r=null):(l=n.substr(0,i),r=n.substr(i+1)),s=decodeURIComponent(l),o=decodeURIComponent(r),"/"===s.substr(0,1)&&(s=s.substr(1)),a[s]=o;return a},t}(),ht=function(){return function(t){this.type=t}}(),pt=function(t){function e(e,n){void 0===n&&(n=null);var i=t.call(this,e)||this;return i.info=n,i}return Object(g.__extends)(e,t),e}(ht),gt=function(t){function e(e,n){void 0===n&&(n=null);var i=t.call(this,e)||this;return i.info=n,i}return Object(g.__extends)(e,t),e}(ht),ft=function(t){function e(e,n,i){void 0===i&&(i=null);var l=t.call(this,e)||this;return l.reason=n,l.params=i,l}return Object(g.__extends)(e,t),e}(ht);function mt(t){var e=t.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var vt=function(){return function(t){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuthForPasswordFlow=!1,this.openUri=function(t){location.href=t},t&&Object.assign(this,t)}}(),yt=function(){function t(){}return t.prototype.encodeKey=function(t){return encodeURIComponent(t)},t.prototype.encodeValue=function(t){return encodeURIComponent(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}(),St=function(t){function e(e,n,i,l,r,s,o){var a=t.call(this)||this;a.ngZone=e,a.http=n,a.config=r,a.urlHelper=s,a.logger=o,a.discoveryDocumentLoaded=!1,a.state="",a.eventsSubject=new W.a,a.discoveryDocumentLoadedSubject=new W.a,a.grantTypesSupported=[],a.inImplicitFlow=!1,a.discoveryDocumentLoaded$=a.discoveryDocumentLoadedSubject.asObservable(),a.events=a.eventsSubject.asObservable(),l&&(a.tokenValidationHandler=l),r&&a.configure(r);try{i?a.setStorage(i):"undefined"!=typeof sessionStorage&&a.setStorage(sessionStorage)}catch(u){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",u)}return a.setupRefreshTimer(),a}return Object(g.__extends)(e,t),e.prototype.configure=function(t){Object.assign(this,new vt,t),this.config=Object.assign({},new vt,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()},e.prototype.configChanged=function(){},e.prototype.restartSessionChecksIfStillLoggedIn=function(){this.hasValidIdToken()&&this.initSessionCheck()},e.prototype.restartRefreshTimerIfStillLoggedIn=function(){this.setupExpirationTimers()},e.prototype.setupSessionCheck=function(){var t=this;this.events.pipe(Object(X.a)(function(t){return"token_received"===t.type})).subscribe(function(e){t.initSessionCheck()})},e.prototype.setupAutomaticSilentRefresh=function(t){var e=this;void 0===t&&(t={}),this.events.pipe(Object(X.a)(function(t){return"token_expires"===t.type})).subscribe(function(n){e.silentRefresh(t).catch(function(t){e.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()},e.prototype.loadDiscoveryDocumentAndTryLogin=function(t){var e=this;return void 0===t&&(t=null),this.loadDiscoveryDocument().then(function(n){return e.tryLogin(t)})},e.prototype.loadDiscoveryDocumentAndLogin=function(t){var e=this;return void 0===t&&(t=null),this.loadDiscoveryDocumentAndTryLogin(t).then(function(t){return!(!e.hasValidIdToken()||!e.hasValidAccessToken())||(e.initImplicitFlow(),!1)})},e.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.showDebugInformation&&this.logger.debug.apply(console,t)},e.prototype.validateUrlFromDiscoveryDocument=function(t){var e=[],n=this.validateUrlForHttps(t),i=this.validateUrlAgainstIssuer(t);return n||e.push("https for all urls required. Also for urls received by discovery."),i||e.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),e},e.prototype.validateUrlForHttps=function(t){if(!t)return!0;var e=t.toLowerCase();return!1===this.requireHttps||!(!e.match(/^http:\/\/localhost($|[:\/])/)&&!e.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||e.startsWith("https://")},e.prototype.validateUrlAgainstIssuer=function(t){return!this.strictDiscoveryDocumentValidation||!t||t.toLowerCase().startsWith(this.issuer.toLowerCase())},e.prototype.setupRefreshTimer=function(){var t=this;"undefined"!=typeof window?(this.hasValidIdToken()&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.events.pipe(Object(X.a)(function(t){return"token_received"===t.type})).subscribe(function(e){t.clearAccessTokenTimer(),t.clearIdTokenTimer(),t.setupExpirationTimers()})):this.debug("timer not supported on this plattform")},e.prototype.setupExpirationTimers=function(){var t=this.getIdTokenExpiration()||Number.MAX_VALUE,e=(this.getAccessTokenExpiration()||Number.MAX_VALUE)<=t;this.hasValidAccessToken()&&e&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&!e&&this.setupIdTokenTimer()},e.prototype.setupAccessTokenTimer=function(){var t=this,e=this.getAccessTokenExpiration(),n=this.getAccessTokenStoredAt(),i=this.calcTimeout(n,e);this.ngZone.runOutsideAngular(function(){t.accessTokenTimeoutSubscription=Object(z.a)(new gt("token_expires","access_token")).pipe(tt(i)).subscribe(function(e){t.ngZone.run(function(){t.eventsSubject.next(e)})})})},e.prototype.setupIdTokenTimer=function(){var t=this,e=this.getIdTokenExpiration(),n=this.getIdTokenStoredAt(),i=this.calcTimeout(n,e);this.ngZone.runOutsideAngular(function(){t.idTokenTimeoutSubscription=Object(z.a)(new gt("token_expires","id_token")).pipe(tt(i)).subscribe(function(e){t.ngZone.run(function(){t.eventsSubject.next(e)})})})},e.prototype.clearAccessTokenTimer=function(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()},e.prototype.clearIdTokenTimer=function(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()},e.prototype.calcTimeout=function(t,e){return(e-t)*this.timeoutFactor},e.prototype.setStorage=function(t){this._storage=t,this.configChanged()},e.prototype.loadDiscoveryDocument=function(t){var e=this;return void 0===t&&(t=null),new Promise(function(n,i){t||((t=e.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),e.validateUrlForHttps(t)?e.http.get(t).subscribe(function(t){if(!e.validateDiscoveryDocument(t))return e.eventsSubject.next(new ft("discovery_document_validation_error",null)),void i("discovery_document_validation_error");e.loginUrl=t.authorization_endpoint,e.logoutUrl=t.end_session_endpoint||e.logoutUrl,e.grantTypesSupported=t.grant_types_supported,e.issuer=t.issuer,e.tokenEndpoint=t.token_endpoint,e.userinfoEndpoint=t.userinfo_endpoint,e.jwksUri=t.jwks_uri,e.sessionCheckIFrameUrl=t.check_session_iframe||e.sessionCheckIFrameUrl,e.discoveryDocumentLoaded=!0,e.discoveryDocumentLoadedSubject.next(t),e.sessionChecksEnabled&&e.restartSessionChecksIfStillLoggedIn(),e.loadJwks().then(function(i){var l=new pt("discovery_document_loaded",{discoveryDocument:t,jwks:i});e.eventsSubject.next(l),n(l)}).catch(function(t){e.eventsSubject.next(new ft("discovery_document_load_error",t)),i(t)})},function(t){e.logger.error("error loading discovery document",t),e.eventsSubject.next(new ft("discovery_document_load_error",t)),i(t)}):i("issuer must use https, or config value for property requireHttps must allow http")})},e.prototype.loadJwks=function(){var t=this;return new Promise(function(e,n){t.jwksUri?t.http.get(t.jwksUri).subscribe(function(n){t.jwks=n,t.eventsSubject.next(new pt("discovery_document_loaded")),e(n)},function(e){t.logger.error("error loading jwks",e),t.eventsSubject.next(new ft("jwks_load_error",e)),n(e)}):e(null)})},e.prototype.validateDiscoveryDocument=function(t){var e;return this.skipIssuerCheck||t.issuer===this.issuer?(e=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",e),!1):((e=this.validateUrlFromDiscoveryDocument(t.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",e),(e=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",e),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1)},e.prototype.fetchTokenUsingPasswordFlowAndLoadUserProfile=function(t,e,n){var i=this;return void 0===n&&(n=new G.HttpHeaders),this.fetchTokenUsingPasswordFlow(t,e,n).then(function(){return i.loadUserProfile()})},e.prototype.loadUserProfile=function(){var t=this;if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use http, or config value for property requireHttps must allow http");return new Promise(function(e,n){var i=(new G.HttpHeaders).set("Authorization","Bearer "+t.getAccessToken());t.http.get(t.userinfoEndpoint,{headers:i}).subscribe(function(i){t.debug("userinfo received",i);var l=t.getIdentityClaims()||{};t.skipSubjectCheck||!t.oidc||l.sub&&i.sub===l.sub?(i=Object.assign({},l,i),t._storage.setItem("id_token_claims_obj",JSON.stringify(i)),t.eventsSubject.next(new pt("user_profile_loaded")),e(i)):n("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")},function(e){t.logger.error("error loading user info",e),t.eventsSubject.next(new ft("user_profile_load_error",e)),n(e)})})},e.prototype.fetchTokenUsingPasswordFlow=function(t,e,n){var i=this;if(void 0===n&&(n=new G.HttpHeaders),!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use http, or config value for property requireHttps must allow http");return new Promise(function(l,r){var s,o,a=new G.HttpParams({encoder:new yt}).set("grant_type","password").set("scope",i.scope).set("username",t).set("password",e);if(i.useHttpBasicAuthForPasswordFlow){var u=btoa(i.clientId+":"+i.dummyClientSecret);n=n.set("Authorization","Basic "+u)}if(i.useHttpBasicAuthForPasswordFlow||(a=a.set("client_id",i.clientId)),!i.useHttpBasicAuthForPasswordFlow&&i.dummyClientSecret&&(a=a.set("client_secret",i.dummyClientSecret)),i.customQueryParams)try{for(var c=Object(g.__values)(Object.getOwnPropertyNames(i.customQueryParams)),d=c.next();!d.done;d=c.next()){var h=d.value;a=a.set(h,i.customQueryParams[h])}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}n=n.set("Content-Type","application/x-www-form-urlencoded"),i.http.post(i.tokenEndpoint,a,{headers:n}).subscribe(function(t){i.debug("tokenResponse",t),i.storeAccessTokenResponse(t.access_token,t.refresh_token,t.expires_in,t.scope),i.eventsSubject.next(new pt("token_received")),l(t)},function(t){i.logger.error("Error performing password flow",t),i.eventsSubject.next(new ft("token_error",t)),r(t)})})},e.prototype.refreshToken=function(){var t=this;if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use http, or config value for property requireHttps must allow http");return new Promise(function(e,n){var i,l,r=(new G.HttpParams).set("grant_type","refresh_token").set("client_id",t.clientId).set("scope",t.scope).set("refresh_token",t._storage.getItem("refresh_token"));if(t.dummyClientSecret&&(r=r.set("client_secret",t.dummyClientSecret)),t.customQueryParams)try{for(var s=Object(g.__values)(Object.getOwnPropertyNames(t.customQueryParams)),o=s.next();!o.done;o=s.next()){var a=o.value;r=r.set(a,t.customQueryParams[a])}}catch(c){i={error:c}}finally{try{o&&!o.done&&(l=s.return)&&l.call(s)}finally{if(i)throw i.error}}var u=(new G.HttpHeaders).set("Content-Type","application/x-www-form-urlencoded");t.http.post(t.tokenEndpoint,r,{headers:u}).subscribe(function(n){t.debug("refresh tokenResponse",n),t.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in,n.scope),t.eventsSubject.next(new pt("token_received")),t.eventsSubject.next(new pt("token_refreshed")),e(n)},function(e){t.logger.error("Error performing password flow",e),t.eventsSubject.next(new ft("token_refresh_error",e)),n(e)})})},e.prototype.removeSilentRefreshEventListener=function(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)},e.prototype.setupSilentRefreshEventListener=function(){var t=this;this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=function(e){var n="#";if(t.silentRefreshMessagePrefix&&(n+=t.silentRefreshMessagePrefix),e&&e.data&&"string"==typeof e.data){var i=e.data;if(i.startsWith(n)){var l="#"+i.substr(n.length);t.tryLogin({customHashFragment:l,preventClearHashAfterLogin:!0,onLoginError:function(e){t.eventsSubject.next(new ft("silent_refresh_error",e))},onTokenReceived:function(){t.eventsSubject.next(new pt("silently_refreshed"))}}).catch(function(e){return t.debug("tryLogin during silent refresh failed",e)})}}},window.addEventListener("message",this.silentRefreshPostMessageEventListener)},e.prototype.silentRefresh=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e=!0);var i=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");var l=document.getElementById(this.silentRefreshIFrameName);l&&document.body.removeChild(l),this.silentRefreshSubject=i.sub;var r=document.createElement("iframe");r.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,e,t).then(function(t){r.setAttribute("src",t),n.silentRefreshShowIFrame||(r.style.display="none"),document.body.appendChild(r)});var s=this.events.pipe(Object(X.a)(function(t){return t instanceof ft}),Object(lt.a)()),o=this.events.pipe(Object(X.a)(function(t){return"silently_refreshed"===t.type}),Object(lt.a)()),a=Object(z.a)(new ft("silent_refresh_timeout",null)).pipe(tt(this.silentRefreshTimeout));return Object(Y.a)([s,o,a]).pipe(Object(rt.a)(function(t){"silent_refresh_timeout"===t.type&&n.eventsSubject.next(t)}),Object(st.a)(function(t){if(t instanceof ft)throw t;return t})).toPromise()},e.prototype.canPerformSessionCheck=function(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))},e.prototype.setupSessionCheckEventListener=function(){var t=this;this.removeSessionCheckEventListener(),this.sessionCheckEventListener=function(e){var n=e.origin.toLowerCase(),i=t.issuer.toLowerCase();switch(t.debug("sessionCheckEventListener"),i.startsWith(n)||t.debug("sessionCheckEventListener","wrong origin",n,"expected",i),e.data){case"unchanged":t.handleSessionUnchanged();break;case"changed":t.ngZone.run(function(){t.handleSessionChange()});break;case"error":t.ngZone.run(function(){t.handleSessionError()})}t.debug("got info from session check inframe",e)},this.ngZone.runOutsideAngular(function(){window.addEventListener("message",t.sessionCheckEventListener)})},e.prototype.handleSessionUnchanged=function(){this.debug("session check","session unchanged")},e.prototype.handleSessionChange=function(){var t=this;this.eventsSubject.next(new gt("session_changed")),this.stopSessionCheckTimer(),this.silentRefreshRedirectUri?(this.silentRefresh().catch(function(e){return t.debug("silent refresh failed after session changed")}),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new gt("session_terminated")),this.logOut(!0))},e.prototype.waitForSilentRefreshAfterSessionChange=function(){var t=this;this.events.pipe(Object(X.a)(function(t){return"silently_refreshed"===t.type||"silent_refresh_timeout"===t.type||"silent_refresh_error"===t.type}),Object(lt.a)()).subscribe(function(e){"silently_refreshed"!==e.type&&(t.debug("silent refresh did not work after session changed"),t.eventsSubject.next(new gt("session_terminated")),t.logOut(!0))})},e.prototype.handleSessionError=function(){this.stopSessionCheckTimer(),this.eventsSubject.next(new gt("session_error"))},e.prototype.removeSessionCheckEventListener=function(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)},e.prototype.initSessionCheck=function(){if(this.canPerformSessionCheck()){var t=document.getElementById(this.sessionCheckIFrameName);t&&document.body.removeChild(t);var e=document.createElement("iframe");e.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),e.setAttribute("src",this.sessionCheckIFrameUrl),e.style.display="none",document.body.appendChild(e),this.startSessionCheckTimer()}},e.prototype.startSessionCheckTimer=function(){var t=this;this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(function(){t.sessionCheckTimer=setInterval(t.checkSession.bind(t),t.sessionCheckIntervall)})},e.prototype.stopSessionCheckTimer=function(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)},e.prototype.checkSession=function(){var t=document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);var e=this.getSessionState();e||this.stopSessionCheckTimer(),t.contentWindow.postMessage(this.clientId+" "+e,this.issuer)},e.prototype.createLoginUrl=function(t,e,n,i,l){var r=this;void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n=""),void 0===i&&(i=!1),void 0===l&&(l={});var s,o=this;return s=n||this.redirectUri,this.createAndSaveNonce().then(function(n){var a,u,c,d;if(t=t?n+r.config.nonceStateSeparator+t:n,!r.requestAccessToken&&!r.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");r.responseType=r.config.responseType?r.config.responseType:r.oidc&&r.requestAccessToken?"id_token token":r.oidc&&!r.requestAccessToken?"id_token":"token";var h=o.loginUrl.indexOf("?")>-1?"&":"?",p=o.scope;r.oidc&&!p.match(/(^|\s)openid($|\s)/)&&(p="openid "+p);var f=o.loginUrl+h+"response_type="+encodeURIComponent(o.responseType)+"&client_id="+encodeURIComponent(o.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(s)+"&scope="+encodeURIComponent(p);e&&(f+="&login_hint="+encodeURIComponent(e)),o.resource&&(f+="&resource="+encodeURIComponent(o.resource)),o.oidc&&(f+="&nonce="+encodeURIComponent(n)),i&&(f+="&prompt=none");try{for(var m=Object(g.__values)(Object.keys(l)),v=m.next();!v.done;v=m.next()){var y=v.value;f+="&"+encodeURIComponent(y)+"="+encodeURIComponent(l[y])}}catch(_){a={error:_}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}if(r.customQueryParams)try{for(var S=Object(g.__values)(Object.getOwnPropertyNames(r.customQueryParams)),b=S.next();!b.done;b=S.next())f+="&"+(y=b.value)+"="+encodeURIComponent(r.customQueryParams[y])}catch(C){c={error:C}}finally{try{b&&!b.done&&(d=S.return)&&d.call(S)}finally{if(c)throw c.error}}return f})},e.prototype.initImplicitFlowInternal=function(t,e){var n=this;if(void 0===t&&(t=""),void 0===e&&(e=""),!this.inImplicitFlow){if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use http, or config value for property requireHttps must allow http");var i={},l=null;"string"==typeof e?l=e:"object"==typeof e&&(i=e),this.createLoginUrl(t,l,null,!1,i).then(function(t){location.href=t}).catch(function(t){console.error("Error in initImplicitFlow",t),n.inImplicitFlow=!1})}},e.prototype.initImplicitFlow=function(t,e){var n=this;void 0===t&&(t=""),void 0===e&&(e=""),""!==this.loginUrl?this.initImplicitFlowInternal(t,e):this.events.pipe(Object(X.a)(function(t){return"discovery_document_loaded"===t.type})).subscribe(function(i){return n.initImplicitFlowInternal(t,e)})},e.prototype.callOnTokenReceivedIfExists=function(t){if(t.onTokenReceived){var e={idClaims:this.getIdentityClaims(),idToken:this.getIdToken(),accessToken:this.getAccessToken(),state:this.state};t.onTokenReceived(e)}},e.prototype.storeAccessTokenResponse=function(t,e,n,i){if(this._storage.setItem("access_token",t),i&&this._storage.setItem("granted_scopes",JSON.stringify(i.split("+"))),this._storage.setItem("access_token_stored_at",""+Date.now()),n){var l=1e3*n,r=(new Date).getTime()+l;this._storage.setItem("expires_at",""+r)}e&&this._storage.setItem("refresh_token",e)},e.prototype.tryLogin=function(t){var e,n=this;void 0===t&&(t=null),e=(t=t||{}).customHashFragment?this.urlHelper.getHashFragmentParams(t.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",e);var i=e.state,l=i;if(i){var r=i.indexOf(this.config.nonceStateSeparator);r>-1&&(l=i.substr(0,r),this.state=i.substr(r+this.config.nonceStateSeparator.length))}if(e.error){this.debug("error trying to login"),this.handleLoginError(t,e);var s=new ft("token_error",{},e);return this.eventsSubject.next(s),Promise.reject(s)}var o=e.access_token,a=e.id_token,u=e.session_state,c=e.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!o)return Promise.resolve(!1);if(this.requestAccessToken&&!t.disableOAuth2StateCheck&&!i)return Promise.resolve(!1);if(this.oidc&&!a)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!u&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableOAuth2StateCheck&&!this.validateNonceForAccessToken(o,l)){var d=new ft("invalid_nonce_in_state",null);return this.eventsSubject.next(d),Promise.reject(d)}return this.requestAccessToken&&this.storeAccessTokenResponse(o,null,e.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c),this.oidc?this.processIdToken(a,o).then(function(e){return t.validationHandler?t.validationHandler({accessToken:o,idClaims:e.idTokenClaims,idToken:e.idToken,state:i}).then(function(t){return e}):e}).then(function(e){return n.storeIdToken(e),n.storeSessionState(u),n.clearHashAfterLogin&&(location.hash=""),n.eventsSubject.next(new pt("token_received")),n.callOnTokenReceivedIfExists(t),n.inImplicitFlow=!1,!0}).catch(function(t){return n.eventsSubject.next(new ft("token_validation_error",t)),n.logger.error("Error validating tokens"),n.logger.error(t),Promise.reject(t)}):(this.eventsSubject.next(new pt("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))},e.prototype.validateNonceForAccessToken=function(t,e){var n=this._storage.getItem("nonce");return n===e||(console.error("Validating access_token failed, wrong state/nonce.",n,e),!1)},e.prototype.storeIdToken=function(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())},e.prototype.storeSessionState=function(t){this._storage.setItem("session_state",t)},e.prototype.getSessionState=function(){return this._storage.getItem("session_state")},e.prototype.handleLoginError=function(t,e){t.onLoginError&&t.onLoginError(e),this.clearHashAfterLogin&&(location.hash="")},e.prototype.processIdToken=function(t,e){var n=this,i=t.split("."),l=mt(this.padBase64(i[0])),r=JSON.parse(l),s=mt(this.padBase64(i[1])),o=JSON.parse(s),a=this._storage.getItem("nonce");if(Array.isArray(o.aud)){if(o.aud.every(function(t){return t!==n.clientId})){var u="Wrong audience: "+o.aud.join(",");return this.logger.warn(u),Promise.reject(u)}}else if(o.aud!==this.clientId)return this.logger.warn(u="Wrong audience: "+o.aud),Promise.reject(u);if(!o.sub)return this.logger.warn(u="No sub claim in id_token"),Promise.reject(u);if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==o.sub)return this.logger.warn(u="After refreshing, we got an id_token for another user (sub). Expected sub: "+this.silentRefreshSubject+", received sub: "+o.sub),Promise.reject(u);if(!o.iat)return this.logger.warn(u="No iat claim in id_token"),Promise.reject(u);if(o.iss!==this.issuer)return this.logger.warn(u="Wrong issuer: "+o.iss),Promise.reject(u);if(o.nonce!==a)return this.logger.warn(u="Wrong nonce: "+o.nonce),Promise.reject(u);if(!this.disableAtHashCheck&&this.requestAccessToken&&!o.at_hash)return this.logger.warn(u="An at_hash is needed!"),Promise.reject(u);var c=Date.now(),d=1e3*o.iat,h=1e3*o.exp;if(d-6e5>=c||h+6e5<=c)return u="Token has expired",console.error(u),console.error({now:c,issuedAtMSec:d,expiresAtMSec:h}),Promise.reject(u);var p={accessToken:e,idToken:t,jwks:this.jwks,idTokenClaims:o,idTokenHeader:r,loadKeys:function(){return n.loadJwks()}};return this.checkAtHash(p).then(function(e){if(!n.disableAtHashCheck&&n.requestAccessToken&&!e){var i="Wrong at_hash";return n.logger.warn(i),Promise.reject(i)}return n.checkSignature(p).then(function(e){return{idToken:t,idTokenClaims:o,idTokenClaimsJson:s,idTokenHeader:r,idTokenHeaderJson:l,idTokenExpiresAt:h}})})},e.prototype.getIdentityClaims=function(){var t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null},e.prototype.getGrantedScopes=function(){var t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null},e.prototype.getIdToken=function(){return this._storage?this._storage.getItem("id_token"):null},e.prototype.padBase64=function(t){for(;t.length%4!=0;)t+="=";return t},e.prototype.getAccessToken=function(){return this._storage.getItem("access_token")},e.prototype.getRefreshToken=function(){return this._storage.getItem("refresh_token")},e.prototype.getAccessTokenExpiration=function(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null},e.prototype.getAccessTokenStoredAt=function(){return parseInt(this._storage.getItem("access_token_stored_at"),10)},e.prototype.getIdTokenStoredAt=function(){return parseInt(this._storage.getItem("id_token_stored_at"),10)},e.prototype.getIdTokenExpiration=function(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null},e.prototype.hasValidAccessToken=function(){if(this.getAccessToken()){var t=this._storage.getItem("expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1},e.prototype.hasValidIdToken=function(){if(this.getIdToken()){var t=this._storage.getItem("id_token_expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1},e.prototype.authorizationHeader=function(){return"Bearer "+this.getAccessToken()},e.prototype.logOut=function(t){void 0===t&&(t=!1);var e=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this._storage.removeItem("nonce"),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.silentRefreshSubject=null,this.eventsSubject.next(new gt("logout")),this.logoutUrl&&!t&&(e||this.postLogoutRedirectUri)){var n;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl must use http, or config value for property requireHttps must allow http");if(this.logoutUrl.indexOf("{{")>-1)n=this.logoutUrl.replace(/\{\{id_token\}\}/,e).replace(/\{\{client_id\}\}/,this.clientId);else{var i=new G.HttpParams;e&&(i=i.set("id_token_hint",e));var l=this.postLogoutRedirectUri||this.redirectUri;l&&(i=i.set("post_logout_redirect_uri",l)),n=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+i.toString()}location.href=n}},e.prototype.createAndSaveNonce=function(){var t=this;return this.createNonce().then(function(e){return t._storage.setItem("nonce",e),e})},e.prototype.createNonce=function(){var t=this;return new Promise(function(e,n){if(t.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");for(var i="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<40;r++)i+=l.charAt(Math.floor(Math.random()*l.length));e(i)})},e.prototype.checkAtHash=function(t){return Object(g.__awaiter)(this,void 0,void 0,function(){return Object(g.__generator)(this,function(e){return this.tokenValidationHandler?[2,this.tokenValidationHandler.validateAtHash(t)]:(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),[2,!0])})})},e.prototype.checkSignature=function(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))},e}(vt),bt=function(){return function(){}}(),_t=function(){return function(){}}(),Ct=function(){function t(){}return t.prototype.handleError=function(t){return Object(J.a)(t)},t}(),Et=function(){function t(t,e,n){this.authStorage=t,this.errorHandler=e,this.moduleConfig=n}return t.prototype.checkUrl=function(t){return!!this.moduleConfig.resourceServer.allowedUrls.find(function(e){return t.startsWith(e)})},t.prototype.intercept=function(t,e){var n=this,i=t.url.toLowerCase();if(!this.moduleConfig)return e.handle(t);if(!this.moduleConfig.resourceServer)return e.handle(t);if(this.moduleConfig.resourceServer.allowedUrls&&!this.checkUrl(i))return e.handle(t);if(this.moduleConfig.resourceServer.sendAccessToken&&this.authStorage.getItem("access_token")){var l=this.authStorage.getItem("access_token"),r=t.headers.set("Authorization","Bearer "+l);t=t.clone({headers:r})}return e.handle(t).pipe(Object(ot.a)(function(t){return n.errorHandler.handleError(t)}))},t}(),wt=function(){function t(){}return t.prototype.validateSignature=function(t){return Promise.resolve(null)},t.prototype.validateAtHash=function(t){return Promise.resolve(!0)},t}();function At(){return console}function Tt(){return"undefined"!=typeof sessionStorage?sessionStorage:null}var xt=function(){function t(){}return t.forRoot=function(e,n){return void 0===e&&(e=null),void 0===n&&(n=wt),{ngModule:t,providers:[St,dt,{provide:at,useFactory:At},{provide:ut,useFactory:Tt},{provide:ct,useClass:n},{provide:_t,useClass:Ct},{provide:bt,useValue:e},{provide:G.HTTP_INTERCEPTORS,useClass:Et,multi:!0}]}},t}(),It=(new i.InjectionToken("AUTH_CONFIG"),n("5756")),Rt=function(t){function e(e){var n=t.call(this)||this;return n.initialized=!1,n.name=e.name,n.clientId=e.clientId,n.additionalParams=e.additionalParams,n.icon=e.name.toLowerCase(),n}return Object(g.__extends)(e,t),e.FACEBOOK="Facebook",e.GOOGLE="Google",e.MICROSOFT="Microsoft",e.OPENID="OpenIdConnect",e.WSFEDERATION="WsFederation",e}(m.N),Ft=function(){function t(t,e,n,i,l,r,s){this._tokenAuthService=t,this._router=e,this._utilsService=n,this._messageService=i,this._tokenService=l,this._logService=r,this.oauthService=s,this.externalLoginProviders=[],this.clear()}return t.prototype.authenticate=function(e,n){var i=this;e=e||function(){abp.ui.clearBusy()},this.authenticateModel.twoFactorRememberClientToken=this._utilsService.getCookieValue(t.twoFactorRememberClientTokenName),this.authenticateModel.singleSignIn=M.a.getSingleSignIn(),this.authenticateModel.returnUrl=M.a.getReturnUrl(),this._tokenAuthService.authenticate(this.authenticateModel).pipe(Object(v.a)(e)).subscribe(function(t){i.processAuthenticateResult(t,n)})},t.prototype.externalAuthenticate=function(t){var e=this;this.ensureExternalLoginProviderInitialized(t,function(){t.name===Rt.FACEBOOK?FB.login(function(t){e.facebookLoginStatusChangeCallback(t)},{scope:"email"}):t.name===Rt.GOOGLE?gapi.auth2.getAuthInstance().signIn().then(function(){e.googleLoginStatusChangeCallback(gapi.auth2.getAuthInstance().isSignedIn.get())}):t.name===Rt.MICROSOFT&&WL.login({scope:["wl.signin","wl.basic","wl.emails"]})})},t.prototype.init=function(){this.initExternalLoginProviders()},t.prototype.processAuthenticateResult=function(t,e){this.authenticateResult=t,t.shouldResetPassword?(this._router.navigate(["account/reset-password"],{queryParams:{userId:t.userId,tenantId:abp.session.tenantId,resetCode:t.passwordResetCode}}),this.clear()):t.requiresTwoFactorVerification?this._router.navigate(["account/send-code"]):t.accessToken?(t.returnUrl&&!e&&(e=t.returnUrl),this.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,this.rememberMe,t.twoFactorRememberClientToken,e)):(this._logService.warn("Unexpected authenticateResult!"),this._router.navigate(["account/login"]))},t.prototype.login=function(e,n,i,l,r,s){var o=l?new Date((new Date).getTime()+1e3*i):void 0;if(this._tokenService.setToken(e,o),this._utilsService.setCookieValue(H.a.authorization.encrptedAuthTokenName,n,o,abp.appPath),r&&this._utilsService.setCookieValue(t.twoFactorRememberClientTokenName,r,new Date((new Date).getTime()+31536e6),abp.appPath),s)location.href=s;else{var a=M.a.initialUrl;a.indexOf("/account")>0&&(a=H.a.appBaseUrl),location.href=a}},t.prototype.clear=function(){this.authenticateModel=new m.g,this.authenticateModel.rememberClient=!1,this.authenticateResult=null,this.rememberMe=!1},t.prototype.initExternalLoginProviders=function(t){var e=this;this._tokenAuthService.getExternalAuthenticationProviders().subscribe(function(n){e.externalLoginProviders=R.map(n,function(t){return new Rt(t)}),t&&t()})},t.prototype.ensureExternalLoginProviderInitialized=function(t,e){var n=this;if(t.initialized)e();else if(t.name===Rt.FACEBOOK)(new K.a).load("//connect.facebook.net/en_US/sdk.js").then(function(){FB.init({appId:t.clientId,cookie:!1,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(t){n.facebookLoginStatusChangeCallback(t),"connected"!==t.status&&e()})});else if(t.name===Rt.GOOGLE)(new K.a).load("https://apis.google.com/js/api.js").then(function(){gapi.load("client:auth2",function(){gapi.client.init({clientId:t.clientId,scope:"openid profile email"}).then(function(){e()})})});else if(t.name===Rt.MICROSOFT)(new K.a).load("//js.live.net/v5.0/wl.js").then(function(){WL.Event.subscribe("auth.login",n.microsoftLogin),WL.init({client_id:t.clientId,scope:["wl.signin","wl.basic","wl.emails"],redirect_uri:H.a.appBaseUrl,response_type:"token"})});else if(t.name===Rt.OPENID){var i=this.getOpenIdConnectConfig(t);this.oauthService.configure(i),this.oauthService.initImplicitFlow("openIdConnect=1")}else if(t.name===Rt.WSFEDERATION){var l=this.getWsFederationConnectConfig(t);this.wsFederationAuthenticationContext=new It(l),this.wsFederationAuthenticationContext.login()}},t.prototype.getWsFederationConnectConfig=function(t){var e={clientId:t.clientId,popUp:!0,callback:this.wsFederationLoginStatusChangeCallback.bind(this)};return t.additionalParams.Tenant&&(e.tenant=t.additionalParams.Tenant),e},t.prototype.getOpenIdConnectConfig=function(t){var e=new vt;return e.loginUrl=t.additionalParams.LoginUrl,e.issuer=t.additionalParams.Authority,e.skipIssuerCheck="false"===t.additionalParams.ValidateIssuer,e.clientId=t.clientId,e.responseType="id_token",e.redirectUri=window.location.origin+"/account/login",e.scope="openid",e.requestAccessToken=!1,e},t.prototype.facebookLoginStatusChangeCallback=function(t){var e=this;if("connected"===t.status){var n=new m.M;n.authProvider=Rt.FACEBOOK,n.providerAccessCode=t.authResponse.accessToken,n.providerKey=t.authResponse.userID,n.singleSignIn=M.a.getSingleSignIn(),n.returnUrl=M.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe(function(t){t.waitingForActivation?e._messageService.info("You have successfully registered. Waiting for activation!"):e.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,!1,"",t.returnUrl)})}},t.prototype.openIdConnectLoginCallback=function(t){var e=this;this.initExternalLoginProviders(function(){var t=R.filter(e.externalLoginProviders,{name:"OpenIdConnect"})[0],n=e.getOpenIdConnectConfig(t);e.oauthService.configure(n),abp.ui.setBusy(),e.oauthService.tryLogin().then(function(){var t=e.oauthService.getIdentityClaims(),n=new m.M;n.authProvider=Rt.OPENID,n.providerAccessCode=e.oauthService.getIdToken(),n.providerKey=t.sub,n.singleSignIn=M.a.getSingleSignIn(),n.returnUrl=M.a.getReturnUrl(),e._tokenAuthService.externalAuthenticate(n).pipe(Object(v.a)(function(){abp.ui.clearBusy()})).subscribe(function(t){t.waitingForActivation?e._messageService.info("You have successfully registered. Waiting for activation!"):e.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,!1,"",t.returnUrl)})})})},t.prototype.googleLoginStatusChangeCallback=function(t){var e=this;if(t){var n=new m.M;n.authProvider=Rt.GOOGLE,n.providerAccessCode=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,n.providerKey=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getId(),n.singleSignIn=M.a.getSingleSignIn(),n.returnUrl=M.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe(function(t){t.waitingForActivation?e._messageService.info("You have successfully registered. Waiting for activation!"):e.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,!1,"",t.returnUrl)})}},t.prototype.wsFederationLoginStatusChangeCallback=function(t,e,n,i){var l=this,r=this.wsFederationAuthenticationContext.getCachedUser(),s=new m.M;s.authProvider=Rt.WSFEDERATION,s.providerAccessCode=e,s.providerKey=r.profile.sub,s.singleSignIn=M.a.getSingleSignIn(),s.returnUrl=M.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(s).subscribe(function(t){if(t.waitingForActivation)return l._messageService.info("You have successfully registered. Waiting for activation!"),void l._router.navigate(["account/login"]);l.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,!1,"",t.returnUrl)})},t.prototype.microsoftLogin=function(){var t=this;this._logService.debug(WL.getSession());var e=new m.M;e.authProvider=Rt.MICROSOFT,e.providerAccessCode=WL.getSession().access_token,e.providerKey=WL.getSession().id,e.singleSignIn=M.a.getSingleSignIn(),e.returnUrl=M.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(e).subscribe(function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,!1,"",e.returnUrl)})},t.twoFactorRememberClientTokenName="TwoFactorRememberClientToken",t}(),Nt=function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s._router=n,s._loginService=i,s._uiCustomizationService=l,s.currentYear=B().year(),s.remoteServiceBaseUrl=H.a.remoteServiceBaseUrl,s.tenantChangeDisabledRoutes=["select-edition","buy","upgrade","extend","register-tenant","stripe-purchase","stripe-subscribe","stripe-update-subscription","paypal-purchase"],s.viewContainerRef=r,s}return Object(g.__extends)(e,t),e.prototype.showTenantChange=function(){var t=this;return!!this._router.url&&!R.filter(this.tenantChangeDisabledRoutes,function(e){return t._router.url.indexOf("/account/"+e)>=0}).length&&abp.multiTenancy.isEnabled&&!this.supportsTenancyNameInUrl()},e.prototype.useFullWidthLayout=function(){return this._router.url.indexOf("/account/select-edition")>=0},e.prototype.ngOnInit=function(){this._loginService.init(),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()},e.prototype.goToHome=function(){window.location.href="/"},e.prototype.getBgUrl=function(){return"url(./assets/metronic/themes/"+this.currentTheme.baseSettings.theme+"/images/bg/bg-4.jpg)"},e.prototype.supportsTenancyNameInUrl=function(){return H.a.appBaseUrlFormat&&H.a.appBaseUrlFormat.indexOf(H.a.tenancyNamePlaceHolderInUrl)>=0},e}(f.a),kt=i["\u0275crt"]({encapsulation:2,styles:[[".kt-login.kt-login--v1 .kt-login__aside{width:605px;padding:3rem 3.5rem;background-repeat:no-repeat;background-size:cover}.kt-login.kt-login--v1 .kt-login__aside .kt-login__logo{display:flex}.kt-login.kt-login--v1 .kt-login__aside .kt-login__title{color:#fff;font-size:2rem;font-weight:500}.kt-login.kt-login--v1 .kt-login__aside .kt-login__subtitle{font-size:1.2rem;font-weight:200;margin:2.5rem 0 3.5rem;color:rgba(255,255,255,.7)}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info{display:flex;justify-content:space-between}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a{text-decoration:none;margin-right:2rem;display:inline-block;color:rgba(255,255,255,.7)}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:hover{color:#fff}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:hover:after{border-bottom:1px solid #fff;opacity:.3}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:last-child{margin-right:0}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__copyright{color:rgba(255,255,255,.4)}.kt-login.kt-login--v1 .kt-login__wrapper{padding:3rem;background:#fff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head{font-size:1rem;font-weight:500;text-align:right}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head .kt-login__signup-label{color:#a7abc3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head .kt-login__signup-link{color:#5d78ff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body{display:flex;justify-content:center;align-items:center;height:100%}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form{width:100%;max-width:450px}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__title{display:block;text-align:center;margin-bottom:5rem;text-decoration:none}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__title>h3{font-size:2rem;color:#67666e}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form{margin:4rem auto}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group{margin:0 auto;padding:0}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group .form-control{border:none;height:50px;margin-top:1.25rem;background-color:rgba(247,247,249,.7);padding-left:1.25rem;padding-right:1.25rem;transition:background-color .3s ease}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group .form-control:focus{transition:background-color .3s ease;background-color:#f7f7f9}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions{display:flex;justify-content:space-between;align-items:center;margin:3rem 0}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot{color:#a7abc3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot:hover{color:#5d78ff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot:hover:after{border-bottom:1px solid #5d78ff;opacity:.3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__btn-primary,.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__btn-secondary{height:50px;padding-left:2.5rem;padding-right:2.5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__divider{margin:1rem 0 2rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__divider:not(:first-child):not(:last-child){font-weight:400;color:#b5b2c3;font-size:1rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options{display:flex;justify-content:center;justify-content:space-between;max-width:100%}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a{text-decoration:none;flex:1;justify-content:center;align-items:center;display:flex}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a:not(:first-child):not(:last-child){margin:0 1.5rem}@media (min-width:1025px){.kt-login.kt-login--v1 .kt-login__aside{flex:1}}@media (max-width:1024px){.kt-login.kt-login--v1 .kt-login__aside{width:100%;height:auto;padding:2rem 1.5rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__logo{margin-bottom:2.5rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info{margin-top:2rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__subtitle{margin:2rem 0}.kt-login.kt-login--v1 .kt-login__wrapper{padding:3rem 1.5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head{padding-left:2rem;right:2rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body{display:flex;justify-content:center;align-items:center;margin-top:5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a:not(:first-child):not(:last-child){margin:0 .8rem}}.language-switch-area a{margin-right:5px;cursor:pointer}.language-switch-area i{display:inline-block}.kt-login__form{margin:40px auto!important}.kt-login__account{text-align:center}.has-danger .form-control-feedback{color:#fd397a;margin-top:.2rem;font-size:.85rem;text-align:left}ul.text-danger{list-style:none;color:#f4516c;margin-top:.2rem;font-size:.85rem;text-align:left;padding-left:0}.captcha-container{margin:auto;width:70%}"]],data:{}});function Pt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"img",[["alt","logo"],["height","38"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.appRootUrl()+"assets/common/images/app-logo-on-dark.svg")})}function Ot(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"img",[["alt","logo"],["height","38"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.remoteServiceBaseUrl+"/TenantCustomization/GetTenantLogo?skin=light&tenantId="+n.appSession.tenant.id+"&id="+n.appSession.tenant.logoId)})}function Dt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,12,"div",[["class","kt-grid__item kt-grid__item--order-tablet-and-mobile-2 kt-grid kt-grid--hor kt-login__aside"],["style","background-image: url('/assets/metronic/common/images/bg/bg-4.jpg');"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,5,"div",[["class","kt-grid__item"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,4,"a",[["href",""]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.goToHome()&&i),i},null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Pt)),i["\u0275did"](4,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Ot)),i["\u0275did"](6,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](7,0,null,null,5,"div",[["class","kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,4,"div",[["class","kt-grid__item kt-grid__item--middle"]],null,null,null,null,null)),(t()(),i["\u0275eld"](9,0,null,null,1,"h3",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["AspNet Zero"])),(t()(),i["\u0275eld"](11,0,null,null,1,"h4",[["class","kt-login__subtitle"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["Base solution for your next web application."]))],function(t,e){var n=e.component;t(e,4,0,!n.appSession.tenant||!n.appSession.tenant.logoId),t(e,6,0,n.appSession.tenant&&n.appSession.tenant.logoId)},null)}function Ht(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","kt-login__signup-label tenant-change-box text-center"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"tenant-change",[],null,null,null,I,w)),i["\u0275did"](2,114688,null,0,E,[i.Injector,m.b],null,null)],function(t,e){t(e,2,0)},null)}function Lt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,22,"div",[],[[4,"text-align",null]],null,null,null,null)),i["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](2,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](3,{"kt-grid kt-grid--ver kt-grid--root":0,"kt-content":1}),(t()(),i["\u0275eld"](4,0,null,null,18,"div",[["id","kt_login"]],null,null,null,null,null)),i["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](6,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](7,{"kt-grid kt-grid--hor kt-grid--root  kt-login kt-login--v1":0,row:1}),(t()(),i["\u0275eld"](8,0,null,null,14,"div",[],null,null,null,null,null)),i["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](10,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](11,{"kt-grid__item kt-grid__item--fluid kt-grid kt-grid--desktop kt-grid--ver-desktop kt-grid--hor-tablet-and-mobile":0,"col-md-12":1}),(t()(),i["\u0275and"](16777216,null,null,1,null,Dt)),i["\u0275did"](13,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](14,0,null,null,8,"div",[["class","kt-grid__item kt-grid__item--fluid  kt-grid__item--order-tablet-and-mobile-1  kt-login__wrapper d-block"]],null,null,null,null,null)),(t()(),i["\u0275eld"](15,0,null,null,2,"div",[["class","kt-login__head d-block mt-3 mr-auto ml-auto text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](16,0,null,null,1,"language-switch",[],null,null,null,O,N)),i["\u0275did"](17,114688,null,0,F,[i.Injector],null,null),(t()(),i["\u0275eld"](18,0,null,null,4,"div",[["class","kt-login__body d-block mt-3 mr-auto ml-auto"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Ht)),i["\u0275did"](20,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](21,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](22,212992,null,0,D.RouterOutlet,[D.ChildrenOutletContexts,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(t,e){var n=e.component,i=t(e,3,0,!n.useFullWidthLayout(),n.useFullWidthLayout());t(e,2,0,i);var l=t(e,7,0,!n.useFullWidthLayout(),n.useFullWidthLayout());t(e,6,0,l);var r=t(e,11,0,!n.useFullWidthLayout(),n.useFullWidthLayout());t(e,10,0,r),t(e,13,0,!n.useFullWidthLayout()),t(e,17,0),t(e,20,0,n.showTenantChange()),t(e,22,0)},function(t,e){t(e,0,0,e.component.useFullWidthLayout()?"center":"left")})}function Bt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,16777216,null,null,1,"ng-component",[],null,null,null,Lt,kt)),i["\u0275did"](1,114688,null,0,Nt,[i.Injector,D.Router,Ft,L.a,i.ViewContainerRef],null,null)],function(t,e){t(e,1,0)},null)}var Vt=i["\u0275ccf"]("ng-component",Nt,Bt,{},{},[]),jt=n("+Muo"),Ut=n("kgQi"),qt=n("ooh5"),Mt=n("xDbU"),Kt=function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s.loginService=n,s._router=i,s._sessionService=l,s._sessionAppService=r,s.submitting=!1,s.isMultiTenancyEnabled=s.multiTenancy.isEnabled,s}return Object(g.__extends)(e,t),Object.defineProperty(e.prototype,"multiTenancySideIsTeanant",{get:function(){return this._sessionService.tenantId>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTenantSelfRegistrationAllowed",{get:function(){return this.setting.getBoolean("App.TenantManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelfRegistrationAllowed",{get:function(){return!!this._sessionService.tenantId&&this.setting.getBoolean("App.UserManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._sessionService.userId>0&&M.a.getReturnUrl()&&M.a.getSingleSignIn()&&this._sessionAppService.updateUserSignInToken().subscribe(function(t){var e=M.a.getReturnUrl(),n=e+(e.indexOf("?")>=0?"&":"?")+"accessToken="+t.signInToken+"&userId="+t.encodedUserId+"&tenantId="+t.encodedTenantId;location.href=n});var t=M.a.getQueryParametersUsingHash().state;t&&t.indexOf("openIdConnect")>=0&&this.loginService.openIdConnectLoginCallback({})},e.prototype.login=function(){var t=this;abp.ui.setBusy(void 0,"",1),this.submitting=!0,this.loginService.authenticate(function(){t.submitting=!1,abp.ui.clearBusy()})},e.prototype.externalLogin=function(t){this.loginService.externalAuthenticate(t)},e}(f.a),Gt=i["\u0275crt"]({encapsulation:0,styles:[[".kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding-right:.35rem;margin:0 5px 0 0!important}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-openidconnect[_ngcontent-%COMP%]{background:url(/assets/common/images/social/openid.png) no-repeat;width:16px;height:16px}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-wsfederation[_ngcontent-%COMP%]{background:url(/assets/common/images/social/adfs.png) no-repeat;width:16px;height:16px}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Wt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](1,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null)],function(t,e){t(e,1,0,i["\u0275nov"](e.parent,17))},null)}function zt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](1,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null)],function(t,e){t(e,1,0,i["\u0275nov"](e.parent,31))},null)}function Yt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"a",[["class","btn btn-outline-secondary kt-btn btn-sm"]],[[8,"title",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.externalLogin(t.context.$implicit)&&i),i},null,null)),(t()(),i["\u0275eld"](1,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,[" "," "]))],null,function(t,e){t(e,0,0,i["\u0275inlineInterpolate"](1,"",e.context.$implicit.name,"")),t(e,1,0,i["\u0275inlineInterpolate"](1,"fab fa-",e.context.$implicit.icon,"")),t(e,2,0,e.context.$implicit.name)})}function Jt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","kt-login__options"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Yt)),i["\u0275did"](2,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.loginService.externalLoginProviders)},null)}function Xt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,3,"a",[["routerLink","/account/register"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["\u0275did"](2,671744,null,0,D.RouterLinkWithHref,[D.Router,D.ActivatedRoute,o.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275ted"](3,null,["",""])),i["\u0275ppd"](4,1),(t()(),i["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,[" | "]))],function(t,e){t(e,2,0,"/account/register")},function(t,e){t(e,1,0,i["\u0275nov"](e,2).target,i["\u0275nov"](e,2).href);var n=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"CreateAnAccount"));t(e,3,0,n)})}function $t(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,3,"a",[["routerLink","/account/select-edition"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["\u0275did"](2,671744,null,0,D.RouterLinkWithHref,[D.Router,D.ActivatedRoute,o.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275ted"](3,null,["",""])),i["\u0275ppd"](4,1),(t()(),i["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,[" | "]))],function(t,e){t(e,2,0,"/account/select-edition")},function(t,e){t(e,1,0,i["\u0275nov"](e,2).target,i["\u0275nov"](e,2).href);var n=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"NewTenant"));t(e,3,0,n)})}function Qt(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,63,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[["class","m-0"]],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275eld"](6,0,null,null,49,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,8).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,8).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.login()&&l),l},null,null)),i["\u0275did"](7,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](8,4210688,[["loginForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](10,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](11,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,9,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control m-input"],["name","userNameOrEmailAddress"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,13)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,13).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,13)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,13)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.loginService.authenticateModel.userNameOrEmailAddress=n)&&l),l},null,null)),i["\u0275did"](13,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](14,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t){return[t]},[a.RequiredValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](17,671744,[["userNameOrEmailAddressInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](19,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](20,4210688,null,0,qt.a,[i.ElementRef],null,null),i["\u0275ppd"](21,1),(t()(),i["\u0275and"](16777216,null,null,1,null,Wt)),i["\u0275did"](23,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](24,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](25,0,null,null,9,"input",[["autocomplete","new-password"],["class","form-control m-input"],["maxlength","32"],["name","password"],["required",""],["type","password"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,26)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,26).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,26)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,26)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.loginService.authenticateModel.password=n)&&l),l},null,null)),i["\u0275did"](26,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](27,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](28,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](31,671744,[["passwordInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](33,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](34,1),(t()(),i["\u0275and"](16777216,null,null,1,null,zt)),i["\u0275did"](36,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](37,0,null,null,10,"div",[["class","form-group mt-4"]],null,null,null,null,null)),(t()(),i["\u0275eld"](38,0,null,null,9,"label",[["class","kt-checkbox"]],null,null,null,null,null)),(t()(),i["\u0275eld"](39,0,null,null,5,"input",[["class","form-control"],["name","rememberMe"],["type","checkbox"],["value","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,r=t.component;return"change"===e&&(l=!1!==i["\u0275nov"](t,40).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,40).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(r.loginService.rememberMe=n)&&l),l},null,null)),i["\u0275did"](40,16384,null,0,a.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.CheckboxControlValueAccessor]),i["\u0275did"](42,671744,null,0,a.NgModel,[[2,a.ControlContainer],[8,null],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](44,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),(t()(),i["\u0275ted"](45,null,[""," "])),i["\u0275ppd"](46,1),(t()(),i["\u0275eld"](47,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](48,0,null,null,7,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](49,0,null,null,3,"a",[["class","kt-link kt-login__link-forgot"],["id","forget-password"],["routerLink","/account/forgot-password"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,50).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["\u0275did"](50,671744,null,0,D.RouterLinkWithHref,[D.Router,D.ActivatedRoute,o.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275ted"](51,null,["",""])),i["\u0275ppd"](52,1),(t()(),i["\u0275eld"](53,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),i["\u0275ted"](54,null,["",""])),i["\u0275ppd"](55,1),(t()(),i["\u0275eld"](56,0,null,null,6,"div",[["class","kt-login__divider"]],null,null,null,null,null)),(t()(),i["\u0275eld"](57,0,null,null,5,"div",[["class","kt-divider"]],null,null,null,null,null)),(t()(),i["\u0275eld"](58,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](59,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](60,null,["",""])),i["\u0275ppd"](61,1),(t()(),i["\u0275eld"](62,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Jt)),i["\u0275did"](64,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](65,0,null,null,8,"div",[["class","kt-login__account"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Xt)),i["\u0275did"](67,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,$t)),i["\u0275did"](69,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](70,0,null,null,3,"a",[["id","email-activation-btn"],["routerLink","/account/email-activation"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,71).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["\u0275did"](71,671744,null,0,D.RouterLinkWithHref,[D.Router,D.ActivatedRoute,o.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275ted"](72,null,["",""])),i["\u0275ppd"](73,1)],function(t,e){var n=e.component;t(e,14,0,""),t(e,17,0,"userNameOrEmailAddress",n.loginService.authenticateModel.userNameOrEmailAddress),t(e,23,0,!i["\u0275nov"](e,17).touched),t(e,27,0,""),t(e,28,0,"32"),t(e,31,0,"password",n.loginService.authenticateModel.password),t(e,36,0,!i["\u0275nov"](e,31).touched),t(e,42,0,"rememberMe",n.loginService.rememberMe),t(e,50,0,"/account/forgot-password"),t(e,64,0,(n.multiTenancySideIsTeanant||!n.isMultiTenancyEnabled)&&n.loginService.externalLoginProviders.length>0),t(e,67,0,n.isSelfRegistrationAllowed),t(e,69,0,!n.multiTenancySideIsTeanant&&n.isTenantSelfRegistrationAllowed),t(e,71,0,"/account/email-activation")},function(t,e){t(e,1,0,void 0);var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"LogIn"));t(e,4,0,n),t(e,6,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending);var l=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,12,0,t(e,21,0,i["\u0275nov"](e,0),"UserNameOrEmail"))," *");t(e,12,0,l,i["\u0275nov"](e,14).required?"":null,i["\u0275nov"](e,19).ngClassUntouched,i["\u0275nov"](e,19).ngClassTouched,i["\u0275nov"](e,19).ngClassPristine,i["\u0275nov"](e,19).ngClassDirty,i["\u0275nov"](e,19).ngClassValid,i["\u0275nov"](e,19).ngClassInvalid,i["\u0275nov"](e,19).ngClassPending);var r=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,25,0,t(e,34,0,i["\u0275nov"](e,0),"Password"))," *");t(e,25,0,r,i["\u0275nov"](e,27).required?"":null,i["\u0275nov"](e,28).maxlength?i["\u0275nov"](e,28).maxlength:null,i["\u0275nov"](e,33).ngClassUntouched,i["\u0275nov"](e,33).ngClassTouched,i["\u0275nov"](e,33).ngClassPristine,i["\u0275nov"](e,33).ngClassDirty,i["\u0275nov"](e,33).ngClassValid,i["\u0275nov"](e,33).ngClassInvalid,i["\u0275nov"](e,33).ngClassPending),t(e,39,0,i["\u0275nov"](e,44).ngClassUntouched,i["\u0275nov"](e,44).ngClassTouched,i["\u0275nov"](e,44).ngClassPristine,i["\u0275nov"](e,44).ngClassDirty,i["\u0275nov"](e,44).ngClassValid,i["\u0275nov"](e,44).ngClassInvalid,i["\u0275nov"](e,44).ngClassPending);var s=i["\u0275unv"](e,45,0,t(e,46,0,i["\u0275nov"](e,0),"RememberMe"));t(e,45,0,s),t(e,49,0,i["\u0275nov"](e,50).target,i["\u0275nov"](e,50).href);var o=i["\u0275unv"](e,51,0,t(e,52,0,i["\u0275nov"](e,0),"ForgotPassword"));t(e,51,0,o),t(e,53,0,!i["\u0275nov"](e,8).form.valid);var a=i["\u0275unv"](e,54,0,t(e,55,0,i["\u0275nov"](e,0),"LogIn"));t(e,54,0,a);var u=i["\u0275unv"](e,60,0,t(e,61,0,i["\u0275nov"](e,0),"LoginWith"));t(e,60,0,u),t(e,70,0,i["\u0275nov"](e,71).target,i["\u0275nov"](e,71).href);var c=i["\u0275unv"](e,72,0,t(e,73,0,i["\u0275nov"](e,0),"EmailActivation"));t(e,72,0,c)})}function Zt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Qt,Gt)),i["\u0275did"](1,114688,null,0,Kt,[i.Injector,Ft,D.Router,Mt.a,m.Hb],null,null)],function(t,e){t(e,1,0)},null)}var te=i["\u0275ccf"]("ng-component",Kt,Zt,{},{},[]),ee=n("15PL"),ne=n("p4DR"),ie=n("wrqk"),le=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function re(t){return i["\u0275vid"](0,[],null,null)}var se=n("gGBz"),oe=n("KIW0"),ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(g.__extends)(e,t),e}(m.tb),ue=(n("9cOK"),function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s._accountService=n,s._router=i,s._loginService=l,s._profileService=r,s.model=new ae,s.passwordComplexitySetting=new m.mb,s.recaptchaSiteKey=H.a.recaptchaSiteKey,s.saving=!1,s}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;null!=this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe(function(e){t.passwordComplexitySetting=e.setting}):this._router.navigate(["account/login"])},Object.defineProperty(e.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),e.prototype.save=function(){var t=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._accountService.register(this.model).pipe(Object(v.a)(function(){t.saving=!1})).pipe(Object(ot.a)(function(e,n){t.recaptchaRef.reset()})).subscribe(function(e){if(!e.canLogin)return t.notify.success(t.l("SuccessfullyRegistered")),void t._router.navigate(["account/login"]);t.saving=!0,t._loginService.authenticateModel.userNameOrEmailAddress=t.model.userName,t._loginService.authenticateModel.password=t.model.password,t._loginService.authenticate(function(){t.saving=!1})})):this.message.warn(this.l("CaptchaCanNotBeEmpty"))},e.prototype.captchaResolved=function(t){this.model.captchaResponse=t},e}(f.a)),ce=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function de(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,74).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,74).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,74).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,74).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,74).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a)})}function he(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2),(t()(),i["\u0275eld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](17,null,["",""])),i["\u0275ppd"](18,1)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,89).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,89).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,89).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,89).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,89).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a),t(e,16,0,i["\u0275nov"](e.parent,89).valid);var u=i["\u0275unv"](e,17,0,t(e,18,0,i["\u0275nov"](e.parent,0),"PasswordsDontMatch"));t(e,17,0,u)})}function pe(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"p",[["class","mt-2 form-text text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"Captha_Hint"));t(e,1,0,n)})}function ge(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","form-group mt-2 captcha-container"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"re-captcha",[],[[1,"id",0]],[[null,"resolved"]],function(t,e,n){var i=!0;return"resolved"===e&&(i=!1!==t.component.captchaResolved(n)&&i),i},re,le)),i["\u0275did"](2,4374528,[[1,4],["recaptchaRef",4]],0,ee.RecaptchaComponent,[i.ElementRef,ne.RecaptchaLoaderService,i.NgZone,[2,ie.RECAPTCHA_SETTINGS]],{siteKey:[0,"siteKey"]},{resolved:"resolved"})],function(t,e){t(e,2,0,e.component.recaptchaSiteKey)},function(t,e){t(e,1,0,i["\u0275nov"](e,2).id)})}function fe(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275qud"](402653184,1,{recaptchaRef:0}),(t()(),i["\u0275eld"](2,0,null,null,108,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,107,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,103,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,9).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,9).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](8,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](9,4210688,[["registerForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](11,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](12,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,10,"input",[["autoFocus",""],["class","form-control"],["maxlength","32"],["name","Name"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,14)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,14).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,14)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,14)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.name=n)&&l),l},null,null)),i["\u0275did"](14,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](15,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](16,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](19,671744,[["nameInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](21,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](22,4210688,null,0,qt.a,[i.ElementRef],null,null),i["\u0275ppd"](23,1),(t()(),i["\u0275eld"](24,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](25,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](26,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](27,0,null,null,9,"input",[["class","form-control"],["maxlength","32"],["name","Surname"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,28)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,28).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,28)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,28)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.surname=n)&&l),l},null,null)),i["\u0275did"](28,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](29,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](30,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](33,671744,[["surnameInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](35,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](36,1),(t()(),i["\u0275eld"](37,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](38,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](39,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](40,0,null,null,10,"input",[["class","form-control"],["maxlength","256"],["name","EmailAddress"],["pattern","^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,41)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,41).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,41)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,41)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["\u0275did"](41,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](42,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](43,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275did"](44,540672,null,0,a.PatternValidator,[],{pattern:[0,"pattern"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,a.MaxLengthValidator,a.PatternValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](47,671744,[["emailAddressInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](49,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](50,1),(t()(),i["\u0275eld"](51,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](52,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](53,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](54,0,null,null,9,"input",[["autocomplete","new-password"],["class","form-control"],["maxlength","32"],["name","UserName"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,55)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,55).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,55)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,55)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.userName=n)&&l),l},null,null)),i["\u0275did"](55,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](56,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](57,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](60,671744,[["userNameInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](62,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](63,1),(t()(),i["\u0275eld"](64,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](65,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](66,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](67,0,null,null,10,"input",[["class","form-control"],["name","Password"],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,68)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,68).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,68)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,68)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.password=n)&&l),l},null,null)),i["\u0275did"](68,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](69,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](70,16384,null,0,se.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["\u0275did"](71,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](74,671744,[["Password",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](76,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](77,1),(t()(),i["\u0275eld"](78,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,de)),i["\u0275did"](80,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](81,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](82,0,null,null,10,"input",[["class","form-control"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,83)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,83).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,83)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,83)._compositionEnd(n.target.value)&&l),l},null,null)),i["\u0275did"](83,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](84,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](85,16384,null,0,se.a,[[8,"Password"],[8,"false"]],null,null),i["\u0275did"](86,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](89,671744,[["PasswordRepeat",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](91,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](92,1),(t()(),i["\u0275eld"](93,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,he)),i["\u0275did"](95,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,pe)),i["\u0275did"](97,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ge)),i["\u0275did"](99,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](100,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](101,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,102).onClick()&&l),l},null,null)),i["\u0275did"](102,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275eld"](103,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](104,null,[" ",""])),i["\u0275ppd"](105,1),(t()(),i["\u0275eld"](106,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](107,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](108,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),i["\u0275ted"](109,null,[" ",""])),i["\u0275ppd"](110,1)],function(t,e){var n=e.component;t(e,15,0,""),t(e,16,0,"32"),t(e,19,0,"Name",n.model.name),t(e,25,0,i["\u0275nov"](e,19)),t(e,29,0,""),t(e,30,0,"32"),t(e,33,0,"Surname",n.model.surname),t(e,38,0,i["\u0275nov"](e,33)),t(e,42,0,""),t(e,43,0,"256"),t(e,44,0,"^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"),t(e,47,0,"EmailAddress",n.model.emailAddress),t(e,52,0,i["\u0275nov"](e,47)),t(e,56,0,""),t(e,57,0,"32"),t(e,60,0,"UserName",n.model.userName),t(e,65,0,i["\u0275nov"](e,60)),t(e,69,0,""),t(e,71,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,74,0,"Password",n.model.password),t(e,80,0,i["\u0275nov"](e,74).errors),t(e,84,0,""),t(e,86,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,89,0,"PasswordRepeat",n.model.passwordRepeat),t(e,95,0,i["\u0275nov"](e,89).errors),t(e,97,0,n.useCaptcha),t(e,99,0,n.useCaptcha),t(e,102,0,"/account/login"),t(e,107,0,n.saving,n.l("SavingWithThreeDot"))},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e,0),"SignUp"));t(e,5,0,l),t(e,7,0,i["\u0275nov"](e,11).ngClassUntouched,i["\u0275nov"](e,11).ngClassTouched,i["\u0275nov"](e,11).ngClassPristine,i["\u0275nov"](e,11).ngClassDirty,i["\u0275nov"](e,11).ngClassValid,i["\u0275nov"](e,11).ngClassInvalid,i["\u0275nov"](e,11).ngClassPending);var r=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,13,0,t(e,23,0,i["\u0275nov"](e,0),"Name"))," *");t(e,13,0,r,i["\u0275nov"](e,15).required?"":null,i["\u0275nov"](e,16).maxlength?i["\u0275nov"](e,16).maxlength:null,i["\u0275nov"](e,21).ngClassUntouched,i["\u0275nov"](e,21).ngClassTouched,i["\u0275nov"](e,21).ngClassPristine,i["\u0275nov"](e,21).ngClassDirty,i["\u0275nov"](e,21).ngClassValid,i["\u0275nov"](e,21).ngClassInvalid,i["\u0275nov"](e,21).ngClassPending);var s=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,27,0,t(e,36,0,i["\u0275nov"](e,0),"Surname"))," *");t(e,27,0,s,i["\u0275nov"](e,29).required?"":null,i["\u0275nov"](e,30).maxlength?i["\u0275nov"](e,30).maxlength:null,i["\u0275nov"](e,35).ngClassUntouched,i["\u0275nov"](e,35).ngClassTouched,i["\u0275nov"](e,35).ngClassPristine,i["\u0275nov"](e,35).ngClassDirty,i["\u0275nov"](e,35).ngClassValid,i["\u0275nov"](e,35).ngClassInvalid,i["\u0275nov"](e,35).ngClassPending);var o=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,40,0,t(e,50,0,i["\u0275nov"](e,0),"EmailAddress"))," *");t(e,40,1,[o,i["\u0275nov"](e,42).required?"":null,i["\u0275nov"](e,43).maxlength?i["\u0275nov"](e,43).maxlength:null,i["\u0275nov"](e,44).pattern?i["\u0275nov"](e,44).pattern:null,i["\u0275nov"](e,49).ngClassUntouched,i["\u0275nov"](e,49).ngClassTouched,i["\u0275nov"](e,49).ngClassPristine,i["\u0275nov"](e,49).ngClassDirty,i["\u0275nov"](e,49).ngClassValid,i["\u0275nov"](e,49).ngClassInvalid,i["\u0275nov"](e,49).ngClassPending]);var a=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,54,0,t(e,63,0,i["\u0275nov"](e,0),"UserName"))," *");t(e,54,0,a,i["\u0275nov"](e,56).required?"":null,i["\u0275nov"](e,57).maxlength?i["\u0275nov"](e,57).maxlength:null,i["\u0275nov"](e,62).ngClassUntouched,i["\u0275nov"](e,62).ngClassTouched,i["\u0275nov"](e,62).ngClassPristine,i["\u0275nov"](e,62).ngClassDirty,i["\u0275nov"](e,62).ngClassValid,i["\u0275nov"](e,62).ngClassInvalid,i["\u0275nov"](e,62).ngClassPending);var u=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,67,0,t(e,77,0,i["\u0275nov"](e,0),"Password")),"");t(e,67,0,u,i["\u0275nov"](e,69).required?"":null,i["\u0275nov"](e,76).ngClassUntouched,i["\u0275nov"](e,76).ngClassTouched,i["\u0275nov"](e,76).ngClassPristine,i["\u0275nov"](e,76).ngClassDirty,i["\u0275nov"](e,76).ngClassValid,i["\u0275nov"](e,76).ngClassInvalid,i["\u0275nov"](e,76).ngClassPending),t(e,78,0,i["\u0275nov"](e,9).form.valid||i["\u0275nov"](e,9).form.pristine);var c=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,82,0,t(e,92,0,i["\u0275nov"](e,0),"PasswordRepeat")),"");t(e,82,0,c,i["\u0275nov"](e,84).required?"":null,i["\u0275nov"](e,91).ngClassUntouched,i["\u0275nov"](e,91).ngClassTouched,i["\u0275nov"](e,91).ngClassPristine,i["\u0275nov"](e,91).ngClassDirty,i["\u0275nov"](e,91).ngClassValid,i["\u0275nov"](e,91).ngClassInvalid,i["\u0275nov"](e,91).ngClassPending),t(e,93,0,i["\u0275nov"](e,9).form.valid||i["\u0275nov"](e,9).form.pristine),t(e,101,0,n.saving);var d=i["\u0275unv"](e,104,0,t(e,105,0,i["\u0275nov"](e,0),"Back"));t(e,104,0,d),t(e,106,0,!i["\u0275nov"](e,9).form.valid);var h=i["\u0275unv"](e,109,0,t(e,110,0,i["\u0275nov"](e,0),"Submit"));t(e,109,0,h)})}function me(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,fe,ce)),i["\u0275did"](1,114688,null,0,ue,[i.Injector,m.b,D.Router,Ft,m.sb],null,null)],function(t,e){t(e,1,0)},null)}var ve=i["\u0275ccf"]("ng-component",ue,me,{},{},[]),ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(g.__extends)(e,t),e}(m.ub),Se=function(){return function(){}}(),be=function(t){function e(e,n,i,l,r,s){var o=t.call(this,e)||this;return o._tenantRegistrationService=n,o._router=i,o._profileService=l,o._tenantRegistrationHelper=r,o._activatedRoute=s,o.model=new ye,o.passwordComplexitySetting=new m.mb,o.subscriptionStartType=m.Sb,o.paymentPeriodType=m.pb,o.selectedPaymentPeriodType=m.pb.Monthly,o.subscriptionPaymentGateway=m.Pb,o.paymentId="",o.recaptchaSiteKey=H.a.recaptchaSiteKey,o.saving=!1,o}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.model.editionId=this._activatedRoute.snapshot.queryParams.editionId,this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.model.editionId&&(this.model.subscriptionStartType=this._activatedRoute.snapshot.queryParams.subscriptionStartType),null==this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe(function(e){t.passwordComplexitySetting=e.setting}):this._router.navigate(["account/login"])},e.prototype.ngAfterViewInit=function(){var t=this;this.model.editionId&&this._tenantRegistrationService.getEdition(this.model.editionId).subscribe(function(e){t.model.edition=e})},Object.defineProperty(e.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.TenantManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),e.prototype.save=function(){var t=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._tenantRegistrationService.registerTenant(this.model).pipe(Object(v.a)(function(){t.saving=!1})).pipe(Object(ot.a)(function(e,n){t.recaptchaRef.reset()})).subscribe(function(e){t.notify.success(t.l("SuccessfullyRegistered")),t._tenantRegistrationHelper.registrationResult=e,parseInt(t.model.subscriptionStartType.toString())===m.Sb.Paid?t._router.navigate(["account/buy"],{queryParams:{tenantId:e.tenantId,editionId:t.model.editionId,subscriptionStartType:t.model.subscriptionStartType,editionPaymentType:t.editionPaymentType}}):t._router.navigate(["account/register-tenant-result"])})):this.message.warn(this.l("CaptchaCanNotBeEmpty"))},e.prototype.captchaResolved=function(t){this.model.captchaResponse=t},e.prototype.onPaymentPeriodChangeChange=function(t){this.selectedPaymentPeriodType=t},e}(f.a),_e=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Ce(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"h4",[["class","text-center"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",": ",""])),i["\u0275ppd"](2,1)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"Edition"));t(e,1,0,l,n.model.edition.displayName)})}function Ee(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"span",[["class","form-text text-danger text-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1)],null,function(t,e){var n=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"TenantName_Regex_Description"));t(e,2,0,n)})}function we(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,72).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,72).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,72).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,72).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,72).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a)})}function Ae(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2),(t()(),i["\u0275eld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](17,null,["",""])),i["\u0275ppd"](18,1)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,87).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,87).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,87).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,87).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,87).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a),t(e,16,0,i["\u0275nov"](e.parent,87).valid);var u=i["\u0275unv"](e,17,0,t(e,18,0,i["\u0275nov"](e.parent,0),"PasswordsDontMatch"));t(e,17,0,u)})}function Te(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"p",[["class","mt-2 form-text text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"Captha_Hint"));t(e,1,0,n)})}function xe(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","form-group mt-2 text-center captcha-container"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"re-captcha",[],[[1,"id",0]],[[null,"resolved"]],function(t,e,n){var i=!0;return"resolved"===e&&(i=!1!==t.component.captchaResolved(n)&&i),i},re,le)),i["\u0275did"](2,4374528,[[1,4],["recaptchaRef",4]],0,ee.RecaptchaComponent,[i.ElementRef,ne.RecaptchaLoaderService,i.NgZone,[2,ie.RECAPTCHA_SETTINGS]],{siteKey:[0,"siteKey"]},{resolved:"resolved"})],function(t,e){t(e,2,0,e.component.recaptchaSiteKey)},function(t,e){t(e,1,0,i["\u0275nov"](e,2).id)})}function Ie(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275qud"](402653184,1,{recaptchaRef:0}),(t()(),i["\u0275eld"](2,0,null,null,106,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,105,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),i["\u0275ppd"](6,1),(t()(),i["\u0275and"](16777216,null,null,1,null,Ce)),i["\u0275did"](8,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](9,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(t()(),i["\u0275eld"](10,0,null,null,98,"form",[["class","kt-form mt-2"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,12).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,12).onReset()&&l),"submit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](11,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](12,4210688,[["registerForm",4]],0,a.NgForm,[[8,null],[8,null]],null,null),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](14,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](15,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(t()(),i["\u0275ted"](16,null,[" "," "])),i["\u0275ppd"](17,1),(t()(),i["\u0275eld"](18,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,11,"input",[["autoFocus",""],["class","form-control"],["maxlength","64"],["name","tenancyName"],["pattern","^[a-zA-Z][a-zA-Z0-9_-]{1,}$"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,20)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,20).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,20)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,20)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.tenancyName=n)&&l),l},null,null)),i["\u0275did"](20,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](21,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](22,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275did"](23,540672,null,0,a.PatternValidator,[],{pattern:[0,"pattern"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,a.MaxLengthValidator,a.PatternValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](26,671744,[["tenancyName",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](28,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](29,4210688,null,0,qt.a,[i.ElementRef],null,null),i["\u0275ppd"](30,1),(t()(),i["\u0275and"](16777216,null,null,1,null,Ee)),i["\u0275did"](32,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](33,0,null,null,12,"div",[["class","form-group "]],null,null,null,null,null)),(t()(),i["\u0275eld"](34,0,null,null,9,"input",[["class","form-control"],["maxlength","128"],["name","Name"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,35)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,35).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,35)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,35)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.name=n)&&l),l},null,null)),i["\u0275did"](35,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](36,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](37,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](40,671744,[["nameInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](42,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](43,1),(t()(),i["\u0275eld"](44,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](45,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](46,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(t()(),i["\u0275ted"](47,null,[" "," "])),i["\u0275ppd"](48,1),(t()(),i["\u0275eld"](49,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(t()(),i["\u0275eld"](50,0,null,null,10,"input",[["class","form-control"],["email",""],["maxlength","256"],["name","adminEmailAddress"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,51)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,51).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,51)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,51)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.adminEmailAddress=n)&&l),l},null,null)),i["\u0275did"](51,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](52,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](53,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275did"](54,16384,null,0,a.EmailValidator,[],{email:[0,"email"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,a.MaxLengthValidator,a.EmailValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](57,671744,[["adminEmailAddressInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](59,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](60,1),(t()(),i["\u0275eld"](61,0,null,null,2,"span",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](62,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](63,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](64,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(t()(),i["\u0275eld"](65,0,null,null,10,"input",[["class","form-control"],["name","Password"],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,66)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,66).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,66)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,66)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.adminPassword=n)&&l),l},null,null)),i["\u0275did"](66,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](67,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](68,16384,null,0,se.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["\u0275did"](69,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](72,671744,[["Password",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](74,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](75,1),(t()(),i["\u0275eld"](76,0,null,null,2,"div",[["class","form-group "]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,we)),i["\u0275did"](78,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](79,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(t()(),i["\u0275eld"](80,0,null,null,10,"input",[["class","form-control"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,81)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,81).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,81)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,81)._compositionEnd(n.target.value)&&l),l},null,null)),i["\u0275did"](81,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](82,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](83,16384,null,0,se.a,[[8,"Password"],[8,"false"]],null,null),i["\u0275did"](84,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](87,671744,[["PasswordRepeat",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](89,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](90,1),(t()(),i["\u0275eld"](91,0,null,null,2,"div",[["class","form-group "]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Ae)),i["\u0275did"](93,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Te)),i["\u0275did"](95,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,xe)),i["\u0275did"](97,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](98,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](99,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,100).onClick()&&l),l},null,null)),i["\u0275did"](100,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275eld"](101,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](102,null,[" ",""])),i["\u0275ppd"](103,1),(t()(),i["\u0275eld"](104,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](105,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](106,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),i["\u0275ted"](107,null,[" ",""])),i["\u0275ppd"](108,1)],function(t,e){var n=e.component;t(e,8,0,n.model.edition),t(e,21,0,""),t(e,22,0,"64"),t(e,23,0,"^[a-zA-Z][a-zA-Z0-9_-]{1,}$"),t(e,26,0,"tenancyName",n.model.tenancyName),t(e,32,0,!i["\u0275nov"](e,26).valid&&!i["\u0275nov"](e,26).pristine),t(e,36,0,""),t(e,37,0,"128"),t(e,40,0,"Name",n.model.name),t(e,45,0,i["\u0275nov"](e,40)),t(e,52,0,""),t(e,53,0,"256"),t(e,54,0,""),t(e,57,0,"adminEmailAddress",n.model.adminEmailAddress),t(e,63,0,i["\u0275nov"](e,57)),t(e,67,0,""),t(e,69,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,72,0,"Password",n.model.adminPassword),t(e,78,0,i["\u0275nov"](e,72).errors),t(e,82,0,""),t(e,84,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,87,0,"PasswordRepeat",n.model.passwordRepeat),t(e,93,0,i["\u0275nov"](e,87).errors),t(e,95,0,n.useCaptcha),t(e,97,0,n.useCaptcha),t(e,100,0,"/account/login"),t(e,105,0,n.saving,n.l("SavingWithThreeDot"))},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e,0),"TenantSignUp"));t(e,5,0,l),t(e,10,0,i["\u0275nov"](e,14).ngClassUntouched,i["\u0275nov"](e,14).ngClassTouched,i["\u0275nov"](e,14).ngClassPristine,i["\u0275nov"](e,14).ngClassDirty,i["\u0275nov"](e,14).ngClassValid,i["\u0275nov"](e,14).ngClassInvalid,i["\u0275nov"](e,14).ngClassPending);var r=i["\u0275unv"](e,16,0,t(e,17,0,i["\u0275nov"](e,0),"TenantInformations"));t(e,16,0,r);var s=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,19,0,t(e,30,0,i["\u0275nov"](e,0),"TenancyName"))," *");t(e,19,1,[s,i["\u0275nov"](e,21).required?"":null,i["\u0275nov"](e,22).maxlength?i["\u0275nov"](e,22).maxlength:null,i["\u0275nov"](e,23).pattern?i["\u0275nov"](e,23).pattern:null,i["\u0275nov"](e,28).ngClassUntouched,i["\u0275nov"](e,28).ngClassTouched,i["\u0275nov"](e,28).ngClassPristine,i["\u0275nov"](e,28).ngClassDirty,i["\u0275nov"](e,28).ngClassValid,i["\u0275nov"](e,28).ngClassInvalid,i["\u0275nov"](e,28).ngClassPending]);var o=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,34,0,t(e,43,0,i["\u0275nov"](e,0),"TenantName"))," *");t(e,34,0,o,i["\u0275nov"](e,36).required?"":null,i["\u0275nov"](e,37).maxlength?i["\u0275nov"](e,37).maxlength:null,i["\u0275nov"](e,42).ngClassUntouched,i["\u0275nov"](e,42).ngClassTouched,i["\u0275nov"](e,42).ngClassPristine,i["\u0275nov"](e,42).ngClassDirty,i["\u0275nov"](e,42).ngClassValid,i["\u0275nov"](e,42).ngClassInvalid,i["\u0275nov"](e,42).ngClassPending);var a=i["\u0275unv"](e,47,0,t(e,48,0,i["\u0275nov"](e,0),"AccountSettings"));t(e,47,0,a);var u=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,50,0,t(e,60,0,i["\u0275nov"](e,0),"AdminEmailAddress"))," *");t(e,50,0,u,i["\u0275nov"](e,52).required?"":null,i["\u0275nov"](e,53).maxlength?i["\u0275nov"](e,53).maxlength:null,i["\u0275nov"](e,59).ngClassUntouched,i["\u0275nov"](e,59).ngClassTouched,i["\u0275nov"](e,59).ngClassPristine,i["\u0275nov"](e,59).ngClassDirty,i["\u0275nov"](e,59).ngClassValid,i["\u0275nov"](e,59).ngClassInvalid,i["\u0275nov"](e,59).ngClassPending);var c=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,65,0,t(e,75,0,i["\u0275nov"](e,0),"AdminPassword")),"");t(e,65,0,c,i["\u0275nov"](e,67).required?"":null,i["\u0275nov"](e,74).ngClassUntouched,i["\u0275nov"](e,74).ngClassTouched,i["\u0275nov"](e,74).ngClassPristine,i["\u0275nov"](e,74).ngClassDirty,i["\u0275nov"](e,74).ngClassValid,i["\u0275nov"](e,74).ngClassInvalid,i["\u0275nov"](e,74).ngClassPending),t(e,76,0,i["\u0275nov"](e,12).form.valid||i["\u0275nov"](e,12).form.pristine);var d=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,80,0,t(e,90,0,i["\u0275nov"](e,0),"PasswordRepeat")),"");t(e,80,0,d,i["\u0275nov"](e,82).required?"":null,i["\u0275nov"](e,89).ngClassUntouched,i["\u0275nov"](e,89).ngClassTouched,i["\u0275nov"](e,89).ngClassPristine,i["\u0275nov"](e,89).ngClassDirty,i["\u0275nov"](e,89).ngClassValid,i["\u0275nov"](e,89).ngClassInvalid,i["\u0275nov"](e,89).ngClassPending),t(e,91,0,i["\u0275nov"](e,12).form.valid||i["\u0275nov"](e,12).form.pristine),t(e,99,0,n.saving);var h=i["\u0275unv"](e,102,0,t(e,103,0,i["\u0275nov"](e,0),"Back"));t(e,102,0,h),t(e,104,0,!i["\u0275nov"](e,12).form.valid);var p=i["\u0275unv"](e,107,0,t(e,108,0,i["\u0275nov"](e,0),"Submit"));t(e,107,0,p)})}function Re(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ie,_e)),i["\u0275did"](1,4308992,null,0,be,[i.Injector,m.Xb,D.Router,m.sb,Se,D.ActivatedRoute],null,null)],function(t,e){t(e,1,0)},null)}var Fe=i["\u0275ccf"]("ng-component",be,Re,{},{},[]),Ne=n("WroF"),ke=function(t){function e(e,n,i,l){var r=t.call(this,e)||this;return r._router=n,r._appUrlService=i,r._tenantRegistrationHelper=l,r.model=new m.vb,r.saving=!1,r}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){this._tenantRegistrationHelper.registrationResult?(this.model=this._tenantRegistrationHelper.registrationResult,abp.multiTenancy.setTenantIdCookie(this.model.tenantId),this.tenantUrl=this._appUrlService.getAppRootUrlOfTenant(this.model.tenancyName)):this._router.navigate(["account/login"])},e}(f.a),Pe=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Oe(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","alert alert-warning"],["role","alert"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,2)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"ConfirmationMailSentPleaseClickLinkInTheEmail",n.model.emailAddress));t(e,1,0,l)})}function De(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","alert alert-primary"],["role","alert"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"YourAccountIsWaitingToBeActivatedByAdmin"));t(e,1,0,n)})}function He(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","alert alert-secondary"],["role","alert"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" ",""])),i["\u0275ppd"](2,1),(t()(),i["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""]))],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"TenantRegistrationLoginInfo"));t(e,1,0,l),t(e,4,0,i["\u0275inlineInterpolate"](1,"",n.tenantUrl,"")),t(e,5,0,n.tenantUrl)})}function Le(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,31,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,2,"h4",[],null,null,null,null,null)),(t()(),i["\u0275ted"](3,null,["",""])),i["\u0275ppd"](4,1),(t()(),i["\u0275eld"](5,0,null,null,20,"ul",[],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",":"])),i["\u0275ppd"](9,1),(t()(),i["\u0275ted"](10,null,[" ",""])),(t()(),i["\u0275eld"](11,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,["",":"])),i["\u0275ppd"](14,1),(t()(),i["\u0275ted"](15,null,[" ",""])),(t()(),i["\u0275eld"](16,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),i["\u0275eld"](17,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](18,null,["",":"])),i["\u0275ppd"](19,1),(t()(),i["\u0275ted"](20,null,[" ",""])),(t()(),i["\u0275eld"](21,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),i["\u0275eld"](22,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(t()(),i["\u0275ted"](23,null,["",":"])),i["\u0275ppd"](24,1),(t()(),i["\u0275ted"](25,null,[" ",""])),(t()(),i["\u0275eld"](26,0,null,null,6,"div",[],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Oe)),i["\u0275did"](28,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,De)),i["\u0275did"](30,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,He)),i["\u0275did"](32,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,28,0,n.model.isEmailConfirmationRequired),t(e,30,0,!n.model.isActive),t(e,32,0,n.tenantUrl)},function(t,e){var n=e.component;t(e,1,0,void 0);var l=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e,0),"SuccessfullyRegistered"));t(e,3,0,l);var r=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e,0),"TenancyName"));t(e,8,0,r),t(e,10,0,n.model.tenancyName);var s=i["\u0275unv"](e,13,0,t(e,14,0,i["\u0275nov"](e,0),"TenantName"));t(e,13,0,s),t(e,15,0,n.model.name);var o=i["\u0275unv"](e,18,0,t(e,19,0,i["\u0275nov"](e,0),"UserName"));t(e,18,0,o),t(e,20,0,n.model.userName);var a=i["\u0275unv"](e,23,0,t(e,24,0,i["\u0275nov"](e,0),"EmailAddress"));t(e,23,0,a),t(e,25,0,n.model.emailAddress)})}function Be(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Le,Pe)),i["\u0275did"](1,114688,null,0,ke,[i.Injector,D.Router,Ne.a,Se],null,null)],function(t,e){t(e,1,0)},null)}var Ve=i["\u0275ccf"]("ng-component",ke,Be,{},{},[]),je=function(t){function e(e,n,i,l){var r=t.call(this,e)||this;return r._accountService=n,r._appUrlService=i,r._router=l,r.model=new m.Db,r.saving=!1,r}return Object(g.__extends)(e,t),e.prototype.save=function(){var t=this;this.saving=!0,this._accountService.sendPasswordResetCode(this.model).pipe(Object(v.a)(function(){t.saving=!1})).subscribe(function(){t.message.success(t.l("PasswordResetMailSentMessage"),t.l("MailSent")).then(function(){t._router.navigate(["account/login"])})})},e}(f.a),Ue=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function qe(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,38,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[["class","m-0"]],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275eld"](6,0,null,null,33,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,8).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,8).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](7,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](8,4210688,[["forgotPassForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](10,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](12,null,[" "," "])),i["\u0275ppd"](13,1),(t()(),i["\u0275eld"](14,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](15,0,null,null,11,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control placeholder-no-fix"],["email",""],["maxlength","256"],["name","emailAddress"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["\u0275did"](16,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](17,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](18,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275did"](19,16384,null,0,a.EmailValidator,[],{email:[0,"email"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,a.MaxLengthValidator,a.EmailValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](22,671744,[["emailAddressInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](24,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](25,4210688,null,0,qt.a,[i.ElementRef],null,null),i["\u0275ppd"](26,1),(t()(),i["\u0275eld"](27,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](28,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](29,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](30,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,31).onClick()&&l),l},null,null)),i["\u0275did"](31,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275eld"](32,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](33,null,[" ",""])),i["\u0275ppd"](34,1),(t()(),i["\u0275eld"](35,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](36,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](37,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),i["\u0275ted"](38,null,[" ",""])),i["\u0275ppd"](39,1)],function(t,e){var n=e.component;t(e,17,0,""),t(e,18,0,"256"),t(e,19,0,""),t(e,22,0,"emailAddress",n.model.emailAddress),t(e,28,0,i["\u0275nov"](e,22)),t(e,31,0,"/account/login"),t(e,36,0,n.saving,n.l("SavingWithThreeDot"))},function(t,e){var n=e.component;t(e,1,0,void 0);var l=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"ForgotPassword"));t(e,4,0,l),t(e,6,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending);var r=i["\u0275unv"](e,12,0,t(e,13,0,i["\u0275nov"](e,0),"SendPasswordResetLink_Information"));t(e,12,0,r);var s=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,15,0,t(e,26,0,i["\u0275nov"](e,0),"EmailAddress"))," *");t(e,15,0,s,i["\u0275nov"](e,17).required?"":null,i["\u0275nov"](e,18).maxlength?i["\u0275nov"](e,18).maxlength:null,i["\u0275nov"](e,24).ngClassUntouched,i["\u0275nov"](e,24).ngClassTouched,i["\u0275nov"](e,24).ngClassPristine,i["\u0275nov"](e,24).ngClassDirty,i["\u0275nov"](e,24).ngClassValid,i["\u0275nov"](e,24).ngClassInvalid,i["\u0275nov"](e,24).ngClassPending),t(e,30,0,n.saving);var o=i["\u0275unv"](e,33,0,t(e,34,0,i["\u0275nov"](e,0),"Back"));t(e,33,0,o),t(e,35,0,!i["\u0275nov"](e,8).form.valid);var a=i["\u0275unv"](e,38,0,t(e,39,0,i["\u0275nov"](e,0),"Submit"));t(e,38,0,a)})}function Me(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,qe,Ue)),i["\u0275did"](1,49152,null,0,je,[i.Injector,m.b,Ne.a,D.Router],null,null)],null,null)}var Ke=i["\u0275ccf"]("ng-component",je,Me,{},{},[]),Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(g.__extends)(e,t),e}(m.wb),We=function(t){function e(e,n,i,l,r,s,o){var a=t.call(this,e)||this;return a._accountService=n,a._router=i,a._activatedRoute=l,a._loginService=r,a._appUrlService=s,a._profileService=o,a.model=new Ge,a.passwordComplexitySetting=new m.mb,a.saving=!1,a}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this._profileService.getPasswordComplexitySetting().subscribe(function(e){t.passwordComplexitySetting=e.setting}),this._activatedRoute.snapshot.queryParams.c?(this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new m.xb({c:this.model.c})).subscribe(function(e){t.appSession.changeTenantIfNeeded(e)})):(this.model.userId=this._activatedRoute.snapshot.queryParams.userId,this.model.resetCode=this._activatedRoute.snapshot.queryParams.resetCode,this.appSession.changeTenantIfNeeded(this.parseTenantId(this._activatedRoute.snapshot.queryParams.tenantId)))},e.prototype.save=function(){var t=this;this.saving=!0,this._accountService.resetPassword(this.model).pipe(Object(v.a)(function(){t.saving=!1})).subscribe(function(e){e.canLogin?(t.saving=!0,t._loginService.authenticateModel.userNameOrEmailAddress=e.userName,t._loginService.authenticateModel.password=t.model.password,t._loginService.authenticate(function(){t.saving=!1})):t._router.navigate(["account/login"])})},e.prototype.parseTenantId=function(t){var e=t?parseInt(t):void 0;return NaN===e&&(e=void 0),e},e}(f.a),ze=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Ye(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,22).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,22).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,22).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,22).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,22).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a)})}function Je(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),i["\u0275ppd"](3,1),(t()(),i["\u0275eld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](11,null,["",""])),i["\u0275ppd"](12,1),(t()(),i["\u0275eld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),i["\u0275ppd"](15,2),(t()(),i["\u0275eld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275ted"](17,null,["",""])),i["\u0275ppd"](18,1)],null,function(t,e){var n=e.component;t(e,1,0,!i["\u0275nov"](e.parent,37).errors.requireDigit);var l=i["\u0275unv"](e,2,0,t(e,3,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireDigit_Hint"));t(e,2,0,l),t(e,4,0,!i["\u0275nov"](e.parent,37).errors.requireLowercase);var r=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireLowercase_Hint"));t(e,5,0,r),t(e,7,0,!i["\u0275nov"](e.parent,37).errors.requireUppercase);var s=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireUppercase_Hint"));t(e,8,0,s),t(e,10,0,!i["\u0275nov"](e.parent,37).errors.requireNonAlphanumeric);var o=i["\u0275unv"](e,11,0,t(e,12,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));t(e,11,0,o),t(e,13,0,!i["\u0275nov"](e.parent,37).errors.requiredLength);var a=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));t(e,14,0,a),t(e,16,0,i["\u0275nov"](e.parent,37).valid);var u=i["\u0275unv"](e,17,0,t(e,18,0,i["\u0275nov"](e.parent,0),"PasswordsDontMatch"));t(e,17,0,u)})}function Xe(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,53,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[["class","m-0"]],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275eld"](6,0,null,null,48,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,8).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,8).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](7,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](8,4210688,[["resetPassForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](10,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](12,null,[" "," "])),i["\u0275ppd"](13,1),(t()(),i["\u0275eld"](14,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](15,0,null,null,10,"input",[["class","form-control placeholder-no-fix"],["name","Password"],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.password=n)&&l),l},null,null)),i["\u0275did"](16,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](17,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](18,16384,null,0,se.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["\u0275did"](19,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](22,671744,[["Password",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](24,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](25,1),(t()(),i["\u0275eld"](26,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Ye)),i["\u0275did"](28,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](29,0,null,null,11,"div",[["class","form-group m-form__group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](30,0,null,null,10,"input",[["class","form-control placeholder-no-fix"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,31)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,31).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,31)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,31)._compositionEnd(n.target.value)&&l),l},null,null)),i["\u0275did"](31,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](32,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](33,16384,null,0,se.a,[[8,"Password"],[8,"false"]],null,null),i["\u0275did"](34,16384,null,0,oe.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,se.a,oe.a]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](37,671744,[["PasswordRepeat",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](39,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](40,1),(t()(),i["\u0275eld"](41,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Je)),i["\u0275did"](43,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](44,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](45,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,46).onClick()&&l),l},null,null)),i["\u0275did"](46,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275eld"](47,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](48,null,[" ",""])),i["\u0275ppd"](49,1),(t()(),i["\u0275eld"](50,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](51,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](52,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),i["\u0275ted"](53,null,[" ",""])),i["\u0275ppd"](54,1)],function(t,e){var n=e.component;t(e,17,0,""),t(e,19,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,22,0,"Password",n.model.password),t(e,28,0,i["\u0275nov"](e,22).errors),t(e,32,0,""),t(e,34,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),t(e,37,0,"PasswordRepeat",n.model.passwordRepeat),t(e,43,0,i["\u0275nov"](e,37).errors),t(e,46,0,"/account/login"),t(e,51,0,n.saving,n.l("SavingWithThreeDot"))},function(t,e){var n=e.component;t(e,1,0,void 0);var l=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"ChangePassword"));t(e,4,0,l),t(e,6,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending);var r=i["\u0275unv"](e,12,0,t(e,13,0,i["\u0275nov"](e,0),"PleaseEnterYourNewPassword"));t(e,12,0,r);var s=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,15,0,t(e,25,0,i["\u0275nov"](e,0),"Password")),"");t(e,15,0,s,i["\u0275nov"](e,17).required?"":null,i["\u0275nov"](e,24).ngClassUntouched,i["\u0275nov"](e,24).ngClassTouched,i["\u0275nov"](e,24).ngClassPristine,i["\u0275nov"](e,24).ngClassDirty,i["\u0275nov"](e,24).ngClassValid,i["\u0275nov"](e,24).ngClassInvalid,i["\u0275nov"](e,24).ngClassPending),t(e,26,0,i["\u0275nov"](e,8).form.valid||i["\u0275nov"](e,8).form.pristine);var o=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,30,0,t(e,40,0,i["\u0275nov"](e,0),"PasswordRepeat")),"");t(e,30,0,o,i["\u0275nov"](e,32).required?"":null,i["\u0275nov"](e,39).ngClassUntouched,i["\u0275nov"](e,39).ngClassTouched,i["\u0275nov"](e,39).ngClassPristine,i["\u0275nov"](e,39).ngClassDirty,i["\u0275nov"](e,39).ngClassValid,i["\u0275nov"](e,39).ngClassInvalid,i["\u0275nov"](e,39).ngClassPending),t(e,41,0,i["\u0275nov"](e,8).form.valid||i["\u0275nov"](e,8).form.pristine),t(e,45,0,n.saving);var a=i["\u0275unv"](e,48,0,t(e,49,0,i["\u0275nov"](e,0),"Back"));t(e,48,0,a),t(e,50,0,!i["\u0275nov"](e,8).form.valid);var u=i["\u0275unv"](e,53,0,t(e,54,0,i["\u0275nov"](e,0),"Submit"));t(e,53,0,u)})}function $e(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Xe,ze)),i["\u0275did"](1,114688,null,0,We,[i.Injector,m.b,D.Router,D.ActivatedRoute,Ft,Ne.a,m.sb],null,null)],function(t,e){t(e,1,0)},null)}var Qe=i["\u0275ccf"]("ng-component",We,$e,{},{},[]),Ze=function(t){function e(e,n,i){var l=t.call(this,e)||this;return l._accountService=n,l._router=i,l.model=new m.Cb,l.saving=!1,l}return Object(g.__extends)(e,t),e.prototype.save=function(){var t=this;this.saving=!0,this._accountService.sendEmailActivationLink(this.model).pipe(Object(v.a)(function(){t.saving=!1})).subscribe(function(){t.message.success(t.l("ActivationMailSentMessage"),t.l("MailSent")).then(function(){t._router.navigate(["account/login"])})})},e}(f.a),tn=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function en(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,37,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,36,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275eld"](6,0,null,null,32,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,8).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,8).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.save()&&l),l},null,null)),i["\u0275did"](7,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](8,4210688,[["emailActivationForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](10,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](12,null,[" "," "])),i["\u0275ppd"](13,1),(t()(),i["\u0275eld"](14,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](15,0,null,null,10,"input",[["autocomplete","new-password"],["class","form-control form-control-solid placeholder-no-fix input-ltr"],["email",""],["maxlength","256"],["name","emailAddress"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["\u0275did"](16,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](17,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](18,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275did"](19,16384,null,0,a.EmailValidator,[],{email:[0,"email"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e,n){return[t,e,n]},[a.RequiredValidator,a.MaxLengthValidator,a.EmailValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](22,671744,[["emailAddressInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](24,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275ppd"](25,1),(t()(),i["\u0275eld"](26,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](27,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275eld"](28,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](29,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,30).onClick()&&l),l},null,null)),i["\u0275did"](30,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),i["\u0275eld"](31,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(t()(),i["\u0275ted"](32,null,[" ",""])),i["\u0275ppd"](33,1),(t()(),i["\u0275eld"](34,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275did"](35,4276224,null,0,u.a,[i.ElementRef,c.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(t()(),i["\u0275eld"](36,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(t()(),i["\u0275ted"](37,null,[" ",""])),i["\u0275ppd"](38,1)],function(t,e){var n=e.component;t(e,17,0,""),t(e,18,0,"256"),t(e,19,0,""),t(e,22,0,"emailAddress",n.model.emailAddress),t(e,27,0,i["\u0275nov"](e,22)),t(e,30,0,"/account/login"),t(e,35,0,n.saving,n.l("SavingWithThreeDot"))},function(t,e){var n=e.component;t(e,1,0,void 0);var l=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"EmailActivation"));t(e,4,0,l),t(e,6,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending);var r=i["\u0275unv"](e,12,0,t(e,13,0,i["\u0275nov"](e,0),"SendEmailActivationLink_Information"));t(e,12,0,r);var s=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,15,0,t(e,25,0,i["\u0275nov"](e,0),"EmailAddress"))," *");t(e,15,0,s,i["\u0275nov"](e,17).required?"":null,i["\u0275nov"](e,18).maxlength?i["\u0275nov"](e,18).maxlength:null,i["\u0275nov"](e,24).ngClassUntouched,i["\u0275nov"](e,24).ngClassTouched,i["\u0275nov"](e,24).ngClassPristine,i["\u0275nov"](e,24).ngClassDirty,i["\u0275nov"](e,24).ngClassValid,i["\u0275nov"](e,24).ngClassInvalid,i["\u0275nov"](e,24).ngClassPending),t(e,29,0,n.saving);var o=i["\u0275unv"](e,32,0,t(e,33,0,i["\u0275nov"](e,0),"Back"));t(e,32,0,o),t(e,34,0,!i["\u0275nov"](e,8).form.valid);var a=i["\u0275unv"](e,37,0,t(e,38,0,i["\u0275nov"](e,0),"Submit"));t(e,37,0,a)})}function nn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,en,tn)),i["\u0275did"](1,49152,null,0,Ze,[i.Injector,m.b,D.Router],null,null)],null,null)}var ln=i["\u0275ccf"]("ng-component",Ze,nn,{},{},[]),rn=function(t){function e(e,n,i,l){var r=t.call(this,e)||this;return r._accountService=n,r._router=i,r._activatedRoute=l,r.model=new m.c,r}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.waitMessage=this.l("PleaseWaitToConfirmYourEmailMessage"),this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new m.xb({c:this.model.c})).subscribe(function(e){t.appSession.changeTenantIfNeeded(e)||t._accountService.activateEmail(t.model).subscribe(function(){t.notify.success(t.l("YourEmailIsConfirmedMessage"),"",{onClose:function(){t._router.navigate(["account/login"])}})})})},e.prototype.parseTenantId=function(t){var e=t?parseInt(t,10):void 0;return NaN===e&&(e=void 0),e},e}(f.a),sn=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function on(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","kt-login__form"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","alert alert-success text-center"],["role","alert"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,1,"div",[["class","alert-text"]],null,null,null,null,null)),(t()(),i["\u0275ted"](3,null,["",""]))],null,function(t,e){t(e,3,0,e.component.waitMessage)})}function an(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,on,sn)),i["\u0275did"](1,114688,null,0,rn,[i.Injector,m.b,D.Router,D.ActivatedRoute],null,null)],function(t,e){t(e,1,0)},null)}var un=i["\u0275ccf"]("ng-component",rn,an,{},{},[]),cn=function(t){function e(e,n,i,l){var r=t.call(this,e)||this;return r.loginService=n,r._tokenAuthService=i,r._router=l,r.submitting=!1,r}return Object(g.__extends)(e,t),e.prototype.canActivate=function(){return!!(this.loginService.authenticateModel&&this.loginService.authenticateResult&&this.loginService.authenticateResult.twoFactorAuthProviders&&this.loginService.authenticateResult.twoFactorAuthProviders.length)},e.prototype.ngOnInit=function(){this.canActivate()?this.selectedTwoFactorProvider=this.loginService.authenticateResult.twoFactorAuthProviders[0]:this._router.navigate(["account/login"])},e.prototype.submit=function(){var t=this,e=new m.Fb;e.userId=this.loginService.authenticateResult.userId,e.provider=this.selectedTwoFactorProvider,this.submitting=!0,this._tokenAuthService.sendTwoFactorAuthCode(e).pipe(Object(v.a)(function(){return t.submitting=!1})).subscribe(function(){t._router.navigate(["account/verify-code"])})},e}(f.a),dn=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function hn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),i["\u0275did"](1,147456,null,0,a.NgSelectOption,[i.ElementRef,i.Renderer2,[2,a.SelectControlValueAccessor]],{value:[0,"value"]},null),i["\u0275did"](2,147456,null,0,a["\u0275angular_packages_forms_forms_y"],[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),(t()(),i["\u0275ted"](3,null,["",""]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.context.$implicit)})}function pn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,21,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,2).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,2).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.submit()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](2,4210688,[["twoFactorForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](4,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](5,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](6,null,["",""])),i["\u0275ppd"](7,1),(t()(),i["\u0275eld"](8,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](9,0,null,null,8,"select",[["autoFocus",""],["class","form-control"],["name","selectedTwoFactorProvider"],["size","1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,r=t.component;return"change"===e&&(l=!1!==i["\u0275nov"](t,10).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,10).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(r.selectedTwoFactorProvider=n)&&l),l},null,null)),i["\u0275did"](10,16384,null,0,a.SelectControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.SelectControlValueAccessor]),i["\u0275did"](12,671744,null,0,a.NgModel,[[2,a.ControlContainer],[8,null],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](14,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](15,4210688,null,0,qt.a,[i.ElementRef],null,null),(t()(),i["\u0275and"](16777216,null,null,1,null,hn)),i["\u0275did"](17,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275eld"](18,0,null,null,3,"div",[["class","kt-form__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),i["\u0275ted"](20,null,["",""])),i["\u0275ppd"](21,1)],function(t,e){var n=e.component;t(e,12,0,"selectedTwoFactorProvider",n.selectedTwoFactorProvider),t(e,17,0,n.loginService.authenticateResult.twoFactorAuthProviders)},function(t,e){t(e,0,0,i["\u0275nov"](e,4).ngClassUntouched,i["\u0275nov"](e,4).ngClassTouched,i["\u0275nov"](e,4).ngClassPristine,i["\u0275nov"](e,4).ngClassDirty,i["\u0275nov"](e,4).ngClassValid,i["\u0275nov"](e,4).ngClassInvalid,i["\u0275nov"](e,4).ngClassPending);var n=i["\u0275unv"](e,6,0,t(e,7,0,i["\u0275nov"](e.parent,0),"SendSecurityCode_Information"));t(e,6,0,n),t(e,9,0,i["\u0275nov"](e,14).ngClassUntouched,i["\u0275nov"](e,14).ngClassTouched,i["\u0275nov"](e,14).ngClassPristine,i["\u0275nov"](e,14).ngClassDirty,i["\u0275nov"](e,14).ngClassValid,i["\u0275nov"](e,14).ngClassInvalid,i["\u0275nov"](e,14).ngClassPending);var l=i["\u0275unv"](e,20,0,t(e,21,0,i["\u0275nov"](e.parent,0),"Submit"));t(e,20,0,l)})}function gn(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,6,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,5,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275and"](16777216,null,null,1,null,pn)),i["\u0275did"](7,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,7,0,e.component.loginService.authenticateResult)},function(t,e){t(e,1,0,void 0);var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"SendSecurityCode"));t(e,4,0,n)})}function fn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,gn,dn)),i["\u0275did"](1,114688,null,0,cn,[i.Injector,Ft,m.hc,D.Router],null,null)],function(t,e){t(e,1,0)},null)}var mn=i["\u0275ccf"]("ng-component",cn,fn,{},{},[]),vn=n("gI3B"),yn=function(t){function e(e,n,i){var l=t.call(this,e)||this;return l.loginService=n,l._router=i,l.submitting=!1,l.remainingSeconds=90,l}return Object(g.__extends)(e,t),e.prototype.canActivate=function(){return!(!this.loginService.authenticateModel||!this.loginService.authenticateResult)},e.prototype.ngOnInit=function(){var t=this;if(this.canActivate()){var e=Object(vn.a)(1e3,1e3);this.timerSubscription=e.subscribe(function(){t.remainingSeconds=t.remainingSeconds-1,0===t.remainingSeconds&&t.message.warn(t.l("TimeoutPleaseTryAgain")).then(function(){t.loginService.authenticateModel.twoFactorVerificationCode=null,t._router.navigate(["account/login"])})})}else this._router.navigate(["account/login"])},e.prototype.ngOnDestroy=function(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)},e.prototype.submit=function(){this.loginService.authenticateModel.twoFactorVerificationCode=this.code,this.loginService.authenticate()},e}(f.a),Sn=i["\u0275crt"]({encapsulation:0,styles:[[".remaining-time-counter[_ngcontent-%COMP%]{color:red}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function bn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,10,"div",[["class","form-group mt-4"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,9,"label",[["class","kt-checkbox"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,5,"input",[["class","form-control"],["name","rememberClient"],["type","checkbox"],["value","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,r=t.component;return"change"===e&&(l=!1!==i["\u0275nov"](t,3).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,3).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(r.loginService.authenticateModel.rememberClient=n)&&l),l},null,null)),i["\u0275did"](3,16384,null,0,a.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.CheckboxControlValueAccessor]),i["\u0275did"](5,671744,null,0,a.NgModel,[[2,a.ControlContainer],[8,null],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](7,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),(t()(),i["\u0275ted"](8,null,[""," "])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,0,"span",[],null,null,null,null,null))],function(t,e){t(e,5,0,"rememberClient",e.component.loginService.authenticateModel.rememberClient)},function(t,e){t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending);var n=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"RememberThisBrowser"));t(e,8,0,n)})}function _n(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"span",[["class","remaining-time-counter"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",": ","."])),i["\u0275ppd"](2,1),i["\u0275ppd"](3,2)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"RemainingTime")),r=i["\u0275unv"](e,1,1,t(e,3,0,i["\u0275nov"](e.parent,0),"SecondShort{0}",n.remainingSeconds));t(e,1,0,l,r)})}function Cn(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,31,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,30,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1),(t()(),i["\u0275eld"](6,0,null,null,26,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,8).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,8).onReset()&&l),"ngSubmit"===e&&(l=!1!==r.submit()&&l),l},null,null)),i["\u0275did"](7,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](8,4210688,[["twoFactorForm",4]],0,a.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](10,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](11,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,10,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control"],["maxlength","16"],["name","code"],["required",""],["type","password"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,r=t.component;return"input"===e&&(l=!1!==i["\u0275nov"](t,13)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,13).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,13)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,13)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(r.code=n)&&l),l},null,null)),i["\u0275did"](13,16384,null,0,a.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275did"](14,16384,null,0,a.RequiredValidator,[],{required:[0,"required"]},null),i["\u0275did"](15,540672,null,0,a.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["\u0275prd"](1024,null,a.NG_VALIDATORS,function(t,e){return[t,e]},[a.RequiredValidator,a.MaxLengthValidator]),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.DefaultValueAccessor]),i["\u0275did"](18,671744,[["passwordInput",4]],0,a.NgModel,[[2,a.ControlContainer],[6,a.NG_VALIDATORS],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](20,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),i["\u0275did"](21,4210688,null,0,qt.a,[i.ElementRef],null,null),i["\u0275ppd"](22,1),(t()(),i["\u0275eld"](23,0,null,null,1,"validation-messages",[],null,null,null,jt.b,jt.a)),i["\u0275did"](24,49152,null,0,Ut.a,[c.a],{formCtrl:[0,"formCtrl"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,bn)),i["\u0275did"](26,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](27,0,null,null,5,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,_n)),i["\u0275did"](29,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](30,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),i["\u0275ted"](31,null,["",""])),i["\u0275ppd"](32,1)],function(t,e){var n=e.component;t(e,14,0,""),t(e,15,0,"16"),t(e,18,0,"code",n.code),t(e,24,0,i["\u0275nov"](e,18)),t(e,26,0,"true"===n.s("Abp.Zero.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled")),t(e,29,0,n.remainingSeconds>=0)},function(t,e){t(e,1,0,void 0);var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e,0),"VerifySecurityCode"));t(e,4,0,n),t(e,6,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending);var l=i["\u0275inlineInterpolate"](1,"",i["\u0275unv"](e,12,0,t(e,22,0,i["\u0275nov"](e,0),"Code"))," *");t(e,12,0,l,i["\u0275nov"](e,14).required?"":null,i["\u0275nov"](e,15).maxlength?i["\u0275nov"](e,15).maxlength:null,i["\u0275nov"](e,20).ngClassUntouched,i["\u0275nov"](e,20).ngClassTouched,i["\u0275nov"](e,20).ngClassPristine,i["\u0275nov"](e,20).ngClassDirty,i["\u0275nov"](e,20).ngClassValid,i["\u0275nov"](e,20).ngClassInvalid,i["\u0275nov"](e,20).ngClassPending),t(e,30,0,!i["\u0275nov"](e,8).form.valid);var r=i["\u0275unv"](e,31,0,t(e,32,0,i["\u0275nov"](e,0),"Submit"));t(e,31,0,r)})}function En(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Cn,Sn)),i["\u0275did"](1,245760,null,0,yn,[i.Injector,Ft,D.Router],null,null)],function(t,e){t(e,1,0)},null)}var wn=i["\u0275ccf"]("ng-component",yn,En,{},{},[]),An=function(){function t(){}return t.prototype.getPaymentGatewayType=function(t){return parseInt(t)===m.Pb.Paypal?"Paypal":"Stripe"},t.prototype.getEditionPaymentType=function(t){return parseInt(t)===m.D.BuyNow?"BuyNow":parseInt(t)===m.D.Extend?"Extend":parseInt(t)===m.D.NewRegistration?"NewRegistration":"Upgrade"},t}(),Tn=function(t){function e(e,n,i,l,r,s){var o=t.call(this,e)||this;return o._activatedRoute=n,o._router=i,o._paymnetHelperService=l,o._paymentAppService=r,o._tenantRegistrationService=s,o.edition=new m.E,o.tenantId=abp.session.tenantId,o.paymentPeriodType=m.pb,o.selectedPaymentPeriodType=m.pb.Monthly,o.subscriptionPaymentGateway=m.Pb,o.supportsRecurringPayments=!1,o.recurringPaymentEnabled=!1,o.editionId=0,o}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this,e=parseInt(this._activatedRoute.snapshot.queryParams.tenantId);abp.multiTenancy.setTenantIdCookie(e),this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.editionId=this._activatedRoute.snapshot.queryParams.editionId,this._tenantRegistrationService.getEdition(this.editionId).subscribe(function(e){t.edition=e}),this._paymentAppService.getActiveGateways(void 0).subscribe(function(e){t.paymentGateways=e,t.supportsRecurringPayments=e.some(function(t){return t.supportsRecurringPayments})})},e.prototype.checkout=function(t){var e=this,n={};n.editionId=this.editionId,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=this.recurringPaymentEnabled,n.subscriptionPaymentGatewayType=t,n.successUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){e._router.navigate(["account/"+e.getPaymentGatewayType(t).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"account/register-tenant-result"}})})},e.prototype.getPaymentGatewayType=function(t){return this._paymnetHelperService.getPaymentGatewayType(t)},e.prototype.onPaymentPeriodChangeChange=function(t){this.selectedPaymentPeriodType=t},e}(f.a),xn=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function In(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Monthly)&&i),i},null,null)),(t()(),i["\u0275ted"](3,null,[" ",": ",""," "])),i["\u0275ppd"](4,1),i["\u0275ppd"](5,2),(t()(),i["\u0275eld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(t,e){var n=e.component;t(e,2,0,n.paymentPeriodType.Monthly);var l=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"MonthlyPrice")),r=n.appSession.application.currencySign,s=i["\u0275unv"](e,3,2,t(e,5,0,i["\u0275nov"](e.parent,1),n.edition.monthlyPrice,"1.2-2"));t(e,3,0,l,r,s)})}function Rn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Annual)&&i),i},null,null)),(t()(),i["\u0275ted"](3,null,[" ",": ",""," "])),i["\u0275ppd"](4,1),i["\u0275ppd"](5,2),(t()(),i["\u0275eld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(t,e){var n=e.component;t(e,2,0,n.paymentPeriodType.Annual);var l=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"AnnualPrice")),r=n.appSession.application.currencySign,s=i["\u0275unv"](e,3,2,t(e,5,0,i["\u0275nov"](e.parent,1),n.edition.annualPrice,"1.2-2"));t(e,3,0,l,r,s)})}function Fn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,9,"label",[["class","kt-checkbox mb-0"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,5,"input",[["class","form-control"],["name","RecurringPaymentEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,r=t.component;return"change"===e&&(l=!1!==i["\u0275nov"](t,3).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,3).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(r.recurringPaymentEnabled=n)&&l),l},null,null)),i["\u0275did"](3,16384,null,0,a.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["\u0275prd"](1024,null,a.NG_VALUE_ACCESSOR,function(t){return[t]},[a.CheckboxControlValueAccessor]),i["\u0275did"](5,671744,null,0,a.NgModel,[[2,a.ControlContainer],[8,null],[8,null],[6,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,a.NgControl,null,[a.NgModel]),i["\u0275did"](7,16384,null,0,a.NgControlStatus,[[4,a.NgControl]],null,null),(t()(),i["\u0275ted"](8,null,[" "," "])),i["\u0275ppd"](9,1),(t()(),i["\u0275eld"](10,0,null,null,0,"span",[],null,null,null,null,null))],function(t,e){t(e,5,0,"RecurringPaymentEnabled",e.component.recurringPaymentEnabled)},function(t,e){t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending);var n=i["\u0275unv"](e,8,0,t(e,9,0,i["\u0275nov"](e.parent,0),"AutomaticallyBillMyAccount"));t(e,8,0,n)})}function Nn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.checkout(t.parent.context.$implicit.gatewayType)&&i),i},null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent.parent,0),"CheckoutWith"+n.getPaymentGatewayType(e.parent.context.$implicit.gatewayType)));t(e,1,0,l)})}function kn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","mb-2"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Nn)),i["\u0275did"](2,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,e.context.$implicit.supportsRecurringPayments||!e.component.recurringPaymentEnabled)},null)}function Pn(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,22,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,3,"div",[["class","kt-login__title mb-4"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,17,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,9).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,9).onReset()&&l),l},null,null)),i["\u0275did"](8,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](9,4210688,null,0,a.NgForm,[[8,null],[8,null]],null,null),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](11,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](12,0,null,null,2,"h4",[["class","text-center mb-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,["",": ",""])),i["\u0275ppd"](14,1),(t()(),i["\u0275and"](16777216,null,null,1,null,In)),i["\u0275did"](16,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Rn)),i["\u0275did"](18,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](19,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Fn)),i["\u0275did"](21,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](22,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,kn)),i["\u0275did"](24,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,16,0,n.edition.monthlyPrice),t(e,18,0,n.edition.annualPrice),t(e,21,0,n.supportsRecurringPayments),t(e,24,0,n.paymentGateways)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e,0),"PaymentInfo"));t(e,5,0,l),t(e,7,0,i["\u0275nov"](e,11).ngClassUntouched,i["\u0275nov"](e,11).ngClassTouched,i["\u0275nov"](e,11).ngClassPristine,i["\u0275nov"](e,11).ngClassDirty,i["\u0275nov"](e,11).ngClassValid,i["\u0275nov"](e,11).ngClassInvalid,i["\u0275nov"](e,11).ngClassPending);var r=i["\u0275unv"](e,13,0,t(e,14,0,i["\u0275nov"](e,0),"Edition"));t(e,13,0,r,n.edition.displayName)})}function On(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Pn,xn)),i["\u0275did"](1,114688,null,0,Tn,[i.Injector,D.ActivatedRoute,D.Router,An,m.qb,m.Xb],null,null)],function(t,e){t(e,1,0)},null)}var Dn=i["\u0275ccf"]("ng-component",Tn,On,{},{},[]),Hn=function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s._router=n,s._paymnetHelperService=i,s._activatedRoute=l,s._paymentAppService=r,s.edition=new m.E,s.tenantId=abp.session.tenantId,s.paymentPeriodType=m.pb,s.subscriptionPaymentGateway=m.Pb,s.selectedPaymentPeriodType=m.pb.Monthly,s.editionPaymentTypeCheck=m.D,s}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this._paymentAppService.getPaymentInfo(void 0).subscribe(function(e){t.edition=e.edition,t.additionalPrice=Number(e.additionalPrice.toFixed(2))}),this._paymentAppService.getActiveGateways(void 0).subscribe(function(e){t.paymentGateways=e})},e.prototype.checkout=function(t){var e=this,n={};n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=!1,n.subscriptionPaymentGatewayType=t,n.successUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){e._router.navigate(["account/"+e.getPaymentGatewayType(t).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"app/admin/subscription-management"}})})},e.prototype.getPaymentGatewayType=function(t){return this._paymnetHelperService.getPaymentGatewayType(t)},e.prototype.onPaymentPeriodChangeChange=function(t){this.selectedPaymentPeriodType=t},e.prototype.isUpgrade=function(){return this.additionalPrice>0},e}(f.a),Ln=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Bn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.checkout(t.context.$implicit.gatewayType)&&i),i},null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"CheckoutWith"+n.getPaymentGatewayType(e.context.$implicit.gatewayType)));t(e,1,0,l)})}function Vn(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,30,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,29,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,24,"form",[["class","kt-form mt-2"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,10).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,10).onReset()&&l),l},null,null)),i["\u0275did"](9,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](10,4210688,null,0,a.NgForm,[[8,null],[8,null]],null,null),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](12,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](13,0,null,null,2,"h4",[["class","text-center mb-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](14,null,[" "," "])),i["\u0275ppd"](15,2),(t()(),i["\u0275eld"](16,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](17,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(t()(),i["\u0275eld"](18,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Monthly)&&i),i},null,null)),(t()(),i["\u0275ted"](19,null,["",": ",""," "])),i["\u0275ppd"](20,1),i["\u0275ppd"](21,2),(t()(),i["\u0275eld"](22,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](23,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](24,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(t()(),i["\u0275eld"](25,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Annual)&&i),i},null,null)),(t()(),i["\u0275ted"](26,null,["",": ",""," "])),i["\u0275ppd"](27,1),i["\u0275ppd"](28,2),(t()(),i["\u0275eld"](29,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["\u0275eld"](30,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Bn)),i["\u0275did"](32,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,32,0,e.component.paymentGateways)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e,0),"PaymentInfo"));t(e,5,0,l),t(e,8,0,i["\u0275nov"](e,12).ngClassUntouched,i["\u0275nov"](e,12).ngClassTouched,i["\u0275nov"](e,12).ngClassPristine,i["\u0275nov"](e,12).ngClassDirty,i["\u0275nov"](e,12).ngClassValid,i["\u0275nov"](e,12).ngClassInvalid,i["\u0275nov"](e,12).ngClassPending);var r=i["\u0275unv"](e,14,0,t(e,15,0,i["\u0275nov"](e,0),"Extend_Edition_Description",n.edition.displayName));t(e,14,0,r),t(e,18,0,n.paymentPeriodType.Monthly);var s=i["\u0275unv"](e,19,0,t(e,20,0,i["\u0275nov"](e,0),"MonthlyPrice")),o=n.appSession.application.currencySign,a=i["\u0275unv"](e,19,2,t(e,21,0,i["\u0275nov"](e,1),n.edition.monthlyPrice,"1.2-2"));t(e,19,0,s,o,a),t(e,25,0,n.paymentPeriodType.Annual);var u=i["\u0275unv"](e,26,0,t(e,27,0,i["\u0275nov"](e,0),"AnnualPrice")),c=n.appSession.application.currencySign,d=i["\u0275unv"](e,26,2,t(e,28,0,i["\u0275nov"](e,1),n.edition.annualPrice,"1.2-2"));t(e,26,0,u,c,d)})}function jn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Vn,Ln)),i["\u0275did"](1,114688,null,0,Hn,[i.Injector,D.Router,An,D.ActivatedRoute,m.qb],null,null)],function(t,e){t(e,1,0)},null)}var Un=i["\u0275ccf"]("ng-component",Hn,jn,{},{},[]),qn=function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s._router=n,s._paymnetHelperService=i,s._activatedRoute=l,s._paymentAppService=r,s.subscriptionPaymentType=m.Qb,s.subscriptionStartType=m.Sb,s.edition=new m.E,s.tenantId=abp.session.tenantId,s.subscriptionPaymentGateway=m.Pb,s.editionPaymentTypeCheck=m.D,s}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this.upgradeEditionId=this._activatedRoute.snapshot.queryParams.upgradeEditionId,this.appSession.tenant.edition.isFree&&this._router.navigate(["account/buy"],{queryParams:{tenantId:this.appSession.tenant.id,editionPaymentType:this.editionPaymentType,editionId:this.upgradeEditionId,subscriptionStartType:this.subscriptionStartType.Paid}}),this._paymentAppService.getPaymentInfo(this.upgradeEditionId).subscribe(function(e){t.edition=e.edition,t.additionalPrice=Number(e.additionalPrice.toFixed(2))}),this._paymentAppService.getLastCompletedPayment().subscribe(function(e){var n=new m.ob;n.gatewayType=e.gateway,n.supportsRecurringPayments=!0,t.paymentGateways=[n],t.paymentPeriodType=e.paymentPeriodType,t.appSession.tenant.subscriptionPaymentType===t.subscriptionPaymentType.Manual&&t._paymentAppService.getActiveGateways(void 0).subscribe(function(e){t.paymentGateways=e})})},e.prototype.checkout=function(t){var e=this,n=new m.A;n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.paymentPeriodType,n.recurringPaymentEnabled=this.hasRecurringSubscription(),n.subscriptionPaymentGatewayType=t,n.successUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=H.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){e._router.navigate(["account/"+e.getPaymentGatewayType(t).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,isUpgrade:!0,redirectUrl:"app/admin/subscription-management"}})})},e.prototype.getPaymentGatewayType=function(t){return this._paymnetHelperService.getPaymentGatewayType(t)},e.prototype.hasRecurringSubscription=function(){return this.appSession.tenant.subscriptionPaymentType!==this.subscriptionPaymentType.Manual},e}(f.a),Mn=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Kn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,3,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,2,"label",[["class","col-sm-12"]],null,null,null,null,null)),(t()(),i["\u0275ted"](3,null,[" "," "])),i["\u0275ppd"](4,1)],null,function(t,e){var n=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"RecurringSubscriptionUpgradeNote"));t(e,3,0,n)})}function Gn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,2,"label",[["class","col-sm-8"]],null,null,null,null,null)),(t()(),i["\u0275ted"](3,null,[" "," "])),i["\u0275ppd"](4,1),(t()(),i["\u0275eld"](5,0,null,null,3,"div",[["class","col-sm-4 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(t()(),i["\u0275ted"](7,null,[" ",""," "])),i["\u0275ppd"](8,2)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,3,0,t(e,4,0,i["\u0275nov"](e.parent,0),"Total"));t(e,3,0,l);var r=n.appSession.application.currencySign,s=i["\u0275unv"](e,7,1,t(e,8,0,i["\u0275nov"](e.parent,1),n.additionalPrice,"1.2-2"));t(e,7,0,r,s)})}function Wn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.checkout(t.context.$implicit.gatewayType)&&i),i},null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=e.component,l=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent,0),"CheckoutWith"+n.getPaymentGatewayType(e.context.$implicit.gatewayType)));t(e,1,0,l)})}function zn(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,20,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),i["\u0275ppd"](6,1),(t()(),i["\u0275eld"](7,0,null,null,15,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,9).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,9).onReset()&&l),l},null,null)),i["\u0275did"](8,16384,null,0,a["\u0275angular_packages_forms_forms_z"],[],null,null),i["\u0275did"](9,4210688,null,0,a.NgForm,[[8,null],[8,null]],null,null),i["\u0275prd"](2048,null,a.ControlContainer,null,[a.NgForm]),i["\u0275did"](11,16384,null,0,a.NgControlStatusGroup,[[4,a.ControlContainer]],null,null),(t()(),i["\u0275eld"](12,0,null,null,2,"h4",[["class","text-center mb-2"]],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,[" "," "])),i["\u0275ppd"](14,2),(t()(),i["\u0275eld"](15,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Kn)),i["\u0275did"](17,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Gn)),i["\u0275did"](19,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](20,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Wn)),i["\u0275did"](22,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,17,0,n.hasRecurringSubscription()),t(e,19,0,!n.hasRecurringSubscription()),t(e,22,0,n.paymentGateways)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,5,0,t(e,6,0,i["\u0275nov"](e,0),"PaymentInfo"));t(e,5,0,l),t(e,7,0,i["\u0275nov"](e,11).ngClassUntouched,i["\u0275nov"](e,11).ngClassTouched,i["\u0275nov"](e,11).ngClassPristine,i["\u0275nov"](e,11).ngClassDirty,i["\u0275nov"](e,11).ngClassValid,i["\u0275nov"](e,11).ngClassInvalid,i["\u0275nov"](e,11).ngClassPending);var r=i["\u0275unv"](e,13,0,t(e,14,0,i["\u0275nov"](e,0),"Upgrade_Edition_Description",n.edition.displayName));t(e,13,0,r)})}function Yn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,zn,Mn)),i["\u0275did"](1,114688,null,0,qn,[i.Injector,D.Router,An,D.ActivatedRoute,m.qb],null,null)],function(t,e){t(e,1,0)},null)}var Jn=i["\u0275ccf"]("ng-component",qn,Yn,{},{},[]),Xn=function(t){function e(e,n,i,l){var r=t.call(this,e)||this;return r._tenantRegistrationService=n,r._subscriptionService=i,r._router=l,r.editionsSelectOutput=new m.G,r.isUserLoggedIn=!1,r.isSetted=!1,r.editionPaymentType=m.D,r.subscriptionStartType=m.Sb,r.editionIcons=["flaticon-open-box","flaticon-rocket","flaticon-gift","flaticon-confetti","flaticon-cogwheel-2","flaticon-app","flaticon-coins","flaticon-piggy-bank","flaticon-bag","flaticon-lifebuoy","flaticon-technology-1","flaticon-cogwheel-1","flaticon-infinity","flaticon-interface-5","flaticon-squares-3","flaticon-interface-6","flaticon-mark","flaticon-business","flaticon-interface-7","flaticon-list-2","flaticon-bell","flaticon-technology","flaticon-squares-2","flaticon-notes","flaticon-profile","flaticon-layers","flaticon-interface-4","flaticon-signs","flaticon-menu-1","flaticon-symbol"],r}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.isUserLoggedIn=abp.session.userId>0,this._tenantRegistrationService.getEditionsForSelect().subscribe(function(e){t.editionsSelectOutput=e,(!t.editionsSelectOutput.editionsWithFeatures||t.editionsSelectOutput.editionsWithFeatures.length<=0)&&t._router.navigate(["/account/register-tenant"])})},e.prototype.isFree=function(t){return!t.monthlyPrice&&!t.annualPrice},e.prototype.isTrueFalseFeature=function(t){return"CHECKBOX"===t.inputType.name},e.prototype.featureEnabledForEdition=function(t,e){var n=R.filter(e.featureValues,{name:t.name});return!(!n||n.length<=0)&&"true"===n[0].value.toLowerCase()},e.prototype.getFeatureValueForEdition=function(t,e){var n=R.filter(e.featureValues,{name:t.name});return!n||n.length<=0?"":n[0].value},e.prototype.canUpgrade=function(t){return this.appSession.tenant.edition.id!==t.id&&this.isUserLoggedIn&&this.appSession.tenant.edition&&(this.appSession.tenant.edition.monthlyPrice?this.appSession.tenant.edition.monthlyPrice:0)<=(t&&t.monthlyPrice?t.monthlyPrice:0)},e.prototype.upgrade=function(t,e){var n=this;e===m.D.Upgrade&&this.upgradeIsFree(t)?this._subscriptionService.upgradeTenantToEquivalentEdition(t.id).subscribe(function(){n._router.navigate(["app/admin/subscription-management"])}):this._router.navigate(["/account/upgrade"],{queryParams:{upgradeEditionId:t.id,editionPaymentType:e}})},e.prototype.upgradeIsFree=function(t){return!(!this.appSession.tenant||!this.appSession.tenant.edition)&&(this.appSession.tenant.edition.isFree&&t.isFree||!t.isFree&&t.monthlyPrice===this.appSession.tenant.edition.monthlyPrice&&t.annualPrice===this.appSession.tenant.edition.annualPrice)},e}(f.a),$n=i["\u0275crt"]({encapsulation:2,styles:[['body{background-color:#f2f3f8}button:disabled,button[disabled]{cursor:not-allowed!important}.kt-pricing-1{overflow:hidden}.kt-pricing-1.kt-pricing-1--fixed{width:75%;margin:0 auto}.kt-pricing-1 .kt-pricing-1__items{background-color:#fff;position:relative;z-index:1;text-align:center;padding:2.14rem 0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{border-right:.07rem solid #ebedf2;padding:0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual{margin-top:10rem;position:relative;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:before{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:-3.93rem;width:17.14rem;height:0;border-left:4.2rem solid transparent;border-right:4.2rem solid transparent;border-bottom:7.5rem solid #fcfcfe}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:after{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:3.5rem;width:17.14rem;height:0;border-left:4.2rem solid transparent;border-right:4.2rem solid transparent;border-top:7.5rem solid #fcfcfe}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2{left:50%;margin-top:-1.43rem;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:before{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:-.42rem;width:8.7rem;height:0;border-left:2.14rem solid transparent;border-right:2.14rem solid transparent;border-bottom:3.71rem solid #f8f7fd}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:after{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:3.3rem;width:8.7rem;height:0;border-left:2.14rem solid transparent;border-right:2.14rem solid transparent;border-top:3.71rem solid #f8f7fd}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon{left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon>i{font-size:8.57rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price{font-size:2rem;font-weight:700;display:block;margin-top:20rem;color:#6c7293}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price .kt-pricing-1__label{margin-top:.64rem;margin-left:.357rem;position:absolute;font-size:1.64rem;font-weight:500;color:#a7abc3}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__subtitle{font-size:1.1rem;color:#adb1c7;font-weight:500}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description{margin:1.785rem auto;font-size:1rem;padding:0 .5rem;color:#a7abc3;font-weight:400}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description>span{display:block;text-align:center}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin:2.14rem 0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn>.btn{padding:.86rem 3.57rem}@media (min-width:1025px) and (max-width:1399px){.kt-pricing-1.kt-pricing-1--fixed{width:100%}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item{border-right:1px solid #ebedf2}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}}@media (max-width:1024px){.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{border-bottom:1px solid #ebedf2;border-right:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-bottom:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin-bottom:3.57rem}}.row-centered{text-align:center;display:block!important}.col-centered{display:inline-table;float:none;text-align:center;margin-right:-4px}']],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Qn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"h2",[["class","kt-pricing-1__subtitle"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent.parent,0),"Free"));t(e,1,0,n)})}function Zn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,8,"h2",[["class","kt-pricing-1__subtitle"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(t()(),i["\u0275ted"](2,null,["",""])),(t()(),i["\u0275ted"](3,null,[""," "," / "])),i["\u0275ppd"](4,1),(t()(),i["\u0275eld"](5,0,null,null,1,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(t()(),i["\u0275ted"](6,null,["",""])),(t()(),i["\u0275ted"](7,null,[""," "," "])),i["\u0275ppd"](8,1)],null,function(t,e){var n=e.component;t(e,2,0,n.appSession.application.currencySign);var l=e.parent.context.$implicit.edition.monthlyPrice,r=i["\u0275unv"](e,3,1,t(e,4,0,i["\u0275nov"](e.parent.parent,0),"PerMonth"));t(e,3,0,l,r),t(e,6,0,n.appSession.application.currencySign);var s=e.parent.context.$implicit.edition.annualPrice,o=i["\u0275unv"](e,7,1,t(e,8,0,i["\u0275nov"](e.parent.parent,0),"PerYear"));t(e,7,0,s,o)})}function ti(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"i",[["class","la la-check kt-font-success"]],null,null,null,null,null))],null,null)}function ei(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"i",[["class","la la-times kt-font-dark"]],null,null,null,null,null))],null,null)}function ni(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,ti)),i["\u0275did"](2,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ei)),i["\u0275did"](4,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,n.featureEnabledForEdition(e.parent.context.$implicit,e.parent.parent.context.$implicit)),t(e,4,0,!n.featureEnabledForEdition(e.parent.context.$implicit,e.parent.parent.context.$implicit))},null)}function ii(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.displayName)})}function li(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,0,"i",[["class","la la-check kt-font-success"]],null,null,null,null,null))],null,null)}function ri(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",":",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.displayName,e.component.getFeatureValueForEdition(e.parent.context.$implicit,e.parent.parent.context.$implicit))})}function si(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,9,null,null,null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,ni)),i["\u0275did"](2,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ii)),i["\u0275did"](4,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,li)),i["\u0275did"](6,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ri)),i["\u0275did"](8,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](9,0,null,null,0,"br",[],null,null,null,null,null))],function(t,e){var n=e.component;t(e,2,0,n.isTrueFalseFeature(e.context.$implicit)),t(e,4,0,n.isTrueFalseFeature(e.context.$implicit)),t(e,6,0,!n.isTrueFalseFeature(e.context.$implicit)),t(e,8,0,!n.isTrueFalseFeature(e.context.$implicit))},null)}function oi(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==l.upgrade(t.parent.context.$implicit.edition,l.editionPaymentType.Upgrade)&&i),i},null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),i["\u0275ppd"](2,1)],null,function(t,e){t(e,0,0,!e.component.canUpgrade(e.parent.context.$implicit.edition));var n=i["\u0275unv"](e,1,0,t(e,2,0,i["\u0275nov"](e.parent.parent,0),"Upgrade"));t(e,1,0,n)})}function ai(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"button",[["class","btn btn-success btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,1).onClick()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["\u0275pod"](2,{editionId:0,subscriptionStartType:1}),i["\u0275pad"](3,1),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1)],function(t,e){var n=t(e,2,0,e.parent.context.$implicit.edition.id,e.component.subscriptionStartType.Free),i=t(e,3,0,"/account/register-tenant");t(e,1,0,n,i)},function(t,e){var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e.parent.parent,0),"Start"));t(e,4,0,n)})}function ui(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"button",[["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,1).onClick()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["\u0275pod"](2,{editionId:0,subscriptionStartType:1}),i["\u0275pad"](3,1),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1)],function(t,e){var n=t(e,2,0,e.parent.context.$implicit.edition.id,e.component.subscriptionStartType.Trial),i=t(e,3,0,"/account/register-tenant");t(e,1,0,n,i)},function(t,e){var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e.parent.parent,0),"FreeTrial"));t(e,4,0,n)})}function ci(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"button",[["class","btn btn-primary btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,1).onClick()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,D.RouterLink,[D.Router,D.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["\u0275pod"](2,{editionId:0,subscriptionStartType:1,editionPaymentType:2}),i["\u0275pad"](3,1),(t()(),i["\u0275ted"](4,null,[" "," "])),i["\u0275ppd"](5,1)],function(t,e){var n=e.component,i=t(e,2,0,e.parent.context.$implicit.edition.id,n.subscriptionStartType.Paid,n.editionPaymentType.NewRegistration),l=t(e,3,0,"/account/register-tenant");t(e,1,0,i,l)},function(t,e){var n=i["\u0275unv"](e,4,0,t(e,5,0,i["\u0275nov"](e.parent.parent,0),"BuyNow"));t(e,4,0,n)})}function di(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,23,"div",[["class","kt-pricing-1__item col-lg-3 col-centered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,4,"div",[["class","kt-pricing-1__visual"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"div",[["class","kt-pricing-1__hexagon1"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,0,"div",[["class","kt-pricing-1__hexagon2"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,1,"span",[["class","kt-pricing-1__icon kt-font-brand"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,1,"span",[["class","kt-pricing-1__price"]],null,null,null,null,null)),(t()(),i["\u0275ted"](7,null,[" "," "])),(t()(),i["\u0275and"](16777216,null,null,1,null,Qn)),i["\u0275did"](9,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Zn)),i["\u0275did"](11,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](12,0,null,null,2,"span",[["class","kt-pricing-1__description"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,si)),i["\u0275did"](14,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275eld"](15,0,null,null,8,"div",[["class","kt-pricing-1__btn"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,oi)),i["\u0275did"](17,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ai)),i["\u0275did"](19,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ui)),i["\u0275did"](21,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,ci)),i["\u0275did"](23,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,9,0,n.isFree(e.context.$implicit.edition)),t(e,11,0,!n.isFree(e.context.$implicit.edition)),t(e,14,0,n.editionsSelectOutput.allFeatures),t(e,17,0,n.isUserLoggedIn),t(e,19,0,!n.isUserLoggedIn&&n.isFree(e.context.$implicit.edition)),t(e,21,0,!n.isUserLoggedIn&&!n.isFree(e.context.$implicit.edition)&&e.context.$implicit.edition.trialDayCount),t(e,23,0,!n.isUserLoggedIn&&!n.isFree(e.context.$implicit.edition))},function(t,e){t(e,5,0,i["\u0275inlineInterpolate"](1,"fa ",e.component.editionIcons[e.context.index],"")),t(e,7,0,e.context.$implicit.edition.displayName)})}function hi(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,7,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,6,"div",[["class","kt-content  kt-grid__item kt-grid__item--fluid"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,5,"div",[["class","kt-portlet"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,4,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,3,"div",[["class","kt-pricing-1 kt-pricing-1--fixed"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,2,"div",[["class","kt-pricing-1__items row row-centered"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,di)),i["\u0275did"](8,278528,null,0,o.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,8,0,e.component.editionsSelectOutput.editionsWithFeatures)},function(t,e){t(e,1,0,void 0)})}function pi(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,hi,$n)),i["\u0275did"](1,114688,null,0,Xn,[i.Injector,m.Xb,m.Rb,D.Router],null,null)],function(t,e){t(e,1,0)},null)}var gi=i["\u0275ccf"]("ng-component",Xn,pi,{},{},[]),fi=n("PEYQ"),mi=n("IQ2n"),vi=function(t){function e(e,n,i,l,r,s){var o=t.call(this,e)||this;return o.injector=e,o._activatedRoute=n,o._payPalPaymentAppService=i,o._paymentAppService=l,o._router=r,o._tenantRegistrationHelper=s,o.selectedPaymentPeriodType=m.pb.Monthly,o.paypalIsLoading=!0,o.subscriptionPaymentGateway=m.Pb,o.totalAmount=0,o.description="",o}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,(new K.a).load("https://www.paypalobjects.com/api/checkout.js").then(function(){t._paymentAppService.getPayment(t.paymentId).subscribe(function(e){t.description=e.description,t.totalAmount=e.amount,t.successCallbackUrl=e.successUrl,t.errorCallbackUrl=e.errorUrl,t.subscriptionPaymentGateway=e.gateway,t._payPalPaymentAppService.getConfiguration().subscribe(function(e){t.config=e,t.paypalIsLoading=!1,t.preparePaypalButton()})})})},e.prototype.preparePaypalButton=function(){var t=this;window.paypal.Button.render({style:{size:"responsive"},env:t.config.environment,client:{sandbox:t.config.clientId,production:""},commit:!0,payment:function(e,n){return n.payment.create({transactions:[{amount:{total:t.totalAmount,currency:t.appSession.application.currency}}]})},onAuthorize:function(e){var n=this;t._payPalPaymentAppService.confirmPayment(t.paymentId,e.paymentID,e.payerID).subscribe(function(){mi.a.ajax("post",t.successCallbackUrl+(t.successCallbackUrl.includes("?")?"&":"?")+"paymentId="+t.paymentId,null,null,function(e){n._tenantRegistrationHelper.registrationResult.isActive=!0,t._router.navigate([t.redirectUrl])})})},onCancel:function(e){var n=new m.j;n.gateway=t.subscriptionPaymentGateway.Paypal,n.paymentId=e.paymentID,t._payPalPaymentAppService.cancelPayment(n).toPromise()}},"#paypal-button")},e}(f.a),yi=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Si(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,19,"div",[["class","alert alert-secondary fade show"],["role","alert"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","alert-icon"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"i",[["class","flaticon-questions-circular-button"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,12,"div",[["class","alert-text"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,[" "," "])),(t()(),i["\u0275eld"](6,0,null,null,9,"p",[],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",": "])),(t()(),i["\u0275eld"](9,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i["\u0275ted"](10,null,["",""])),(t()(),i["\u0275eld"](11,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,["",": "])),(t()(),i["\u0275eld"](14,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i["\u0275ted"](15,null,["",""])),(t()(),i["\u0275eld"](16,0,null,null,3,"div",[["class","alert-close"]],null,null,null,null,null)),(t()(),i["\u0275eld"](17,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","alert"],["type","button"]],null,null,null,null,null)),(t()(),i["\u0275eld"](18,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,0,"i",[["class","la la-close"]],null,null,null,null,null))],null,function(t,e){var n=e.component;t(e,5,0,n.l("DemoPayPalAccount")),t(e,8,0,n.l("UserName")),t(e,10,0,n.config.demoUsername),t(e,13,0,n.l("Password")),t(e,15,0,n.config.demoPassword)})}function bi(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),i["\u0275did"](1,16384,null,0,fi.a,[i.ElementRef],{busyIf:[0,"busyIf"]},null)],function(t,e){t(e,1,0,e.component.paypalIsLoading)},null)}function _i(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(t()(),i["\u0275ted"](9,null,[" "," "])),i["\u0275ppd"](10,1),(t()(),i["\u0275eld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),(t()(),i["\u0275eld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(t()(),i["\u0275ted"](17,null,[" "," "])),(t()(),i["\u0275eld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](20,null,["",""])),(t()(),i["\u0275eld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(t()(),i["\u0275ted"](23,null,[" ",""," "])),i["\u0275ppd"](24,2),(t()(),i["\u0275and"](16777216,null,null,1,null,Si)),i["\u0275did"](26,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](27,0,null,null,0,"div",[["id","paypal-button"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,bi)),i["\u0275did"](29,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,26,0,n.config&&n.config.demoUsername&&n.config.demoPassword),t(e,29,0,n.paypalIsLoading)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,9,0,t(e,10,0,i["\u0275nov"](e,0),"TenantSignUp"));t(e,9,0,l),t(e,14,0,n.l("Item")),t(e,17,0,n.description),t(e,20,0,n.l("Price"));var r=n.appSession.application.currencySign,s=i["\u0275unv"](e,23,1,t(e,24,0,i["\u0275nov"](e,1),n.totalAmount,"1.2-2"));t(e,23,0,r,s)})}function Ci(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"paypal-purchase-component",[],null,null,null,_i,yi)),i["\u0275did"](1,114688,null,0,vi,[i.Injector,D.ActivatedRoute,m.nb,m.qb,D.Router,Se],null,null)],function(t,e){t(e,1,0)},null)}var Ei=i["\u0275ccf"]("paypal-purchase-component",vi,Ci,{selectedPaymentPeriodType:"selectedPaymentPeriodType",editionPaymentType:"editionPaymentType"},{},[]),wi=function(t){function e(e,n,i,l,r,s){var o=t.call(this,e)||this;return o._activatedRoute=n,o._stripePaymentAppService=i,o._paymentAppService=l,o._router=r,o._tenantRegistrationHelper=s,o.selectedPaymentPeriodType=m.pb.Monthly,o.amount=0,o.description="",o.stripeIsLoading=!0,o.subscriptionPaymentGateway=m.Pb,o.subscriptionStartType=m.Sb,o.redirectUrl="",o}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl;var e=this._activatedRoute.snapshot.queryParams.isUpgrade;(new K.a).load("https://checkout.stripe.com/checkout.js").then(function(){t._paymentAppService.getPayment(t.paymentId).subscribe(function(n){t.amount=n.amount,t.description=n.description,t.successCallbackUrl=n.successUrl,t.errorCallbackUrl=n.errorUrl,n.isRecurring?t._router.navigate([e?"account/stripe-update-subscription":"account/stripe-subscribe"],{queryParams:{paymentId:t.paymentId,redirectUrl:t.redirectUrl}}):t._stripePaymentAppService.getConfiguration().subscribe(function(e){t.prepareStripeButton(e.publishableKey),t.stripeIsLoading=!1})})})},e.prototype.prepareStripeButton=function(t){var e=this,n=StripeCheckout.configure({key:t,locale:"auto",currency:this.appSession.application.currency,token:function(t){abp.ui.setBusy();var n=new m.Kb;n.paymentId=e.paymentId,n.stripeToken=t.id,e._stripePaymentAppService.confirmPayment(n).subscribe(function(){mi.a.ajax("POST",e.successCallbackUrl+(e.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+e.paymentId,null,null,function(t){e._tenantRegistrationHelper.registrationResult&&(e._tenantRegistrationHelper.registrationResult.isActive=!0),abp.ui.clearBusy(),e._router.navigate([e.redirectUrl])})})}});document.getElementById("stripe-checkout").addEventListener("click",function(t){n.open({name:"AspNetZeroDemo",description:e.description,amount:100*e.amount}),t.preventDefault()}),window.addEventListener("popstate",function(){n.close()})},e}(f.a),Ai=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Ti(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),i["\u0275did"](1,16384,null,0,fi.a,[i.ElementRef],{busyIf:[0,"busyIf"]},null)],function(t,e){t(e,1,0,e.component.stripeIsLoading)},null)}function xi(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(t()(),i["\u0275ted"](9,null,[" "," "])),i["\u0275ppd"](10,1),(t()(),i["\u0275eld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,1,"label",[["class","col-sm-4 "]],null,null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),(t()(),i["\u0275eld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(t()(),i["\u0275ted"](17,null,[" "," "])),(t()(),i["\u0275eld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,1,"label",[["class","col-sm-4 "]],null,null,null,null,null)),(t()(),i["\u0275ted"](20,null,["",""])),(t()(),i["\u0275eld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(t()(),i["\u0275ted"](23,null,[" ",""," "])),i["\u0275ppd"](24,2),(t()(),i["\u0275eld"](25,0,null,null,2,"button",[["class","btn btn-primary btn-block"],["id","stripe-checkout"]],null,null,null,null,null)),(t()(),i["\u0275ted"](26,null,["",""])),i["\u0275ppd"](27,1),(t()(),i["\u0275and"](16777216,null,null,1,null,Ti)),i["\u0275did"](29,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,29,0,e.component.stripeIsLoading)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,9,0,t(e,10,0,i["\u0275nov"](e,0),"TenantSignUp"));t(e,9,0,l),t(e,14,0,n.l("Item")),t(e,17,0,n.description),t(e,20,0,n.l("Price"));var r=n.appSession.application.currencySign,s=i["\u0275unv"](e,23,1,t(e,24,0,i["\u0275nov"](e,1),n.amount,"1.2-2"));t(e,23,0,r,s);var o=i["\u0275unv"](e,26,0,t(e,27,0,i["\u0275nov"](e,0),"Purchase"));t(e,26,0,o)})}function Ii(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"stripe-purchase-component",[],null,null,null,xi,Ai)),i["\u0275did"](1,114688,null,0,wi,[i.Injector,D.ActivatedRoute,m.Mb,m.qb,D.Router,Se],null,null)],function(t,e){t(e,1,0)},null)}var Ri=i["\u0275ccf"]("stripe-purchase-component",wi,Ii,{selectedPaymentPeriodType:"selectedPaymentPeriodType",editionPaymentType:"editionPaymentType"},{},[]),Fi=function(t){function e(e,n,i,l,r,s){var o=t.call(this,e)||this;return o._activatedRoute=n,o._stripePaymentAppService=i,o._paymentAppService=l,o._router=r,o._tenantRegistrationHelper=s,o.selectedPaymentPeriodType=m.pb.Monthly,o.amount=0,o.description="",o.stripeIsLoading=!0,o.subscriptionPaymentGateway=m.Pb,o.subscriptionStartType=m.Sb,o.redirectUrl="",o}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,(new K.a).load("https://checkout.stripe.com/checkout.js").then(function(){t._paymentAppService.getPayment(t.paymentId).subscribe(function(e){t.amount=e.amount,t.description=e.description,t.successCallbackUrl=e.successUrl,t.errorCallbackUrl=e.errorUrl,t._stripePaymentAppService.getConfiguration().subscribe(function(e){t.prepareStripeButton(e.publishableKey),t.stripeIsLoading=!1})})})},e.prototype.prepareStripeButton=function(t){var e=this,n=StripeCheckout.configure({key:t,locale:"auto",currency:this.appSession.application.currency,token:function(t){abp.ui.setBusy();var n=new m.Lb;n.paymentId=e.paymentId,n.stripeToken=t.id,e._stripePaymentAppService.createSubscription(n).subscribe(function(){mi.a.ajax("POST",e.successCallbackUrl+(e.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+e.paymentId,null,null,function(t){e._tenantRegistrationHelper.registrationResult.isActive=!0,abp.ui.clearBusy(),e._router.navigate([e.redirectUrl])})})}});document.getElementById("stripe-checkout").addEventListener("click",function(t){n.open({name:"AspNetZeroDemo",description:e.description,amount:100*e.amount}),t.preventDefault()}),window.addEventListener("popstate",function(){n.close()})},e}(f.a),Ni=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function ki(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),i["\u0275did"](1,16384,null,0,fi.a,[i.ElementRef],{busyIf:[0,"busyIf"]},null)],function(t,e){t(e,1,0,e.component.stripeIsLoading)},null)}function Pi(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),i["\u0275pid"](0,o.DecimalPipe,[i.LOCALE_ID]),(t()(),i["\u0275eld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(t()(),i["\u0275ted"](9,null,[" "," "])),i["\u0275ppd"](10,1),(t()(),i["\u0275eld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](14,null,["",""])),(t()(),i["\u0275eld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(t()(),i["\u0275ted"](17,null,[" "," "])),(t()(),i["\u0275eld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](19,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](20,null,["",""])),(t()(),i["\u0275eld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(t()(),i["\u0275ted"](23,null,[" ",""," "])),i["\u0275ppd"](24,2),(t()(),i["\u0275eld"](25,0,null,null,2,"button",[["class","btn btn-primary btn-block"],["id","stripe-checkout"]],null,null,null,null,null)),(t()(),i["\u0275ted"](26,null,["",""])),i["\u0275ppd"](27,1),(t()(),i["\u0275and"](16777216,null,null,1,null,ki)),i["\u0275did"](29,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,29,0,e.component.stripeIsLoading)},function(t,e){var n=e.component;t(e,2,0,void 0);var l=i["\u0275unv"](e,9,0,t(e,10,0,i["\u0275nov"](e,0),"TenantSignUp"));t(e,9,0,l),t(e,14,0,n.l("Item")),t(e,17,0,n.description),t(e,20,0,n.l("amount"));var r=n.appSession.application.currencySign,s=i["\u0275unv"](e,23,1,t(e,24,0,i["\u0275nov"](e,1),n.amount,"1.2-2"));t(e,23,0,r,s);var o=i["\u0275unv"](e,26,0,t(e,27,0,i["\u0275nov"](e,0),"Purchase"));t(e,26,0,o)})}function Oi(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"stripe-subscribe-component",[],null,null,null,Pi,Ni)),i["\u0275did"](1,114688,null,0,Fi,[i.Injector,D.ActivatedRoute,m.Mb,m.qb,D.Router,Se],null,null)],function(t,e){t(e,1,0)},null)}var Di=i["\u0275ccf"]("stripe-subscribe-component",Fi,Oi,{selectedPaymentPeriodType:"selectedPaymentPeriodType",editionPaymentType:"editionPaymentType"},{},[]),Hi=function(t){function e(e,n,i,l,r){var s=t.call(this,e)||this;return s._activatedRoute=n,s._stripePaymentAppService=i,s._paymentAppService=l,s._router=r,s.description="",s.redirectUrl="",s}return Object(g.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,this._paymentAppService.getPayment(this.paymentId).subscribe(function(e){t.description=e.description,t.successCallbackUrl=e.successUrl,t.errorCallbackUrl=e.errorUrl})},e.prototype.upgradeSubscription=function(){var t=this;abp.ui.setBusy();var e=new m.Nb;e.paymentId=this.paymentId,this._stripePaymentAppService.updateSubscription(e).subscribe(function(){mi.a.ajax("POST",t.successCallbackUrl+(t.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+t.paymentId,null,null,function(e){abp.ui.clearBusy(),t._router.navigate([t.redirectUrl])})})},e}(f.a),Li=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Bi(t){return i["\u0275vid"](0,[i["\u0275pid"](0,d.a,[i.Injector]),(t()(),i["\u0275eld"](1,0,null,null,16,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,15,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,14,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,13,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(t()(),i["\u0275ted"](7,null,["",""])),(t()(),i["\u0275eld"](8,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](9,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(t()(),i["\u0275ted"](10,null,[" "," "])),(t()(),i["\u0275eld"](11,0,null,null,3,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),i["\u0275eld"](12,0,null,null,2,"label",[["class","col-sm-12"]],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,["",""])),i["\u0275ppd"](14,1),(t()(),i["\u0275eld"](15,0,null,null,2,"button",[["class","btn btn-primary btn-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.upgradeSubscription()&&i),i},null,null)),(t()(),i["\u0275ted"](16,null,["",""])),i["\u0275ppd"](17,1)],null,function(t,e){var n=e.component;t(e,7,0,n.l("Item")),t(e,10,0,n.description);var l=i["\u0275unv"](e,13,0,t(e,14,0,i["\u0275nov"](e,0),"RecurringSubscriptionUpgradeNote"));t(e,13,0,l);var r=i["\u0275unv"](e,16,0,t(e,17,0,i["\u0275nov"](e,0),"Purchase"));t(e,16,0,r)})}function Vi(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"stripe-update-subscirption-component",[],null,null,null,Bi,Li)),i["\u0275did"](1,114688,null,0,Hi,[i.Injector,D.ActivatedRoute,m.Mb,m.qb,D.Router],null,null)],function(t,e){t(e,1,0)},null)}var ji=i["\u0275ccf"]("stripe-update-subscirption-component",Hi,Vi,{},{},[]),Ui=n("rf+y"),qi=n("UtOw"),Mi=n("dxxL"),Ki=n("tnCA"),Gi=n("WTR0"),Wi=n("Yap4"),zi=n("wtux"),Yi=n("EohJ"),Ji=n("op6y"),Xi=n("QkXj"),$i=n("RrOR"),Qi=n("CP3D"),Zi=n("oo35"),tl=n("NJnL"),el=n("Qj9z"),nl=function(){function t(t,e,n){this._permissionChecker=t,this._router=e,this._sessionService=n}return t.prototype.canActivate=function(t,e){return!(!t.queryParams.ss||"true"!==t.queryParams.ss)||!this._sessionService.user||(this._router.navigate([this.selectBestRoute()]),!1)},t.prototype.selectBestRoute=function(){return this._permissionChecker.isGranted("Pages.Administration.Host.Dashboard")?"/app/admin/hostDashboard":this._permissionChecker.isGranted("Pages.Tenant.Dashboard")?"/app/main/dashboard":"/app/notifications"},t}(),il=n("WH67"),ll=n("uOf+"),rl=n("JeFn"),sl=n("pmn7"),ol=n("yc4G"),al=n("YirH"),ul=function(){function t(t,e){var n=this;this.router=t,this._uiCustomizationService=e,t.events.subscribe(function(t){setTimeout(function(){n.toggleBodyCssClass(t.url)},0)})}return t.prototype.toggleBodyCssClass=function(t){t?t.indexOf("/account/")>=0?this.setAccountModuleBodyClassInternal():document.body.className=this._uiCustomizationService.getAppModuleBodyClass():this.setAccountModuleBodyClassInternal()},t.prototype.setAccountModuleBodyClassInternal=function(){var t="";document.body.className.indexOf("swal2-toast-shown")>=0&&(t+=" swal2-toast-shown"),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()+" "+t},t}();n.d(e,"AccountModuleNgFactory",function(){return cl});var cl=i["\u0275cmf"](l,[],function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,r.b,s.a,Vt,te,ve,Fe,Ve,Ke,Qe,ln,un,mn,wn,Dn,Un,Jn,gi,Ei,Ri,Di,ji]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,o.NgLocalization,o.NgLocaleLocalization,[i.LOCALE_ID,[2,o["\u0275angular_packages_common_common_a"]]]),i["\u0275mpd"](4608,a["\u0275angular_packages_forms_forms_o"],a["\u0275angular_packages_forms_forms_o"],[]),i["\u0275mpd"](4608,G.HttpXsrfTokenExtractor,G["\u0275angular_packages_common_http_http_g"],[o.DOCUMENT,i.PLATFORM_ID,G["\u0275angular_packages_common_http_http_e"]]),i["\u0275mpd"](4608,G["\u0275angular_packages_common_http_http_h"],G["\u0275angular_packages_common_http_http_h"],[G.HttpXsrfTokenExtractor,G["\u0275angular_packages_common_http_http_f"]]),i["\u0275mpd"](5120,G["\u0275angular_packages_common_http_http_b"],G["\u0275angular_packages_common_http_http_c"],[]),i["\u0275mpd"](4608,G.JsonpClientBackend,G.JsonpClientBackend,[G["\u0275angular_packages_common_http_http_b"],o.DOCUMENT]),i["\u0275mpd"](4608,U.a,U.a,[]),i["\u0275mpd"](4608,j.a,j.a,[]),i["\u0275mpd"](4608,Ui.a,Ui.a,[U.a,j.a]),i["\u0275mpd"](5120,ut,Tt,[]),i["\u0275mpd"](4608,_t,Ct,[]),i["\u0275mpd"](5120,G.HTTP_INTERCEPTORS,function(t,e,n,i,l,r){return[t,new G.JsonpInterceptor(e),new Ui.b(n),new Et(i,l,r)]},[G["\u0275angular_packages_common_http_http_h"],G.JsonpClientBackend,Ui.a,ut,_t,[2,bt]]),i["\u0275mpd"](4608,G["\u0275angular_packages_common_http_http_d"],G["\u0275angular_packages_common_http_http_d"],[]),i["\u0275mpd"](6144,G.XhrFactory,null,[G["\u0275angular_packages_common_http_http_d"]]),i["\u0275mpd"](4608,G.HttpXhrBackend,G.HttpXhrBackend,[G.XhrFactory]),i["\u0275mpd"](6144,G.HttpBackend,null,[G.HttpXhrBackend]),i["\u0275mpd"](4608,G.HttpHandler,G["\u0275HttpInterceptingHandler"],[G.HttpBackend,i.Injector]),i["\u0275mpd"](4608,G.HttpClient,G.HttpClient,[G.HttpHandler]),i["\u0275mpd"](4608,ne.RecaptchaLoaderService,ne.RecaptchaLoaderService,[i.PLATFORM_ID,[2,ne.RECAPTCHA_LANGUAGE],[2,ne.RECAPTCHA_BASE_URL],[2,ne.RECAPTCHA_NONCE]]),i["\u0275mpd"](4608,Mt.a,Mt.a,[]),i["\u0275mpd"](4608,qi.a,qi.a,[]),i["\u0275mpd"](4608,Mi.a,Mi.a,[]),i["\u0275mpd"](4608,Ki.a,Ki.a,[]),i["\u0275mpd"](4608,Gi.a,Gi.a,[]),i["\u0275mpd"](4608,Wi.a,Wi.a,[]),i["\u0275mpd"](4608,zi.a,zi.a,[]),i["\u0275mpd"](4608,Yi.a,Yi.a,[G.HttpClient]),i["\u0275mpd"](4608,V.a,V.a,[]),i["\u0275mpd"](4608,q.a,q.a,[]),i["\u0275mpd"](4608,Ji.a,Ji.a,[]),i["\u0275mpd"](4608,Xi.a,Xi.a,[]),i["\u0275mpd"](4608,K.a,K.a,[]),i["\u0275mpd"](4608,$i.a,$i.a,[]),i["\u0275mpd"](4608,Qi.a,Qi.a,[]),i["\u0275mpd"](4608,Zi.a,Zi.a,[]),i["\u0275mpd"](4608,m.f,m.f,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.i,m.i,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.o,m.o,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.r,m.r,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.F,m.F,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.S,m.S,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.W,m.W,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Z,m.Z,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.db,m.db,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.jb,m.jb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.lb,m.lb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.rb,m.rb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.sb,m.sb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.zb,m.zb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Hb,m.Hb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Yb,m.Yb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Vb,m.Vb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Zb,m.Zb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.gc,m.gc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.yc,m.yc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.uc,m.uc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.wc,m.wc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Bc,m.Bc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.b,m.b,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.hc,m.hc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Xb,m.Xb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.V,m.V,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.qb,m.qb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.C,m.C,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.bb,m.bb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Rb,m.Rb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.jc,m.jc,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.nb,m.nb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,m.Mb,m.Mb,[G.HttpClient,[2,m.a]]),i["\u0275mpd"](4608,tl.a,tl.a,[i.RendererFactory2,i.PLATFORM_ID]),i["\u0275mpd"](4608,p.a,p.a,[i.ComponentFactoryResolver,i.NgZone,i.Injector,tl.a,i.ApplicationRef]),i["\u0275mpd"](4608,h.a,h.a,[i.RendererFactory2,p.a]),i["\u0275mpd"](4608,ct,wt,[]),i["\u0275mpd"](4608,dt,dt,[]),i["\u0275mpd"](5120,at,At,[]),i["\u0275mpd"](4608,St,St,[i.NgZone,G.HttpClient,[2,ut],[2,ct],[2,vt],dt,at]),i["\u0275mpd"](4608,Ft,Ft,[m.hc,D.Router,q.a,U.a,V.a,j.a,St]),i["\u0275mpd"](4608,Se,Se,[]),i["\u0275mpd"](4608,An,An,[]),i["\u0275mpd"](4608,nl,nl,[qi.a,D.Router,el.a]),i["\u0275mpd"](1073742336,o.CommonModule,o.CommonModule,[]),i["\u0275mpd"](1073742336,a["\u0275angular_packages_forms_forms_d"],a["\u0275angular_packages_forms_forms_d"],[]),i["\u0275mpd"](1073742336,a.FormsModule,a.FormsModule,[]),i["\u0275mpd"](1073742336,G.HttpClientXsrfModule,G.HttpClientXsrfModule,[]),i["\u0275mpd"](1073742336,G.HttpClientModule,G.HttpClientModule,[]),i["\u0275mpd"](1073742336,G.HttpClientJsonpModule,G.HttpClientJsonpModule,[]),i["\u0275mpd"](1073742336,il.RecaptchaCommonModule,il.RecaptchaCommonModule,[]),i["\u0275mpd"](1073742336,ll.RecaptchaModule,ll.RecaptchaModule,[]),i["\u0275mpd"](1073742336,h.e,h.e,[]),i["\u0275mpd"](1073742336,rl.a,rl.a,[]),i["\u0275mpd"](1073742336,sl.a,sl.a,[]),i["\u0275mpd"](1073742336,ol.a,ol.a,[]),i["\u0275mpd"](1073742336,al.a,al.a,[]),i["\u0275mpd"](1073742336,D.RouterModule,D.RouterModule,[[2,D["\u0275angular_packages_router_router_a"]],[2,D.Router]]),i["\u0275mpd"](1073742336,ul,ul,[D.Router,L.a]),i["\u0275mpd"](1073742336,xt,xt,[]),i["\u0275mpd"](1073742336,l,l,[]),i["\u0275mpd"](256,G["\u0275angular_packages_common_http_http_e"],"XSRF-TOKEN",[]),i["\u0275mpd"](256,G["\u0275angular_packages_common_http_http_f"],"X-XSRF-TOKEN",[]),i["\u0275mpd"](256,bt,null,[]),i["\u0275mpd"](1024,D.ROUTES,function(){return[[{path:"",component:Nt,children:[{path:"",redirectTo:"login"},{path:"login",component:Kt,canActivate:[nl]},{path:"register",component:ue,canActivate:[nl]},{path:"register-tenant",component:be,canActivate:[nl]},{path:"register-tenant-result",component:ke,canActivate:[nl]},{path:"forgot-password",component:je,canActivate:[nl]},{path:"reset-password",component:We,canActivate:[nl]},{path:"email-activation",component:Ze,canActivate:[nl]},{path:"confirm-email",component:rn,canActivate:[nl]},{path:"send-code",component:cn,canActivate:[nl]},{path:"verify-code",component:yn,canActivate:[nl]},{path:"buy",component:Tn},{path:"extend",component:Hn},{path:"upgrade",component:qn},{path:"select-edition",component:Xn},{path:"paypal-purchase",component:vi},{path:"stripe-purchase",component:wi},{path:"stripe-subscribe",component:Fi},{path:"stripe-update-subscription",component:Hi}]}]]},[])])})},WH67:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CcnG"),l=n("15PL");e.RecaptchaCommonModule=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{declarations:[l.RecaptchaComponent],exports:[l.RecaptchaComponent]}]}],t}()},gfpf:function(t,e){var n={userAgent:!1},i={};if(void 0===l)var l={};l.lang={extend:function(t,e,i){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var l=function(){};if(l.prototype=e.prototype,t.prototype=new l,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),i){var r;for(r in i)t.prototype[r]=i[r];var o=function(){},a=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(o=function(t,e){for(r=0;r<a.length;r+=1){var n=a[r],i=e[n];"function"==typeof i&&i!=Object.prototype[n]&&(t[n]=i)}})}catch(s){}o(t.prototype,i)}}};var r,s,o,a,u,c,d,h,p,g,f,m=m||(r=Math,o=(s={}).lib={},a=o.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=o.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||d).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,l=t.sigBytes;if(this.clamp(),i%4)for(var r=0;r<l;r++)e[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else for(r=0;r<l;r+=4)e[i+r>>>2]=n[r>>>2];return this.sigBytes+=l,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=r.ceil(e/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(4294967296*r.random()|0);return new u.init(e,t)}}),c=s.enc={},d=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],l=0;l<n;l++){var r=e[l>>>2]>>>24-l%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new u.init(n,e/2)}},h=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],l=0;l<n;l++)i.push(String.fromCharCode(e[l>>>2]>>>24-l%4*8&255));return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new u.init(n,e)}},p=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},g=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,i=e.sigBytes,l=this.blockSize,s=i/(4*l),o=(s=t?r.ceil(s):r.max((0|s)-this._minBufferSize,0))*l,a=r.min(4*o,i);if(o){for(var c=0;c<o;c+=l)this._doProcessBlock(n,c);var d=n.splice(0,o);e.sigBytes-=a}return new u.init(d,a)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),o.Hasher=g.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),f=s.algo={},s);!function(t){var e,n=(e=m).lib,i=n.Base,l=n.WordArray;(e=e.x64={}).Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;i<e;i++){var r=t[i];n.push(r.high),n.push(r.low)}return l.create(n,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),n=e.length,l=0;l<n;l++)e[l]=e[l].clone();return t}})}(),m.lib.Cipher||function(t){var e=(p=m).lib,n=e.Base,i=e.WordArray,l=e.BufferedBlockAlgorithm,r=p.enc.Base64,s=p.algo.EvpKDF,o=e.Cipher=l.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,i){return("string"==typeof n?g:h).encrypt(t,e,n,i)},decrypt:function(e,n,i){return("string"==typeof n?g:h).decrypt(t,e,n,i)}}}});e.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var a=p.mode={},u=function(t,e,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var l=0;l<n;l++)t[e+l]^=i[l]},c=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();c.Encryptor=c.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;u.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),c.Decryptor=c.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,l=t.slice(e,e+i);n.decryptBlock(t,e),u.call(this,t,e,i),this._prevBlock=l}}),a=a.CBC=c,c=(p.pad={}).Pkcs7={pad:function(t,e){for(var n,l=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,r=[],s=0;s<n;s+=4)r.push(l);n=i.create(r,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=o.extend({cfg:o.cfg.extend({mode:a,padding:c}),reset:function(){o.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var d=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),h=(a=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(r)},parse:function(t){var e=(t=r.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:a}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var l=t.createEncryptor(n,i);return e=l.finalize(e),d.create({ciphertext:e,key:n,iv:(l=l.cfg).iv,algorithm:t,mode:l.mode,padding:l.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,n,l){return l||(l=i.random(8)),t=s.create({keySize:e+n}).compute(t,l),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,d.create({key:t,iv:n,salt:l})}},g=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(t,e,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize),i.iv=n.iv,(t=h.encrypt.call(this,t,e,n.key,i)).mixIn(n),t},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),n=i.kdf.execute(n,t.keySize,t.ivSize,e.salt),i.iv=n.iv,h.decrypt.call(this,t,e,n.key,i)}})}(),function(){for(var t=m,e=t.lib.BlockCipher,n=t.algo,i=[],l=[],r=[],s=[],o=[],a=[],u=[],c=[],d=[],h=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;var f=0,v=0;for(g=0;256>g;g++){var y;i[f]=y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99,l[y]=f;var S=p[f],b=p[S],_=p[b],C=257*p[y]^16843008*y;r[f]=C<<24|C>>>8,s[f]=C<<16|C>>>16,o[f]=C<<8|C>>>24,a[f]=C,u[y]=(C=16843009*_^65537*b^257*S^16843008*f)<<24|C>>>8,c[y]=C<<16|C>>>16,d[y]=C<<8|C>>>24,h[y]=C,f?(f=S^p[p[p[_^S]]],v^=p[p[v]]):f=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),l=this._keySchedule=[],r=0;r<n;r++)if(r<e)l[r]=t[r];else{var s=l[r-1];r%e?6<e&&4==r%e&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=E[r/e|0]<<24),l[r]=l[r-e]^s}for(t=this._invKeySchedule=[],e=0;e<n;e++)r=n-e,s=e%4?l[r]:l[r-4],t[e]=4>e||4>=r?s:u[i[s>>>24]]^c[i[s>>>16&255]]^d[i[s>>>8&255]]^h[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,r,s,o,a,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,c,d,h,l),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,l,r,s,o){for(var a=this._nRounds,u=t[e]^n[0],c=t[e+1]^n[1],d=t[e+2]^n[2],h=t[e+3]^n[3],p=4,g=1;g<a;g++){var f=i[u>>>24]^l[c>>>16&255]^r[d>>>8&255]^s[255&h]^n[p++],m=i[c>>>24]^l[d>>>16&255]^r[h>>>8&255]^s[255&u]^n[p++],v=i[d>>>24]^l[h>>>16&255]^r[u>>>8&255]^s[255&c]^n[p++];h=i[h>>>24]^l[u>>>16&255]^r[c>>>8&255]^s[255&d]^n[p++],u=f,c=m,d=v}f=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^n[p++],m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&u])^n[p++],v=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^n[p++],h=(o[h>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^n[p++],t[e]=f,t[e+1]=m,t[e+2]=v,t[e+3]=h},keySize:8}),t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n,i=m,l=(n=i.lib).WordArray,r=i.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var i=s[n]-1;e[n]=t[i>>>5]>>>31-i%32&1}for(t=this._subKeys=[],i=0;16>i;i++){var l=t[i]=[],r=a[i];for(n=0;24>n;n++)l[n/6|0]|=e[(o[n]-1+r)%28]<<31-n%6,l[4+(n/6|0)]|=e[28+(o[n+24]-1+r)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;7>n;n++)l[n]>>>=4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,i,l){this._lBlock=n[i],this._rBlock=n[i+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var r=0;16>r;r++){for(var s=l[r],o=this._lBlock,a=this._rBlock,d=0,h=0;8>h;h++)d|=u[h][((a^s[h])&c[h])>>>0];this._lBlock=a,this._rBlock=o^d}l=this._lBlock,this._lBlock=this._rBlock,this._rBlock=l,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[i]=this._lBlock,n[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=n._createHelper(d),r=r.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=d.createEncryptor(l.create(t.slice(0,2))),this._des2=d.createEncryptor(l.create(t.slice(2,4))),this._des3=d.createEncryptor(l.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=n._createHelper(r)}(),function(){var t=m.lib.WordArray;m.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp(),t=[];for(var l=0;l<n;l+=3)for(var r=(e[l>>>2]>>>24-l%4*8&255)<<16|(e[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|e[l+2>>>2]>>>24-(l+2)%4*8&255,s=0;4>s&&l+.75*s<n;s++)t.push(i.charAt(r>>>6*(3-s)&63));if(e=i.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(e){var n=e.length,i=this._map;(l=i.charAt(64))&&-1!=(l=e.indexOf(l))&&(n=l);for(var l=[],r=0,s=0;s<n;s++)if(s%4){var o=i.indexOf(e.charAt(s-1))<<s%4*2,a=i.indexOf(e.charAt(s))>>>6-s%4*2;l[r>>>2]|=(o|a)<<24-r%4*8,r++}return t.create(l,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,i,l,r,s){return((t=t+(e&n|~e&i)+l+s)<<r|t>>>32-r)+e}function n(t,e,n,i,l,r,s){return((t=t+(e&i|n&~i)+l+s)<<r|t>>>32-r)+e}function i(t,e,n,i,l,r,s){return((t=t+(e^n^i)+l+s)<<r|t>>>32-r)+e}function l(t,e,n,i,l,r,s){return((t=t+(n^(e|~i))+l+s)<<r|t>>>32-r)+e}for(var r=m,s=(a=r.lib).WordArray,o=a.Hasher,a=r.algo,u=[],c=0;64>c;c++)u[c]=4294967296*t.abs(t.sin(c+1))|0;a=a.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var s=0;16>s;s++)t[o=r+s]=16711935&((a=t[o])<<8|a>>>24)|4278255360&(a<<24|a>>>8);var o,a=t[r+1],c=t[r+2],d=t[r+3],h=t[r+4],p=t[r+5],g=t[r+6],f=t[r+7],m=t[r+8],v=t[r+9],y=t[r+10],S=t[r+11],b=t[r+12],_=t[r+13],C=t[r+14],E=t[r+15],w=e(w=(s=this._hash.words)[0],x=s[1],T=s[2],A=s[3],o=t[r+0],7,u[0]),A=e(A,w,x,T,a,12,u[1]),T=e(T,A,w,x,c,17,u[2]),x=e(x,T,A,w,d,22,u[3]);w=e(w,x,T,A,h,7,u[4]),A=e(A,w,x,T,p,12,u[5]),T=e(T,A,w,x,g,17,u[6]),x=e(x,T,A,w,f,22,u[7]),w=e(w,x,T,A,m,7,u[8]),A=e(A,w,x,T,v,12,u[9]),T=e(T,A,w,x,y,17,u[10]),x=e(x,T,A,w,S,22,u[11]),w=e(w,x,T,A,b,7,u[12]),A=e(A,w,x,T,_,12,u[13]),T=e(T,A,w,x,C,17,u[14]),w=n(w,x=e(x,T,A,w,E,22,u[15]),T,A,a,5,u[16]),A=n(A,w,x,T,g,9,u[17]),T=n(T,A,w,x,S,14,u[18]),x=n(x,T,A,w,o,20,u[19]),w=n(w,x,T,A,p,5,u[20]),A=n(A,w,x,T,y,9,u[21]),T=n(T,A,w,x,E,14,u[22]),x=n(x,T,A,w,h,20,u[23]),w=n(w,x,T,A,v,5,u[24]),A=n(A,w,x,T,C,9,u[25]),T=n(T,A,w,x,d,14,u[26]),x=n(x,T,A,w,m,20,u[27]),w=n(w,x,T,A,_,5,u[28]),A=n(A,w,x,T,c,9,u[29]),T=n(T,A,w,x,f,14,u[30]),w=i(w,x=n(x,T,A,w,b,20,u[31]),T,A,p,4,u[32]),A=i(A,w,x,T,m,11,u[33]),T=i(T,A,w,x,S,16,u[34]),x=i(x,T,A,w,C,23,u[35]),w=i(w,x,T,A,a,4,u[36]),A=i(A,w,x,T,h,11,u[37]),T=i(T,A,w,x,f,16,u[38]),x=i(x,T,A,w,y,23,u[39]),w=i(w,x,T,A,_,4,u[40]),A=i(A,w,x,T,o,11,u[41]),T=i(T,A,w,x,d,16,u[42]),x=i(x,T,A,w,g,23,u[43]),w=i(w,x,T,A,v,4,u[44]),A=i(A,w,x,T,b,11,u[45]),T=i(T,A,w,x,E,16,u[46]),w=l(w,x=i(x,T,A,w,c,23,u[47]),T,A,o,6,u[48]),A=l(A,w,x,T,f,10,u[49]),T=l(T,A,w,x,C,15,u[50]),x=l(x,T,A,w,p,21,u[51]),w=l(w,x,T,A,b,6,u[52]),A=l(A,w,x,T,d,10,u[53]),T=l(T,A,w,x,y,15,u[54]),x=l(x,T,A,w,a,21,u[55]),w=l(w,x,T,A,m,6,u[56]),A=l(A,w,x,T,E,10,u[57]),T=l(T,A,w,x,g,15,u[58]),x=l(x,T,A,w,_,21,u[59]),w=l(w,x,T,A,h,6,u[60]),A=l(A,w,x,T,S,10,u[61]),T=l(T,A,w,x,c,15,u[62]),x=l(x,T,A,w,v,21,u[63]),s[0]=s[0]+w|0,s[1]=s[1]+x|0,s[2]=s[2]+T|0,s[3]=s[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,l=8*e.sigBytes;n[l>>>5]|=128<<24-l%32;var r=t.floor(i/4294967296);for(n[15+(l+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(l+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,i=0;4>i;i++)n[i]=16711935&((l=n[i])<<8|l>>>24)|4278255360&(l<<24|l>>>8);return e},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),r.MD5=o._createHelper(a),r.HmacMD5=o._createHmacHelper(a)}(Math),function(){var t=m,e=(l=t.lib).WordArray,n=l.Hasher,i=[],l=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,l=n[0],r=n[1],s=n[2],o=n[3],a=n[4],u=0;80>u;u++){if(16>u)i[u]=0|t[e+u];else{var c=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=c<<1|c>>>31}c=(l<<5|l>>>27)+a+i[u],c=20>u?c+(1518500249+(r&s|~r&o)):40>u?c+(1859775393+(r^s^o)):60>u?c+((r&s|r&o|s&o)-1894007588):c+((r^s^o)-899497514),a=o,o=s,s=r<<30|r>>>2,r=l,l=c}n[0]=n[0]+l|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(l),t.HmacSHA1=n._createHmacHelper(l)}(),function(t){for(var e=m,n=(l=e.lib).WordArray,i=l.Hasher,l=e.algo,r=[],s=[],o=function(t){return 4294967296*(t-(0|t))|0},a=2,u=0;64>u;){var c;t:{for(var d=t.sqrt(c=a),h=2;h<=d;h++)if(!(c%h)){c=!1;break t}c=!0}c&&(8>u&&(r[u]=o(t.pow(a,.5))),s[u]=o(t.pow(a,1/3)),u++),a++}var p=[];l=l.SHA256=i.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],l=n[1],r=n[2],o=n[3],a=n[4],u=n[5],c=n[6],d=n[7],h=0;64>h;h++){if(16>h)p[h]=0|t[e+h];else{var g=p[h-15],f=p[h-2];p[h]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+p[h-7]+((f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10)+p[h-16]}g=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+s[h]+p[h],f=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&l^i&r^l&r),d=c,c=u,u=a,a=o+g|0,o=r,r=l,l=i,i=g+f|0}n[0]=n[0]+i|0,n[1]=n[1]+l|0,n[2]=n[2]+r|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,l=8*e.sigBytes;return n[l>>>5]|=128<<24-l%32,n[14+(l+64>>>9<<4)]=t.floor(i/4294967296),n[15+(l+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA256=i._createHelper(l),e.HmacSHA256=i._createHmacHelper(l)}(Math),function(){var t=m,e=t.lib.WordArray,n=(i=t.algo).SHA256,i=i.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=n._createHelper(i),t.HmacSHA224=n._createHmacHelper(i)}(),function(){function t(){return i.create.apply(i,arguments)}for(var e=m,n=e.lib.Hasher,i=(r=e.x64).Word,l=r.WordArray,r=e.algo,s=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],o=[],a=0;80>a;a++)o[a]=t();r=r.SHA512=n.extend({_doReset:function(){this._hash=new l.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n,i=(n=this._hash.words)[0],l=n[1],r=n[2],a=n[3],u=n[4],c=n[5],d=n[6],h=i.high,p=i.low,g=l.high,f=l.low,m=r.high,v=r.low,y=a.high,S=a.low,b=u.high,_=u.low,C=c.high,E=c.low,w=d.high,A=d.low,T=(n=n[7]).high,x=n.low,I=h,R=p,F=g,N=f,k=m,P=v,O=y,D=S,H=b,L=_,B=C,V=E,j=w,U=A,q=T,M=x,K=0;80>K;K++){var G=o[K];if(16>K)var W=G.high=0|t[e+2*K],z=G.low=0|t[e+2*K+1];else{W=((z=(W=o[K-15]).high)>>>1|(Y=W.low)<<31)^(z>>>8|Y<<24)^z>>>7;var Y=(Y>>>1|z<<31)^(Y>>>8|z<<24)^(Y>>>7|z<<25),J=((z=(J=o[K-2]).high)>>>19|(X=J.low)<<13)^(z<<3|X>>>29)^z>>>6,X=(X>>>19|z<<13)^(X<<3|z>>>29)^(X>>>6|z<<26);G.high=W=(W=(W=W+($=(z=o[K-7]).high)+((z=Y+z.low)>>>0<Y>>>0?1:0))+J+((z+=X)>>>0<X>>>0?1:0))+(nt=(Q=o[K-16]).high)+((z+=Q=Q.low)>>>0<Q>>>0?1:0),G.low=z}var $=H&B^~H&j,Q=L&V^~L&U,Z=(G=I&F^I&k^F&k,R&N^R&P^N&P),tt=(X=s[K]).high,et=X.low,nt=q+((H>>>14|L<<18)^(H>>>18|L<<14)^(H<<23|L>>>9))+((X=M+((L>>>14|H<<18)^(L>>>18|H<<14)^(L<<23|H>>>9)))>>>0<M>>>0?1:0);q=j,M=U,j=B,U=V,B=H,V=L,H=O+(nt=(nt=(nt=nt+$+((X+=Q)>>>0<Q>>>0?1:0))+tt+((X+=et)>>>0<et>>>0?1:0))+W+((X+=z)>>>0<z>>>0?1:0))+((L=D+X|0)>>>0<D>>>0?1:0)|0,O=k,D=P,k=F,P=N,F=I,N=R,I=nt+(G=(Y=(I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7))+G+((z=(J=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7))+Z)>>>0<J>>>0?1:0))+((R=X+z|0)>>>0<X>>>0?1:0)|0}p=i.low=p+R,i.high=h+I+(p>>>0<R>>>0?1:0),f=l.low=f+N,l.high=g+F+(f>>>0<N>>>0?1:0),v=r.low=v+P,r.high=m+k+(v>>>0<P>>>0?1:0),S=a.low=S+D,a.high=y+O+(S>>>0<D>>>0?1:0),_=u.low=_+L,u.high=b+H+(_>>>0<L>>>0?1:0),E=c.low=E+V,c.high=C+B+(E>>>0<V>>>0?1:0),A=d.low=A+U,d.high=w+j+(A>>>0<U>>>0?1:0),x=n.low=x+M,n.high=T+q+(x>>>0<M>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(i+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(r),e.HmacSHA512=n._createHmacHelper(r)}(),function(){var t=m,e=(l=t.x64).Word,n=l.WordArray,i=(l=t.algo).SHA512,l=l.SHA384=i.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=i._createHelper(l),t.HmacSHA384=i._createHmacHelper(l)}(),function(){var t=m,e=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,l=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),r=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=e.create([0,1518500249,1859775393,2400959708,2840853838]),u=e.create([1352829926,1548603684,1836072691,2053994217,0]);i=i.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++)t[i=e+n]=16711935&((_=t[i])<<8|_>>>24)|4278255360&(_<<24|_>>>8);var i,c,d,h,p,g,f,m,v,y,S,b,_=a.words,C=u.words,E=l.words,w=r.words,A=s.words,T=o.words;for(f=c=(i=this._hash.words)[0],m=d=i[1],v=h=i[2],y=p=i[3],S=g=i[4],n=0;80>n;n+=1)b=c+t[e+E[n]]|0,b=16>n?b+((d^h^p)+_[0]):32>n?b+((d&h|~d&p)+_[1]):48>n?b+(((d|~h)^p)+_[2]):64>n?b+((d&p|h&~p)+_[3]):b+((d^(h|~p))+_[4]),b=(b=(b|=0)<<A[n]|b>>>32-A[n])+g|0,c=g,g=p,p=h<<10|h>>>22,h=d,d=b,b=f+t[e+w[n]]|0,b=16>n?b+((m^(v|~y))+C[0]):32>n?b+((m&y|v&~y)+C[1]):48>n?b+(((m|~v)^y)+C[2]):64>n?b+((m&v|~m&y)+C[3]):b+((m^v^y)+C[4]),b=(b=(b|=0)<<T[n]|b>>>32-T[n])+S|0,f=S,S=y,y=v<<10|v>>>22,v=m,m=b;b=i[1]+h+y|0,i[1]=i[2]+p+S|0,i[2]=i[3]+g+f|0,i[3]=i[4]+c+m|0,i[4]=i[0]+d+v|0,i[0]=b},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;for(e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)e[n]=16711935&((i=e[n])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=n._createHelper(i),t.HmacRIPEMD160=n._createHmacHelper(i)}(Math),function(){var t=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var i=e.blockSize,l=4*i;n.sigBytes>l&&(n=e.finalize(n)),n.clamp();for(var r=this._oKey=n.clone(),s=this._iKey=n.clone(),o=r.words,a=s.words,u=0;u<i;u++)o[u]^=1549556828,a[u]^=909522486;r.sigBytes=s.sigBytes=l,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=m,n=(t=e.lib).Base,i=t.WordArray,l=(t=e.algo).HMAC,r=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=l.create((c=this.cfg).hasher,t),r=i.create(),s=i.create([1]),o=r.words,a=s.words,u=c.keySize,c=c.iterations;o.length<u;){var d=n.update(e).finalize(s);n.reset();for(var h=d.words,p=h.length,g=d,f=1;f<c;f++){g=n.finalize(g),n.reset();for(var m=g.words,v=0;v<p;v++)h[v]^=m[v]}r.concat(d),a[0]++}return r.sigBytes=4*u,r}});e.PBKDF2=function(t,e,n){return r.create(n).compute(t,e)}}();var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="=";function b(t){var e,n,i="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),i+=y.charAt(n>>6)+y.charAt(63&n);if(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),i+=y.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),i+=y.charAt(n>>2)+y.charAt((3&n)<<4)),S)for(;(3&i.length)>0;)i+=S;return i}function _(t){var e,n,i,l="",r=0;for(e=0;e<t.length&&t.charAt(e)!=S;++e)(i=y.indexOf(t.charAt(e)))<0||(0==r?(l+=R(i>>2),n=3&i,r=1):1==r?(l+=R(n<<2|i>>4),n=15&i,r=2):2==r?(l+=R(n),l+=R(i>>2),n=3&i,r=3):(l+=R(n<<2|i>>4),l+=R(15&i),r=0));return 1==r&&(l+=R(n<<2)),l}function C(t){var e,n=_(t),i=new Array;for(e=0;2*e<n.length;++e)i[e]=parseInt(n.substring(2*e,2*e+2),16);return i}function E(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function w(){return new E(null)}"Microsoft Internet Explorer"==n.appName?(E.prototype.am=function(t,e,n,i,l,r){for(var s=32767&e,o=e>>15;--r>=0;){var a=32767&this[t],u=this[t++]>>15,c=o*a+u*s;l=((a=s*a+((32767&c)<<15)+n[i]+(1073741823&l))>>>30)+(c>>>15)+o*u+(l>>>30),n[i++]=1073741823&a}return l},v=30):"Netscape"!=n.appName?(E.prototype.am=function(t,e,n,i,l,r){for(;--r>=0;){var s=e*this[t++]+n[i]+l;l=Math.floor(s/67108864),n[i++]=67108863&s}return l},v=26):(E.prototype.am=function(t,e,n,i,l,r){for(var s=16383&e,o=e>>14;--r>=0;){var a=16383&this[t],u=this[t++]>>14,c=o*a+u*s;l=((a=s*a+((16383&c)<<14)+n[i]+l)>>28)+(c>>14)+o*u,n[i++]=268435455&a}return l},v=28),E.prototype.DB=v,E.prototype.DM=(1<<v)-1,E.prototype.DV=1<<v,E.prototype.FV=Math.pow(2,52),E.prototype.F1=52-v,E.prototype.F2=2*v-52;var A,T,x="0123456789abcdefghijklmnopqrstuvwxyz",I=new Array;for(A="0".charCodeAt(0),T=0;T<=9;++T)I[A++]=T;for(A="a".charCodeAt(0),T=10;T<36;++T)I[A++]=T;for(A="A".charCodeAt(0),T=10;T<36;++T)I[A++]=T;function R(t){return x.charAt(t)}function F(t,e){var n=I[t.charCodeAt(e)];return null==n?-1:n}function N(t){var e=w();return e.fromInt(t),e}function k(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function P(t){this.m=t}function O(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function D(t,e){return t&e}function H(t,e){return t|e}function L(t,e){return t^e}function B(t,e){return t&~e}function V(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function j(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function U(){}function q(t){return t}function M(t){this.r2=w(),this.q3=w(),E.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}P.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},P.prototype.revert=function(t){return t},P.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},P.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},O.prototype.convert=function(t){var e=w();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(E.ZERO)>0&&this.m.subTo(e,e),e},O.prototype.revert=function(t){var e=w();return t.copyTo(e),this.reduce(e),e},O.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},O.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},O.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},E.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},E.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},E.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,l=!1,r=0;--i>=0;){var s=8==n?255&t[i]:F(t,i);s<0?"-"==t.charAt(i)&&(l=!0):(l=!1,0==r?this[this.t++]=s:r+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-r)-1)<<r,this[this.t++]=s>>this.DB-r):this[this.t-1]|=s<<r,(r+=n)>=this.DB&&(r-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),l&&E.ZERO.subTo(this,this)},E.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},E.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},E.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},E.prototype.lShiftTo=function(t,e){var n,i=t%this.DB,l=this.DB-i,r=(1<<l)-1,s=Math.floor(t/this.DB),o=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>l|o,o=(this[n]&r)<<i;for(n=s-1;n>=0;--n)e[n]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},E.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var i=t%this.DB,l=this.DB-i,r=(1<<i)-1;e[0]=this[n]>>i;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&r)<<l,e[s-n]=this[s]>>i;i>0&&(e[this.t-n-1]|=(this.s&r)<<l),e.t=this.t-n,e.clamp()}},E.prototype.subTo=function(t,e){for(var n=0,i=0,l=Math.min(t.t,this.t);n<l;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()},E.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),l=n.t;for(e.t=l+i.t;--l>=0;)e[l]=0;for(l=0;l<i.t;++l)e[l+n.t]=n.am(0,i[l],e,l,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&E.ZERO.subTo(e,e)},E.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},E.prototype.divRemTo=function(t,e,n){var i=t.abs();if(!(i.t<=0)){var l=this.abs();if(l.t<i.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=w());var r=w(),s=this.s,o=t.s,a=this.DB-k(i[i.t-1]);a>0?(i.lShiftTo(a,r),l.lShiftTo(a,n)):(i.copyTo(r),l.copyTo(n));var u=r.t,c=r[u-1];if(0!=c){var d=c*(1<<this.F1)+(u>1?r[u-2]>>this.F2:0),h=this.FV/d,p=(1<<this.F1)/d,g=1<<this.F2,f=n.t,m=f-u,v=null==e?w():e;for(r.dlShiftTo(m,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),E.ONE.dlShiftTo(u,v),v.subTo(r,r);r.t<u;)r[r.t++]=0;for(;--m>=0;){var y=n[--f]==c?this.DM:Math.floor(n[f]*h+(n[f-1]+g)*p);if((n[f]+=r.am(0,y,n,m,0,u))<y)for(r.dlShiftTo(m,v),n.subTo(v,n);n[f]<--y;)n.subTo(v,n)}null!=e&&(n.drShiftTo(u,e),s!=o&&E.ZERO.subTo(e,e)),n.t=u,n.clamp(),a>0&&n.rShiftTo(a,n),s<0&&E.ZERO.subTo(n,n)}}},E.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},E.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},E.prototype.exp=function(t,e){if(t>4294967295||t<1)return E.ONE;var n=w(),i=w(),l=e.convert(this),r=k(t)-1;for(l.copyTo(n);--r>=0;)if(e.sqrTo(n,i),(t&1<<r)>0)e.mulTo(i,l,n);else{var s=n;n=i,i=s}return e.revert(n)},E.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,i=(1<<e)-1,l=!1,r="",s=this.t,o=this.DB-s*this.DB%e;if(s-- >0)for(o<this.DB&&(n=this[s]>>o)>0&&(l=!0,r=R(n));s>=0;)o<e?(n=(this[s]&(1<<o)-1)<<e-o,n|=this[--s]>>(o+=this.DB-e)):(n=this[s]>>(o-=e)&i,o<=0&&(o+=this.DB,--s)),n>0&&(l=!0),l&&(r+=R(n));return l?r:"0"},E.prototype.negate=function(){var t=w();return E.ZERO.subTo(this,t),t},E.prototype.abs=function(){return this.s<0?this.negate():this},E.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},E.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)},E.prototype.mod=function(t){var e=w();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(E.ZERO)>0&&t.subTo(e,e),e},E.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new P(e):new O(e),this.exp(t,n)},E.ZERO=N(0),E.ONE=N(1),U.prototype.convert=q,U.prototype.revert=q,U.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},U.prototype.sqrTo=function(t,e){t.squareTo(e)},M.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=w();return t.copyTo(e),this.reduce(e),e},M.prototype.revert=function(t){return t},M.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},M.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},M.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var K=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],G=(1<<26)/K[K.length-1];function W(){this.i=0,this.j=0,this.S=new Array}E.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},E.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=N(n),l=w(),r=w(),s="";for(this.divRemTo(i,l,r);l.signum()>0;)s=(n+r.intValue()).toString(t).substr(1)+s,l.divRemTo(i,l,r);return r.intValue().toString(t)+s},E.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),l=!1,r=0,s=0,o=0;o<t.length;++o){var a=F(t,o);a<0?"-"==t.charAt(o)&&0==this.signum()&&(l=!0):(s=e*s+a,++r>=n&&(this.dMultiply(i),this.dAddOffset(s,0),r=0,s=0))}r>0&&(this.dMultiply(Math.pow(e,r)),this.dAddOffset(s,0)),l&&E.ZERO.subTo(this,this)},E.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(E.ONE.shiftLeft(t-1),H,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(E.ONE.shiftLeft(t-1),this);else{var i=new Array,l=7&t;i.length=1+(t>>3),e.nextBytes(i),l>0?i[0]&=(1<<l)-1:i[0]=0,this.fromString(i,256)}},E.prototype.bitwiseTo=function(t,e,n){var i,l,r=Math.min(t.t,this.t);for(i=0;i<r;++i)n[i]=e(this[i],t[i]);if(t.t<this.t){for(l=t.s&this.DM,i=r;i<this.t;++i)n[i]=e(this[i],l);n.t=this.t}else{for(l=this.s&this.DM,i=r;i<t.t;++i)n[i]=e(l,t[i]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},E.prototype.changeBit=function(t,e){var n=E.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},E.prototype.addTo=function(t,e){for(var n=0,i=0,l=Math.min(t.t,this.t);n<l;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[n++]=i:i<-1&&(e[n++]=this.DV+i),e.t=n,e.clamp()},E.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},E.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},E.prototype.multiplyLowerTo=function(t,e,n){var i,l=Math.min(this.t+t.t,e);for(n.s=0,n.t=l;l>0;)n[--l]=0;for(i=n.t-this.t;l<i;++l)n[l+this.t]=this.am(0,t[l],n,l,0,this.t);for(i=Math.min(t.t,e);l<i;++l)this.am(0,t[l],n,l,0,e-l);n.clamp()},E.prototype.multiplyUpperTo=function(t,e,n){var i=n.t=this.t+t.t- --e;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)n[this.t+i-e]=this.am(e-i,t[i],n,0,0,this.t+i-e);n.clamp(),n.drShiftTo(1,n)},E.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var i=this.t-1;i>=0;--i)n=(e*n+this[i])%t;return n},E.prototype.millerRabin=function(t){var e=this.subtract(E.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var i=e.shiftRight(n);(t=t+1>>1)>K.length&&(t=K.length);for(var l=w(),r=0;r<t;++r){l.fromInt(K[Math.floor(Math.random()*K.length)]);var s=l.modPow(i,this);if(0!=s.compareTo(E.ONE)&&0!=s.compareTo(e)){for(var o=1;o++<n&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(E.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0},E.prototype.clone=function(){var t=w();return this.copyTo(t),t},E.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},E.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},E.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},E.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},E.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,i=this.DB-t*this.DB%8,l=0;if(t-- >0)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[l++]=n|this.s<<this.DB-i);t>=0;)i<8?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==l&&(128&this.s)!=(128&n)&&++l,(l>0||n!=this.s)&&(e[l++]=n);return e},E.prototype.equals=function(t){return 0==this.compareTo(t)},E.prototype.min=function(t){return this.compareTo(t)<0?this:t},E.prototype.max=function(t){return this.compareTo(t)>0?this:t},E.prototype.and=function(t){var e=w();return this.bitwiseTo(t,D,e),e},E.prototype.or=function(t){var e=w();return this.bitwiseTo(t,H,e),e},E.prototype.xor=function(t){var e=w();return this.bitwiseTo(t,L,e),e},E.prototype.andNot=function(t){var e=w();return this.bitwiseTo(t,B,e),e},E.prototype.not=function(){for(var t=w(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},E.prototype.shiftLeft=function(t){var e=w();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},E.prototype.shiftRight=function(t){var e=w();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},E.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+V(this[t]);return this.s<0?this.t*this.DB:-1},E.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=j(this[n]^e);return t},E.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},E.prototype.setBit=function(t){return this.changeBit(t,H)},E.prototype.clearBit=function(t){return this.changeBit(t,B)},E.prototype.flipBit=function(t){return this.changeBit(t,L)},E.prototype.add=function(t){var e=w();return this.addTo(t,e),e},E.prototype.subtract=function(t){var e=w();return this.subTo(t,e),e},E.prototype.multiply=function(t){var e=w();return this.multiplyTo(t,e),e},E.prototype.divide=function(t){var e=w();return this.divRemTo(t,e,null),e},E.prototype.remainder=function(t){var e=w();return this.divRemTo(t,null,e),e},E.prototype.divideAndRemainder=function(t){var e=w(),n=w();return this.divRemTo(t,e,n),new Array(e,n)},E.prototype.modPow=function(t,e){var n,i,l=t.bitLength(),r=N(1);if(l<=0)return r;n=l<18?1:l<48?3:l<144?4:l<768?5:6,i=l<8?new P(e):e.isEven()?new M(e):new O(e);var s=new Array,o=3,a=n-1,u=(1<<n)-1;if(s[1]=i.convert(this),n>1){var c=w();for(i.sqrTo(s[1],c);o<=u;)s[o]=w(),i.mulTo(c,s[o-2],s[o]),o+=2}var d,h,p=t.t-1,g=!0,f=w();for(l=k(t[p])-1;p>=0;){for(l>=a?d=t[p]>>l-a&u:(d=(t[p]&(1<<l+1)-1)<<a-l,p>0&&(d|=t[p-1]>>this.DB+l-a)),o=n;0==(1&d);)d>>=1,--o;if((l-=o)<0&&(l+=this.DB,--p),g)s[d].copyTo(r),g=!1;else{for(;o>1;)i.sqrTo(r,f),i.sqrTo(f,r),o-=2;o>0?i.sqrTo(r,f):(h=r,r=f,f=h),i.mulTo(f,s[d],r)}for(;p>=0&&0==(t[p]&1<<l);)i.sqrTo(r,f),h=r,r=f,f=h,--l<0&&(l=this.DB-1,--p)}return i.revert(r)},E.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return E.ZERO;for(var n=t.clone(),i=this.clone(),l=N(1),r=N(0),s=N(0),o=N(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(l.isEven()&&r.isEven()||(l.addTo(this,l),r.subTo(t,r)),l.rShiftTo(1,l)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);n.compareTo(i)>=0?(n.subTo(i,n),e&&l.subTo(s,l),r.subTo(o,r)):(i.subTo(n,i),e&&s.subTo(l,s),o.subTo(r,o))}return 0!=i.compareTo(E.ONE)?E.ZERO:o.compareTo(t)>=0?o.subtract(t):o.signum()<0?(o.addTo(t,o),o.signum()<0?o.add(t):o):o},E.prototype.pow=function(t){return this.exp(t,new U)},E.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var i=e;e=n,n=i}var l=e.getLowestSetBit(),r=n.getLowestSetBit();if(r<0)return e;for(l<r&&(r=l),r>0&&(e.rShiftTo(r,e),n.rShiftTo(r,n));e.signum()>0;)(l=e.getLowestSetBit())>0&&e.rShiftTo(l,e),(l=n.getLowestSetBit())>0&&n.rShiftTo(l,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n},E.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=K[K.length-1]){for(e=0;e<K.length;++e)if(n[0]==K[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<K.length;){for(var i=K[e],l=e+1;l<K.length&&i<G;)i*=K[l++];for(i=n.modInt(i);e<l;)if(i%K[e++]==0)return!1}return n.millerRabin(t)},E.prototype.square=function(){var t=w();return this.squareTo(t),t},W.prototype.init=function(t){var e,n,i;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)i=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=i;this.i=0,this.j=0},W.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var z,Y,J,X=256;function $(){var t;t=(new Date).getTime(),Y[J++]^=255&t,Y[J++]^=t>>8&255,Y[J++]^=t>>16&255,Y[J++]^=t>>24&255,J>=X&&(J-=X)}if(null==Y){var Q;if(Y=new Array,J=0,void 0!==i&&(void 0!==i.crypto||void 0!==i.msCrypto)){var Z=i.crypto||i.msCrypto;if(Z.getRandomValues){var tt=new Uint8Array(32);for(Z.getRandomValues(tt),Q=0;Q<32;++Q)Y[J++]=tt[Q]}else if("Netscape"==n.appName&&n.appVersion<"5"){var et=i.crypto.random(32);for(Q=0;Q<et.length;++Q)Y[J++]=255&et.charCodeAt(Q)}}for(;J<X;)Q=Math.floor(65536*Math.random()),Y[J++]=Q>>>8,Y[J++]=255&Q;J=0,$()}function nt(){if(null==z){for($(),(z=new W).init(Y),J=0;J<Y.length;++J)Y[J]=0;J=0}return z.next()}function it(){}function lt(t,e){return new E(t,e)}function rt(t,e,n){for(var i="",l=0;i.length<e;)i+=n(String.fromCharCode.apply(String,t.concat([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l]))),l+=1;return i}function st(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ot(t,e,n){for(var i="",l=0;i.length<e;)i+=n(t+String.fromCharCode.apply(String,[(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])),l+=1;return i}function at(t,e){this.x=e,this.q=t}function ut(t,e,n,i){this.curve=t,this.x=e,this.y=n,this.z=null==i?E.ONE:i,this.zinv=null}function ct(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new ut(this,null,null)}it.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=nt()},st.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},st.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=lt(t,16),this.e=parseInt(e,16)}},st.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,i=t.length-1;i>=0&&e>0;){var l=t.charCodeAt(i--);l<128?n[--e]=l:l>127&&l<2048?(n[--e]=63&l|128,n[--e]=l>>6|192):(n[--e]=63&l|128,n[--e]=l>>6&63|128,n[--e]=l>>12|224)}n[--e]=0;for(var r=new it,s=new Array;e>2;){for(s[0]=0;0==s[0];)r.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new E(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i},st.prototype.encryptOAEP=function(t,e,n){var i=function(t,e,n,i){var l=ht.crypto.MessageDigest,r=ht.crypto.Util,s=null;if(n||(n="sha1"),"string"==typeof n&&(s=l.getCanonicalAlgName(n),i=l.getHashLength(s),n=function(t){return Tt(r.hashHex(xt(t),s))}),t.length+2*i+2>e)throw"Message too long for RSA";var o,a="";for(o=0;o<e-t.length-2*i-2;o+=1)a+="\0";var u=n("")+a+"\x01"+t,c=new Array(i);(new it).nextBytes(c);var d=rt(c,u.length,n),h=[];for(o=0;o<u.length;o+=1)h[o]=u.charCodeAt(o)^d.charCodeAt(o);var p=rt(h,c.length,n),g=[0];for(o=0;o<c.length;o+=1)g[o+1]=c[o]^p.charCodeAt(o);return new E(g.concat(h))}(t,this.n.bitLength()+7>>3,e,n);if(null==i)return null;var l=this.doPublic(i);if(null==l)return null;var r=l.toString(16);return 0==(1&r.length)?r:"0"+r},st.prototype.type="RSA",st.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},st.prototype.setPrivate=function(t,e,n){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=n;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=lt(t,16),this.e=parseInt(e,16),this.d=lt(n,16)}},st.prototype.setPrivateEx=function(t,e,n,i,l,r,s,o){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=lt(t,16),this.e=parseInt(e,16),this.d=lt(n,16),this.p=lt(i,16),this.q=lt(l,16),this.dmp1=lt(r,16),this.dmq1=lt(s,16),this.coeff=lt(o,16)},st.prototype.generate=function(t,e){var n=new it,i=t>>1;this.e=parseInt(e,16);for(var l=new E(e,16);;){for(;this.p=new E(t-i,1,n),0!=this.p.subtract(E.ONE).gcd(l).compareTo(E.ONE)||!this.p.isProbablePrime(10););for(;this.q=new E(i,1,n),0!=this.q.subtract(E.ONE).gcd(l).compareTo(E.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var r=this.p;this.p=this.q,this.q=r}var s=this.p.subtract(E.ONE),o=this.q.subtract(E.ONE),a=s.multiply(o);if(0==a.gcd(l).compareTo(E.ONE)){this.n=this.p.multiply(this.q),this.d=l.modInverse(a),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},st.prototype.decrypt=function(t){var e=lt(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),i=0;i<n.length&&0==n[i];)++i;if(n.length-i!=e-1||2!=n[i])return null;for(++i;0!=n[i];)if(++i>=n.length)return null;for(var l="";++i<n.length;){var r=255&n[i];r<128?l+=String.fromCharCode(r):r>191&&r<224?(l+=String.fromCharCode((31&r)<<6|63&n[i+1]),++i):(l+=String.fromCharCode((15&r)<<12|(63&n[i+1])<<6|63&n[i+2]),i+=2)}return l}(n,this.n.bitLength()+7>>3)},st.prototype.decryptOAEP=function(t,e,n){var i=lt(t,16),l=this.doPrivate(i);return null==l?null:function(t,e,n,i){var l=ht.crypto.MessageDigest,r=ht.crypto.Util,s=null;for(n||(n="sha1"),"string"==typeof n&&(s=l.getCanonicalAlgName(n),i=l.getHashLength(s),n=function(t){return Tt(r.hashHex(xt(t),s))}),t=t.toByteArray(),o=0;o<t.length;o+=1)t[o]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*i+2)throw"Cipher too short";var o,a=t.substr(1,i),u=t.substr(i+1),c=ot(u,i,n),d=[];for(o=0;o<a.length;o+=1)d[o]=a.charCodeAt(o)^c.charCodeAt(o);var h=ot(String.fromCharCode.apply(String,d),t.length-i,n),p=[];for(o=0;o<u.length;o+=1)p[o]=u.charCodeAt(o)^h.charCodeAt(o);if((p=String.fromCharCode.apply(String,p)).substr(0,i)!==n(""))throw"Hash mismatch";var g=(p=p.substr(i)).indexOf("\x01");if((-1!=g?p.substr(0,g).lastIndexOf("\0"):-1)+1!=g)throw"Malformed data";return p.substr(g+1)}(l,this.n.bitLength()+7>>3,e,n)},at.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},at.prototype.toBigInteger=function(){return this.x},at.prototype.negate=function(){return new at(this.q,this.x.negate().mod(this.q))},at.prototype.add=function(t){return new at(this.q,this.x.add(t.toBigInteger()).mod(this.q))},at.prototype.subtract=function(t){return new at(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},at.prototype.multiply=function(t){return new at(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},at.prototype.square=function(){return new at(this.q,this.x.square().mod(this.q))},at.prototype.divide=function(t){return new at(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},ut.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ut.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ut.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(E.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(E.ZERO))},ut.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(E.ZERO)&&!this.y.toBigInteger().equals(E.ZERO)},ut.prototype.negate=function(){return new ut(this.curve,this.x,this.y.negate(),this.z)},ut.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(E.ZERO.equals(n))return E.ZERO.equals(e)?this.twice():this.curve.getInfinity();var i=new E("3"),l=this.x.toBigInteger(),r=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),o=s.multiply(n),a=l.multiply(s),u=e.square().multiply(this.z),c=u.subtract(a.shiftLeft(1)).multiply(t.z).subtract(o).multiply(n).mod(this.curve.q),d=a.multiply(i).multiply(e).subtract(r.multiply(o)).subtract(u.multiply(e)).multiply(t.z).add(e.multiply(o)).mod(this.curve.q),h=o.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ut(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(d),h)},ut.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new E("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),i=n.multiply(this.z),l=i.multiply(n).mod(this.curve.q),r=this.curve.a.toBigInteger(),s=e.square().multiply(t);E.ZERO.equals(r)||(s=s.add(this.z.square().multiply(r)));var o=(s=s.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(l)).shiftLeft(1).multiply(i).mod(this.curve.q),a=s.multiply(t).multiply(e).subtract(l.shiftLeft(1)).shiftLeft(2).multiply(l).subtract(s.square().multiply(s)).mod(this.curve.q),u=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new ut(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(a),u)},ut.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,i=n.multiply(new E("3")),l=this.negate(),r=this;for(e=i.bitLength()-2;e>0;--e){r=r.twice();var s=i.testBit(e);s!=n.testBit(e)&&(r=r.add(s?this:l))}return r},ut.prototype.multiplyTwo=function(t,e,n){var i;i=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var l=this.curve.getInfinity(),r=this.add(e);i>=0;)l=l.twice(),t.testBit(i)?l=n.testBit(i)?l.add(r):l.add(this):n.testBit(i)&&(l=l.add(e)),--i;return l},ct.prototype.getQ=function(){return this.q},ct.prototype.getA=function(){return this.a},ct.prototype.getB=function(){return this.b},ct.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},ct.prototype.getInfinity=function(){return this.infinity},ct.prototype.fromBigInteger=function(t){return new at(this.q,t)},ct.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),i=t.substr(e+2,e);return new ut(this,this.fromBigInteger(new E(n,16)),this.fromBigInteger(new E(i,16)));default:return null}},at.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ut.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),i=this.getY().toBigInteger(),l=e(n,32);return t?i.isEven()?l.unshift(2):l.unshift(3):(l.unshift(4),l=l.concat(e(i,32))),l},ut.decodeFrom=function(t,e){var n=e.length-1,i=e.slice(1,1+n/2),l=e.slice(1+n/2,1+n);i.unshift(0),l.unshift(0);var r=new E(i),s=new E(l);return new ut(t,t.fromBigInteger(r),t.fromBigInteger(s))},ut.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,i=e.substr(2,n/2),l=e.substr(2+n/2,n/2),r=new E(i,16),s=new E(l,16);return new ut(t,t.fromBigInteger(r),t.fromBigInteger(s))},ut.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),i=n.square().subtract(this.x).subtract(t.x),l=n.multiply(this.x.subtract(i)).subtract(this.y);return new ut(this.curve,i,l)},ut.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(E.valueOf(2)),e=this.curve.fromBigInteger(E.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),i=n.square().subtract(this.x.multiply(t)),l=n.multiply(this.x.subtract(i)).subtract(this.y);return new ut(this.curve,i,l)},ut.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,i=n.multiply(new E("3")),l=this.negate(),r=this;for(e=i.bitLength()-2;e>0;--e){r=r.twice();var s=i.testBit(e);s!=n.testBit(e)&&(r=r.add2D(s?this:l))}return r},ut.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),i=this.curve.getB().toBigInteger(),l=this.curve.getQ(),r=e.multiply(e).mod(l),s=t.multiply(t).multiply(t).add(n.multiply(t)).add(i).mod(l);return r.equals(s)},ut.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ut.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(E.ONE)<0||e.compareTo(t.subtract(E.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(E.ONE)<0||n.compareTo(t.subtract(E.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var dt=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function i(t,e,i){return e?n[e]:String.fromCharCode(parseInt(i,16))}var l=new String(""),r=(Object,Array,Object.hasOwnProperty);return function(n,s){var o,a,u=n.match(t),c=u[0],d=!1;"{"===c?o={}:"["===c?o=[]:(o=[],d=!0);for(var h=[o],p=1-d,g=u.length;p<g;++p){var f;switch((c=u[p]).charCodeAt(0)){default:(f=h[0])[a||f.length]=+c,a=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(e,i)),f=h[0],!a){if(!(f instanceof Array)){a=c||l;break}a=f.length}f[a]=c,a=void 0;break;case 91:h.unshift((f=h[0])[a||f.length]=[]),a=void 0;break;case 93:h.shift();break;case 102:(f=h[0])[a||f.length]=!1,a=void 0;break;case 110:(f=h[0])[a||f.length]=null,a=void 0;break;case 116:(f=h[0])[a||f.length]=!0,a=void 0;break;case 123:h.unshift((f=h[0])[a||f.length]={}),a=void 0;break;case 125:h.shift()}}if(d){if(1!==h.length)throw new Error;o=o[0]}else if(h.length)throw new Error;if(s){var m=function(t,e){var n=t[e];if(n&&"object"==typeof n){var i=null;for(var l in n)if(r.call(n,l)&&n!==t){var o=m(n,l);void 0!==o?n[l]=o:(i||(i=[]),i.push(l))}if(i)for(var a=i.length;--a>=0;)delete n[i[a]]}return s.call(t,e,n)};o=m({"":o},"")}return o}}();void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),ht.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var i="",l=0;l<n;l++)i+="f";e=new E(i,16).xor(t).add(E.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Nt(t,e)},this.newObject=function(t){var e=ht.asn1,n=e.DERBoolean,i=e.DERInteger,l=e.DERBitString,r=e.DEROctetString,s=e.DERNull,o=e.DERObjectIdentifier,a=e.DEREnumerated,u=e.DERUTF8String,c=e.DERNumericString,d=e.DERPrintableString,h=e.DERTeletexString,p=e.DERIA5String,g=e.DERUTCTime,f=e.DERGeneralizedTime,m=e.DERSequence,v=e.DERSet,y=e.DERTaggedObject,S=e.ASN1Util.newObject,b=Object.keys(t);if(1!=b.length)throw"key of param shall be only one.";var _=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+_+":"))throw"undefined key: "+_;if("bool"==_)return new n(t[_]);if("int"==_)return new i(t[_]);if("bitstr"==_)return new l(t[_]);if("octstr"==_)return new r(t[_]);if("null"==_)return new s(t[_]);if("oid"==_)return new o(t[_]);if("enum"==_)return new a(t[_]);if("utf8str"==_)return new u(t[_]);if("numstr"==_)return new c(t[_]);if("prnstr"==_)return new d(t[_]);if("telstr"==_)return new h(t[_]);if("ia5str"==_)return new p(t[_]);if("utctime"==_)return new g(t[_]);if("gentime"==_)return new f(t[_]);if("seq"==_){for(var C=t[_],E=[],w=0;w<C.length;w++){var A=S(C[w]);E.push(A)}return new m({array:E})}if("set"==_){for(C=t[_],E=[],w=0;w<C.length;w++)A=S(C[w]),E.push(A);return new v({array:E})}if("tag"==_){var T=t[_];if("[object Array]"===Object.prototype.toString.call(T)&&3==T.length){var x=S(T[2]);return new y({tag:T[0],explicit:T[1],obj:x})}var I={};if(void 0!==T.explicit&&(I.explicit=T.explicit),void 0!==T.tag&&(I.tag=T.tag),void 0===T.obj)throw"obj shall be specified for 'tag'.";return I.obj=S(T.obj),new y(I)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},ht.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),i=(e=Math.floor(n/40)+"."+n%40,""),l=2;l<t.length;l+=2){var r=("00000000"+parseInt(t.substr(l,2),16).toString(2)).slice(-8);i+=r.substr(1,7),"0"==r.substr(0,1)&&(e=e+"."+new E(i,2).toString(10),i="")}return e},ht.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",i=new E(t,10).toString(2),l=7-i.length%7;7==l&&(l=0);for(var r="",s=0;s<l;s++)r+="0";for(i=r+i,s=0;s<i.length-1;s+=7){var o=i.substr(s,7);s!=i.length-7&&(o="1"+o),n+=e(parseInt(o,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",l=t.split("."),r=40*parseInt(l[0])+parseInt(l[1]);i+=e(r),l.splice(0,2);for(var s=0;s<l.length;s++)i+=n(l[s]);return i},ht.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ht.asn1.DERAbstractString=function(t){ht.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=wt(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},l.lang.extend(ht.asn1.DERAbstractString,ht.asn1.ASN1Object),ht.asn1.DERAbstractTime=function(t){ht.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var i=this.zeroPadding,l=this.localDateToUTC(t),r=String(l.getFullYear());"utc"==e&&(r=r.substr(2,2));var s=r+i(String(l.getMonth()+1),2)+i(String(l.getDate()),2)+i(String(l.getHours()),2)+i(String(l.getMinutes()),2)+i(String(l.getSeconds()),2);if(!0===n){var o=l.getMilliseconds();if(0!=o){var a=i(String(o),3);s=s+"."+(a=a.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=St(t)},this.setByDateValue=function(t,e,n,i,l,r){var s=new Date(Date.UTC(t,e-1,n,i,l,r,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},l.lang.extend(ht.asn1.DERAbstractTime,ht.asn1.ASN1Object),ht.asn1.DERAbstractStructured=function(t){ht.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},l.lang.extend(ht.asn1.DERAbstractStructured,ht.asn1.ASN1Object),ht.asn1.DERBoolean=function(){ht.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},l.lang.extend(ht.asn1.DERBoolean,ht.asn1.ASN1Object),ht.asn1.DERInteger=function(t){ht.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ht.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new E(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},l.lang.extend(ht.asn1.DERInteger,ht.asn1.ASN1Object),ht.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ht.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}ht.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var i="";for(n=0;n<t.length-1;n+=8){var l=t.substr(n,8),r=parseInt(l,2).toString(16);1==r.length&&(r="0"+r),i+=r}this.hTLV=null,this.isModified=!0,this.hV="0"+e+i},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},l.lang.extend(ht.asn1.DERBitString,ht.asn1.ASN1Object),ht.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ht.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}ht.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},l.lang.extend(ht.asn1.DEROctetString,ht.asn1.DERAbstractString),ht.asn1.DERNull=function(){ht.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l.lang.extend(ht.asn1.DERNull,ht.asn1.ASN1Object),ht.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",i=new E(t,10).toString(2),l=7-i.length%7;7==l&&(l=0);for(var r="",s=0;s<l;s++)r+="0";for(i=r+i,s=0;s<i.length-1;s+=7){var o=i.substr(s,7);s!=i.length-7&&(o="1"+o),n+=e(parseInt(o,2))}return n};ht.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",l=t.split("."),r=40*parseInt(l[0])+parseInt(l[1]);i+=e(r),l.splice(0,2);for(var s=0;s<l.length;s++)i+=n(l[s]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(t){var e=ht.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},l.lang.extend(ht.asn1.DERObjectIdentifier,ht.asn1.ASN1Object),ht.asn1.DEREnumerated=function(t){ht.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ht.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new E(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},l.lang.extend(ht.asn1.DEREnumerated,ht.asn1.ASN1Object),ht.asn1.DERUTF8String=function(t){ht.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},l.lang.extend(ht.asn1.DERUTF8String,ht.asn1.DERAbstractString),ht.asn1.DERNumericString=function(t){ht.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},l.lang.extend(ht.asn1.DERNumericString,ht.asn1.DERAbstractString),ht.asn1.DERPrintableString=function(t){ht.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},l.lang.extend(ht.asn1.DERPrintableString,ht.asn1.DERAbstractString),ht.asn1.DERTeletexString=function(t){ht.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},l.lang.extend(ht.asn1.DERTeletexString,ht.asn1.DERAbstractString),ht.asn1.DERIA5String=function(t){ht.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},l.lang.extend(ht.asn1.DERIA5String,ht.asn1.DERAbstractString),ht.asn1.DERUTCTime=function(t){ht.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=St(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=St(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},l.lang.extend(ht.asn1.DERUTCTime,ht.asn1.DERAbstractTime),ht.asn1.DERGeneralizedTime=function(t){ht.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=St(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=St(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},l.lang.extend(ht.asn1.DERGeneralizedTime,ht.asn1.DERAbstractTime),ht.asn1.DERSequence=function(t){ht.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},l.lang.extend(ht.asn1.DERSequence,ht.asn1.DERAbstractStructured),ht.asn1.DERSet=function(t){ht.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},l.lang.extend(ht.asn1.DERSet,ht.asn1.DERAbstractStructured),ht.asn1.DERTaggedObject=function(t){ht.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},l.lang.extend(ht.asn1.DERTaggedObject,ht.asn1.ASN1Object);var ht,pt,gt,ft=new function(){};function mt(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function vt(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function yt(t){for(var e="",n=0;n<t.length;n++){var i=t[n].toString(16);1==i.length&&(i="0"+i),e+=i}return e}function St(t){return yt(mt(t))}function bt(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function _t(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function Ct(t){return t.length%2==1&&(t="0"+t),bt(b(t))}function Et(t){return _(_t(t))}function wt(t){return Dt(jt(t))}function At(t){return decodeURIComponent(Ht(t))}function Tt(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function xt(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function It(t){return b(t)}function Rt(t){return It(t).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Ft(t){return _(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Nt(t,e){return"-----BEGIN "+e+"-----\r\n"+Rt(t)+"\r\n-----END "+e+"-----\r\n"}function kt(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return Ft(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Pt(t){var e,n,i,l,r,s,o,a,u,c,d;if(d=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return a=d[1],e=parseInt(a),2===a.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(d[2])-1,i=parseInt(d[3]),l=parseInt(d[4]),r=parseInt(d[5]),s=parseInt(d[6]),o=0,""!==(u=d[7])&&(c=(u.substr(1)+"00").substr(0,3),o=parseInt(c)),Date.UTC(e,n,i,l,r,s,o);throw"unsupported zulu format: "+t}function Ot(t){return~~(Pt(t)/1e3)}function Dt(t){return t.replace(/%/g,"")}function Ht(t){return t.replace(/(..)/g,"%$1")}function Lt(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var n=(t=t.toLowerCase()).split(":").length-1;if(n<2)throw e;var i=":".repeat(7-n+2),l=(t=t.replace("::",i)).split(":");if(8!=l.length)throw e;for(var r=0;r<8;r++)l[r]=("0000"+l[r]).slice(-4);return l.join("")}function Bt(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)e[n]=e[n].replace(/^0+/,""),""==e[n]&&(e[n]="0");var i=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===i)return t.slice(1,-1);var l="";for(n=0;n<i.length;n++)i[n].length>l.length&&(l=i[n]);return(t=t.replace(l,"::")).slice(1,-1)}function Vt(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?Bt(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(s){throw e}}function jt(t){for(var e=encodeURIComponent(t),n="",i=0;i<e.length;i++)"%"==e[i]?(n+=e.substr(i,3),i+=2):n=n+"%"+St(e[i]);return n}function Ut(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function qt(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map(function(t,e,n){var i=parseInt(t);if(i<0||255<i)throw"integer not in range 0-255";return("00"+i.toString(16)).slice(-2)}).join("")}catch(s){throw"malformed integer array string: "+s}}ft.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},ft.getL=function(t,e){var n=ft.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},ft.getVblen=function(t,e){var n;return""==(n=ft.getL(t,e))?-1:("8"===n.substr(0,1)?new E(n.substr(2),16):new E(n,16)).intValue()},ft.getVidx=function(t,e){var n=ft.getLblen(t,e);return n<0?n:e+2*(n+1)},ft.getV=function(t,e){var n=ft.getVidx(t,e),i=ft.getVblen(t,e);return t.substr(n,2*i)},ft.getTLV=function(t,e){return t.substr(e,2)+ft.getL(t,e)+ft.getV(t,e)},ft.getNextSiblingIdx=function(t,e){return ft.getVidx(t,e)+2*ft.getVblen(t,e)},ft.getChildIdx=function(t,e){var n=ft,i=new Array,l=n.getVidx(t,e);"03"==t.substr(e,2)?i.push(l+2):i.push(l);for(var r=n.getVblen(t,e),s=l,o=0;;){var a=n.getNextSiblingIdx(t,s);if(null==a||a-l>=2*r)break;if(o>=200)break;i.push(a),s=a,o++}return i},ft.getNthChildIdx=function(t,e,n){return ft.getChildIdx(t,e)[n]},ft.getIdxbyList=function(t,e,n,i){var l,r,s=ft;if(0==n.length){if(void 0!==i&&t.substr(e,2)!==i)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+i;return e}return l=n.shift(),r=s.getChildIdx(t,e),s.getIdxbyList(t,r[l],n,i)},ft.getTLVbyList=function(t,e,n,i){var l=ft,r=l.getIdxbyList(t,e,n);if(void 0===r)throw"can't find nthList object";if(void 0!==i&&t.substr(r,2)!=i)throw"checking tag doesn't match: "+t.substr(r,2)+"!="+i;return l.getTLV(t,r)},ft.getVbyList=function(t,e,n,i,l){var r,s,o=ft;if(void 0===(r=o.getIdxbyList(t,e,n,i)))throw"can't find nthList object";return s=o.getV(t,r),!0===l&&(s=s.substr(2)),s},ft.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],i=t.substr(0,2),l=parseInt(i,16);n[0]=new String(Math.floor(l/40)),n[1]=new String(l%40);for(var r=t.substr(2),s=[],o=0;o<r.length/2;o++)s.push(parseInt(r.substr(2*o,2),16));var a=[],u="";for(o=0;o<s.length;o++)128&s[o]?u+=e((127&s[o]).toString(2),7):(u+=e((127&s[o]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=n.join(".");return a.length>0&&(c=c+"."+a.join(".")),c},ft.dump=function(t,e,n,i){var l=ft,r=l.getV,s=l.dump,o=l.getChildIdx,a=t;t instanceof ht.asn1.ASN1Object&&(a=t.getEncodedHex());var u=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===i&&(i="");var c=e.ommit_long_octet;if("01"==a.substr(n,2))return"00"==(d=r(a,n))?i+"BOOLEAN FALSE\n":i+"BOOLEAN TRUE\n";if("02"==a.substr(n,2))return i+"INTEGER "+u(d=r(a,n),c)+"\n";if("03"==a.substr(n,2))return i+"BITSTRING "+u(d=r(a,n),c)+"\n";if("04"==a.substr(n,2)){var d=r(a,n);return l.isASN1HEX(d)?(C=i+"OCTETSTRING, encapsulates\n")+s(d,e,0,i+"  "):i+"OCTETSTRING "+u(d,c)+"\n"}if("05"==a.substr(n,2))return i+"NULL\n";if("06"==a.substr(n,2)){var h=r(a,n),p=ht.asn1.ASN1Util.oidHexToInt(h),g=ht.asn1.x509.OID.oid2name(p),f=p.replace(/\./g," ");return""!=g?i+"ObjectIdentifier "+g+" ("+f+")\n":i+"ObjectIdentifier ("+f+")\n"}if("0c"==a.substr(n,2))return i+"UTF8String '"+At(r(a,n))+"'\n";if("13"==a.substr(n,2))return i+"PrintableString '"+At(r(a,n))+"'\n";if("14"==a.substr(n,2))return i+"TeletexString '"+At(r(a,n))+"'\n";if("16"==a.substr(n,2))return i+"IA5String '"+At(r(a,n))+"'\n";if("17"==a.substr(n,2))return i+"UTCTime "+At(r(a,n))+"\n";if("18"==a.substr(n,2))return i+"GeneralizedTime "+At(r(a,n))+"\n";if("30"==a.substr(n,2)){if("3000"==a.substr(n,4))return i+"SEQUENCE {}\n";C=i+"SEQUENCE\n";var m=e;if((2==(S=o(a,n)).length||3==S.length)&&"06"==a.substr(S[0],2)&&"04"==a.substr(S[S.length-1],2)){g=l.oidname(r(a,S[0]));var v=JSON.parse(JSON.stringify(e));v.x509ExtName=g,m=v}for(var y=0;y<S.length;y++)C+=s(a,m,S[y],i+"  ");return C}if("31"==a.substr(n,2)){C=i+"SET\n";var S=o(a,n);for(y=0;y<S.length;y++)C+=s(a,e,S[y],i+"  ");return C}var b=parseInt(a.substr(n,2),16);if(0!=(128&b)){var _=31&b;if(0!=(32&b)){var C=i+"["+_+"]\n";for(S=o(a,n),y=0;y<S.length;y++)C+=s(a,e,S[y],i+"  ");return C}return"68747470"==(d=r(a,n)).substr(0,8)&&(d=At(d)),"subjectAltName"===e.x509ExtName&&2==_&&(d=At(d)),i+"["+_+"] "+d+"\n"}return i+"UNKNOWN("+a.substr(n,2)+") "+r(a,n)+"\n"},ft.isASN1HEX=function(t){var e=ft;if(t.length%2==1)return!1;var n=e.getVblen(t,0),i=t.substr(0,2),l=e.getL(t,0);return t.length-i.length-l.length==2*n},ft.oidname=function(t){var e=ht.asn1;ht.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),void 0!==ht.asn1.x509&&ht.asn1.x509||(ht.asn1.x509={}),ht.asn1.x509.Certificate=function(t){ht.asn1.x509.Certificate.superclass.constructor.call(this);var e=ht.asn1,n=e.DERSequence,i=e.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new ht.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Rt(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},l.lang.extend(ht.asn1.x509.Certificate,ht.asn1.ASN1Object),ht.asn1.x509.TBSCertificate=function(t){ht.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=ht.asn1,n=e.DERSequence,i=e.DERInteger,l=e.DERTaggedObject,r=e.x509,s=r.Time,o=r.X500Name,a=r.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new l({obj:new i({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new i(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new r.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new o(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new s(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new s(t)},this.setSubjectByParam=function(t){this.asn1Subject=new o(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new a(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Mt.getKey(t);this.asn1SubjPKey=new a(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){ht.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new n({array:this.extensionsArray}),i=new l({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(i)}var r=new n({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},l.lang.extend(ht.asn1.x509.TBSCertificate,ht.asn1.ASN1Object),ht.asn1.x509.Extension=function(t){ht.asn1.x509.Extension.superclass.constructor.call(this);var e=ht.asn1,n=e.DERObjectIdentifier,i=e.DEROctetString,l=e.DERBoolean,r=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new i({hex:this.getExtnValueHex()}),s=new Array;return s.push(t),this.critical&&s.push(new l),s.push(e),new r({array:s}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},l.lang.extend(ht.asn1.x509.Extension,ht.asn1.ASN1Object),ht.asn1.x509.Extension.appendByNameToArray=function(t,e,n){var i=t.toLowerCase(),l=ht.asn1.x509;if("basicconstraints"==i){var r=new l.BasicConstraints(e);n.push(r)}else if("keyusage"==i)r=new l.KeyUsage(e),n.push(r);else if("crldistributionpoints"==i)r=new l.CRLDistributionPoints(e),n.push(r);else if("extkeyusage"==i)r=new l.ExtKeyUsage(e),n.push(r);else if("authoritykeyidentifier"==i)r=new l.AuthorityKeyIdentifier(e),n.push(r);else if("authorityinfoaccess"==i)r=new l.AuthorityInfoAccess(e),n.push(r);else if("subjectaltname"==i)r=new l.SubjectAltName(e),n.push(r);else{if("issueraltname"!=i)throw"unsupported extension name: "+t;r=new l.IssuerAltName(e),n.push(r)}},ht.asn1.x509.KeyUsage=function(t){ht.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Yt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new ht.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var n=t.names,i="000000000",l=0;l<n.length;l++)for(var r=0;r<e.length;r++)n[l]===e[r]&&(i=i.substring(0,r)+"1"+i.substring(r+1,i.length));this.asn1ExtnValue=new ht.asn1.DERBitString({bin:i})}},l.lang.extend(ht.asn1.x509.KeyUsage,ht.asn1.x509.Extension),ht.asn1.x509.BasicConstraints=function(t){ht.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new ht.asn1.DERBoolean),this.pathLen>-1&&t.push(new ht.asn1.DERInteger({int:this.pathLen}));var e=new ht.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},l.lang.extend(ht.asn1.x509.BasicConstraints,ht.asn1.x509.Extension),ht.asn1.x509.CRLDistributionPoints=function(t){ht.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=ht.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new n.GeneralNames([{uri:t}]),i=new n.DistributionPointName(e),l=new n.DistributionPoint({dpobj:i});this.setByDPArray([l])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},l.lang.extend(ht.asn1.x509.CRLDistributionPoints,ht.asn1.x509.Extension),ht.asn1.x509.ExtKeyUsage=function(t){ht.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=ht.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var i=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(i)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},l.lang.extend(ht.asn1.x509.ExtKeyUsage,ht.asn1.x509.Extension),ht.asn1.x509.AuthorityKeyIdentifier=function(t){ht.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=ht.asn1,n=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var i=new e.DERSequence({array:t});return this.asn1ExtnValue=i,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new ht.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new ht.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new ht.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},l.lang.extend(ht.asn1.x509.AuthorityKeyIdentifier,ht.asn1.x509.Extension),ht.asn1.x509.AuthorityInfoAccess=function(t){ht.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=ht.asn1,i=n.DERSequence,l=0;l<t.length;l++){var r=new i({array:[new n.DERObjectIdentifier(t[l].accessMethod),new n.x509.GeneralName(t[l].accessLocation)]});e.push(r)}this.asn1ExtnValue=new i({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},l.lang.extend(ht.asn1.x509.AuthorityInfoAccess,ht.asn1.x509.Extension),ht.asn1.x509.SubjectAltName=function(t){ht.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ht.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},l.lang.extend(ht.asn1.x509.SubjectAltName,ht.asn1.x509.Extension),ht.asn1.x509.IssuerAltName=function(t){ht.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ht.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},l.lang.extend(ht.asn1.x509.IssuerAltName,ht.asn1.x509.Extension),ht.asn1.x509.CRL=function(t){ht.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new ht.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new ht.asn1.DERBitString({hex:"00"+this.hexSig});var t=new ht.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Rt(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},l.lang.extend(ht.asn1.x509.CRL,ht.asn1.ASN1Object),ht.asn1.x509.TBSCertList=function(t){ht.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=ht.asn1,n=e.DERSequence,i=e.x509,l=i.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new i.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new l(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new l(t)},this.addRevokedCert=function(t,e){var n={};null!=t&&null!=t&&(n.sn=t),null!=e&&null!=e&&(n.time=e);var l=new i.CRLEntry(n);this.aRevokedCert.push(l)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new n({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new n({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},l.lang.extend(ht.asn1.x509.TBSCertList,ht.asn1.ASN1Object),ht.asn1.x509.CRLEntry=function(t){ht.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=ht.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},l.lang.extend(ht.asn1.x509.CRLEntry,ht.asn1.ASN1Object),ht.asn1.x509.X500Name=function(t){ht.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e,n=ht.asn1,i=n.x509,l=kt;this.setByString=function(t){var e=t.split("/");e.shift();for(var n=[],l=0;l<e.length;l++)if(e[l].match(/^[^=]+=.+$/))n.push(e[l]);else{var r=n.length-1;n[r]=n[r]+"/"+e[l]}for(l=0;l<n.length;l++)this.asn1Array.push(new i.RDN({str:n[l]}))},this.setByLdapString=function(t){var e=i.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new ht.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new n.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer&&((e=new Yt).hex=l(t.certissuer),this.hTLV=e.getIssuerHex()),void 0!==t.certsubject&&((e=new Yt).hex=l(t.certsubject),this.hTLV=e.getSubjectHex()))},l.lang.extend(ht.asn1.x509.X500Name,ht.asn1.ASN1Object),ht.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map(function(t){return t.replace(/,/,"\\,")})).join(",")},ht.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,i=[],l=0;e.length>0;l++){var r=e.shift();if(!0===n){var s=(i.pop()+","+r).replace(/\\,/g,",");i.push(s),n=!1}else i.push(r);"\\"===r.substr(-1,1)&&(n=!0)}return(i=i.map(function(t){return t.replace("/","\\/")})).reverse(),"/"+i.join("/")},ht.asn1.x509.RDN=function(t){ht.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new ht.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=ht.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new ht.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},l.lang.extend(ht.asn1.x509.RDN,ht.asn1.ASN1Object),ht.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,i=[],l=0;e.length>0;l++){var r=e.shift();if(!0===n){var s=(i.pop()+"+"+r).replace(/\\\+/g,"+");i.push(s),n=!1}else i.push(r);"\\"===r.substr(-1,1)&&(n=!0)}var o=!1,a=[];for(l=0;i.length>0;l++){if(r=i.shift(),!0===o){var u=a.pop();r.match(/"$/)?(s=(u+"+"+r).replace(/^([^=]+)="(.*)"$/,"$1=$2"),a.push(s),o=!1):a.push(u+"+"+r)}else a.push(r);r.match(/^[^=]+="/)&&(o=!0)}return a},ht.asn1.x509.AttributeTypeAndValue=function(t){ht.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=ht.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=ht.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,n){if("utf8"==t)return new e.DERUTF8String({str:n});if("prn"==t)return new e.DERPrintableString({str:n});if("tel"==t)return new e.DERTeletexString({str:n});if("ia5"==t)return new e.DERIA5String({str:n});throw"unsupported directory string type: type="+t+" value="+n},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},l.lang.extend(ht.asn1.x509.AttributeTypeAndValue,ht.asn1.ASN1Object),ht.asn1.x509.SubjectPublicKeyInfo=function(t){ht.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=ht.asn1,n=e.DERInteger,i=e.DERBitString,l=e.DERObjectIdentifier,r=e.DERSequence,s=e.ASN1Util.newObject,o=e.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new r({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof st){var e=s({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new o({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+e})}}catch(u){}try{if(t instanceof ht.crypto.ECDSA){var r=new l({name:t.curveName});this.asn1AlgId=new o({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new i({hex:"00"+t.pubKeyHex})}}catch(u){}try{if(t instanceof ht.crypto.DSA){r=new s({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new o({name:"dsa",asn1params:r});var a=new n({bigint:t.y});this.asn1SubjPKey=new i({hex:"00"+a.getEncodedHex()})}}catch(u){}},void 0!==t&&this.setPubKey(t)},l.lang.extend(ht.asn1.x509.SubjectPublicKeyInfo,ht.asn1.ASN1Object),ht.asn1.x509.Time=function(t){ht.asn1.x509.Time.superclass.constructor.call(this);var e=ht.asn1,n=e.DERUTCTime,i=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new i(this.timeParams):"utc"==this.type?new n:new i,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},l.lang.extend(ht.asn1.x509.Time,ht.asn1.ASN1Object),ht.asn1.x509.AlgorithmIdentifier=function(t){ht.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=ht.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},l.lang.extend(ht.asn1.x509.AlgorithmIdentifier,ht.asn1.ASN1Object),ht.asn1.x509.GeneralName=function(t){ht.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=ht.asn1,i=n.DEROctetString,l=n.DERIA5String,r=n.DERTaggedObject,s=n.ASN1Object,o=n.x509.X500Name,a=kt;this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new l({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new l({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new l({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,n=new o({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,n=new o({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var u=null;if((d=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=d.indexOf("-----BEGIN ")&&(u=a(d)),null==u)throw"certissuer param not cert";(h=new Yt).hex=u;var c=h.getIssuerHex();(n=new s).hTLV=c}if(void 0!==t.certsubj){var d,h;if(this.type="dn",this.explicit=!0,u=null,(d=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=d.indexOf("-----BEGIN ")&&(u=a(d)),null==u)throw"certsubj param not cert";(h=new Yt).hex=u,c=h.getSubjectHex(),(n=new s).hTLV=c}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var p,g=t.ip,f="malformed IP address";if(g.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(p=qt("["+g.split(".").join(",")+"]")).length)throw f}else if(g.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))p=Lt(g);else{if(!g.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw f;p=g}n=new i({hex:p})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new r({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},l.lang.extend(ht.asn1.x509.GeneralName,ht.asn1.ASN1Object),ht.asn1.x509.GeneralNames=function(t){ht.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=ht.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var i=new e.x509.GeneralName(t[n]);this.asn1Array.push(i)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},l.lang.extend(ht.asn1.x509.GeneralNames,ht.asn1.ASN1Object),ht.asn1.x509.DistributionPointName=function(t){ht.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=ht.asn1,n=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},l.lang.extend(ht.asn1.x509.DistributionPointName,ht.asn1.ASN1Object),ht.asn1.x509.DistributionPoint=function(t){ht.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=ht.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},l.lang.extend(ht.asn1.x509.DistributionPoint,ht.asn1.ASN1Object),ht.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=new ht.asn1.DERObjectIdentifier({oid:this.name2oidList[t]});return this.objCache[t]=e,e},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=new ht.asn1.DERObjectIdentifier({oid:this.atype2oidList[t]});return this.objCache[t]=e,e}},ht.asn1.x509.OID.oid2name=function(t){var e=ht.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},ht.asn1.x509.OID.oid2atype=function(t){var e=ht.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},ht.asn1.x509.OID.name2oid=function(t){var e=ht.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},ht.asn1.x509.X509Util={},ht.asn1.x509.X509Util.newCertPEM=function(t){var e=ht.asn1.x509,n=e.Certificate,i=new(0,e.TBSCertificate);if(void 0===t.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(i.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var l=0;l<t.ext.length;l++)for(key in t.ext[l])i.appendExtensionByName(key,t.ext[l][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var r=null;return t.cakey&&(r=new n({tbscertobj:i,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Mt.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(r=new n({tbscertobj:i})).setSignatureHex(t.sighex),r.getPEMString()},void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),void 0!==ht.asn1.cms&&ht.asn1.cms||(ht.asn1.cms={}),ht.asn1.cms.Attribute=function(t){var e=ht.asn1;e.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,n,i;t=new e.DERObjectIdentifier({oid:this.attrTypeOid}),n=new e.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(l){throw"fail valueSet.getEncodedHex in Attribute(1)/"+l}i=new e.DERSequence({array:[t,n]});try{this.hTLV=i.getEncodedHex()}catch(l){throw"failed seq.getEncodedHex in Attribute(2)/"+l}return this.hTLV}},l.lang.extend(ht.asn1.cms.Attribute,ht.asn1.ASN1Object),ht.asn1.cms.ContentType=function(t){var e=ht.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==t&&(n=new e.DERObjectIdentifier(t),this.valueList=[n])},l.lang.extend(ht.asn1.cms.ContentType,ht.asn1.cms.Attribute),ht.asn1.cms.MessageDigest=function(t){var e,n=ht,i=n.asn1,l=i.DEROctetString,r=i.cms;r.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t&&(t.eciObj instanceof r.EncapsulatedContentInfo&&"string"==typeof t.hashAlg?((e=new l({hex:n.crypto.Util.hashHex(t.eciObj.eContentValueHex,t.hashAlg)})).getEncodedHex(),this.valueList=[e]):((e=new l(t)).getEncodedHex(),this.valueList=[e]))},l.lang.extend(ht.asn1.cms.MessageDigest,ht.asn1.cms.Attribute),ht.asn1.cms.SigningTime=function(t){var e=ht.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var n=new e.x509.Time(t);try{n.getEncodedHex()}catch(o){throw"SigningTime.getEncodedHex() failed/"+o}this.valueList=[n]}},l.lang.extend(ht.asn1.cms.SigningTime,ht.asn1.cms.Attribute),ht.asn1.cms.SigningCertificate=function(t){var e=ht,n=e.asn1,i=n.DERSequence,l=n.cms;l.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var r=[],s=0;s<t.length;s++){var o=kt(t[s]),a=e.crypto.Util.hashHex(o,"sha1"),u=new n.DEROctetString({hex:a});u.getEncodedHex();var c=new l.IssuerAndSerialNumber({cert:t[s]});c.getEncodedHex();var d=new i({array:[u,c]});d.getEncodedHex(),r.push(d)}var h=new i({array:r});h.getEncodedHex(),this.valueList=[h]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},l.lang.extend(ht.asn1.cms.SigningCertificate,ht.asn1.cms.Attribute),ht.asn1.cms.SigningCertificateV2=function(t){var e=ht.asn1,n=e.DERSequence,i=e.x509,l=e.cms,r=ht.crypto;if(l.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,s){for(var o=[],a=0;a<t.length;a++){var u=kt(t[a]),c=[];"sha256"!==s&&c.push(new i.AlgorithmIdentifier({name:s}));var d=r.Util.hashHex(u,s),h=new e.DEROctetString({hex:d});h.getEncodedHex(),c.push(h);var p=new l.IssuerAndSerialNumber({cert:t[a]});p.getEncodedHex(),c.push(p);var g=new n({array:c});g.getEncodedHex(),o.push(g)}var f=new n({array:o});f.getEncodedHex(),this.valueList=[f]},void 0!==t&&"object"==typeof t.array){var s="sha256";"string"==typeof t.hashAlg&&(s=t.hashAlg),this.setCerts(t.array,s)}},l.lang.extend(ht.asn1.cms.SigningCertificateV2,ht.asn1.cms.Attribute),ht.asn1.cms.IssuerAndSerialNumber=function(t){var e=ht.asn1,n=e.DERInteger,i=e.x509.X500Name,l=Yt;e.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var e=kt(t),r=new l;r.hex=e;var s=r.getIssuerHex();this.dIssuer=new i,this.dIssuer.hTLV=s;var o=r.getSerialNumberHex();this.dSerial=new n({hex:o})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(this.dIssuer=t.issuer instanceof i?t.issuer:new i(t.issuer),this.dSerial=t.serial instanceof n?t.serial:new n(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},l.lang.extend(ht.asn1.cms.IssuerAndSerialNumber,ht.asn1.ASN1Object),ht.asn1.cms.AttributeList=function(t){var e=ht.asn1,n=e.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof n.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},l.lang.extend(ht.asn1.cms.AttributeList,ht.asn1.ASN1Object),ht.asn1.cms.SignerInfo=function(t){var e=ht.asn1,n=e.DERTaggedObject,i=e.cms,l=i.AttributeList,r=i.ContentType,s=i.EncapsulatedContentInfo,o=i.MessageDigest,a=i.SignedData,u=e.x509.AlgorithmIdentifier,c=ht.crypto,d=Mt;i.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new e.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new l,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new l,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new i.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof s&&(this.dSignedAttrs.add(new r({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new o({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof a&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new u({name:t.hashAlg})))},this.sign=function(t,n){this.dSigAlg=new u({name:n});var i=this.dSignedAttrs.getEncodedHex(),l=d.getKey(t),r=new c.Signature({alg:n});r.init(l),r.updateHex(i);var s=r.sign();this.dSig=new e.DEROctetString({hex:s})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof l&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),i=null;this.dUnsignedAttrs.length()>0&&(i=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=i&&r.push(i);var s=new e.DERSequence({array:r});return this.hTLV=s.getEncodedHex(),this.hTLV}},l.lang.extend(ht.asn1.cms.SignerInfo,ht.asn1.ASN1Object),ht.asn1.cms.EncapsulatedContentInfo=function(t){var e=ht.asn1,n=e.DERTaggedObject,i=e.DERSequence,l=e.DERObjectIdentifier,r=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new l({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){this.dEContentType=t.match(/^[0-2][.][0-9.]+$/)?new l({oid:t}):new l({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=wt(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=wt(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new r({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var l=new i({array:e});return this.hTLV=l.getEncodedHex(),this.hTLV}},l.lang.extend(ht.asn1.cms.EncapsulatedContentInfo,ht.asn1.ASN1Object),ht.asn1.cms.ContentInfo=function(t){var e=ht.asn1,n=e.DERTaggedObject,i=e.DERSequence,l=e.x509;ht.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=l.OID.name2obj(t))},this.getEncodedHex=function(){var t=new n({obj:this.dContent,tag:"a0",explicit:!0}),e=new i({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},l.lang.extend(ht.asn1.cms.ContentInfo,ht.asn1.ASN1Object),ht.asn1.cms.SignedData=function(t){var e=ht.asn1,n=e.ASN1Object,i=e.DERInteger,l=e.DERSet,r=e.DERSequence,s=e.DERTaggedObject,o=e.cms,a=o.EncapsulatedContentInfo,u=o.SignerInfo,c=o.ContentInfo,d=e.x509.AlgorithmIdentifier;ht.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new i({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(t){var e=kt(t),i=new n;i.hTLV=e,this.certificateList.push(i)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var n=new d({name:this.digestAlgNameList[e]});t.push(n)}this.dDigestAlgs=new l({array:t})}var i=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var o=new l({array:this.certificateList});this.dCerts=new s({obj:o,tag:"a0",explicit:!1})}null!=this.dCerts&&i.push(this.dCerts);var a=new l({array:this.signerInfoList});i.push(a);var u=new r({array:i});return this.hTLV=u.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Nt(this.getContentInfoEncodedHex(),"CMS")}},l.lang.extend(ht.asn1.cms.SignedData,ht.asn1.ASN1Object),ht.asn1.cms.CMSUtil=new function(){},ht.asn1.cms.CMSUtil.newSignedData=function(t){var e=ht.asn1,n=e.cms,i=n.SignerInfo,l=n.SigningTime,r=n.SigningCertificate,s=n.SigningCertificateV2,o=e.cades.SignaturePolicyIdentifier,a=new(0,n.SignedData);if(a.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var u=0;u<t.certs.length;u++)a.addCertificatesByPEM(t.certs[u]);for(a.signerInfoList=[],u=0;u<t.signerInfos.length;u++){var c=t.signerInfos[u],d=new i;for(attrName in d.setSignerIdentifier(c.signerCert),d.setForContentAndHash({sdObj:a,eciObj:a.dEncapContentInfo,hashAlg:c.hashAlg}),c.sAttr){var h=c.sAttr[attrName];if("SigningTime"==attrName){var p=new l(h);d.dSignedAttrs.add(p)}"SigningCertificate"==attrName&&(p=new r(h),d.dSignedAttrs.add(p)),"SigningCertificateV2"==attrName&&(p=new s(h),d.dSignedAttrs.add(p)),"SignaturePolicyIdentifier"==attrName&&(p=new o(h),d.dSignedAttrs.add(p))}d.sign(c.signerPrvKey,c.sigAlg),a.signerInfoList.push(d)}return a},ht.asn1.cms.CMSUtil.verifySignedData=function(t){var e=ft.getVbyList,n=ft.getTLVbyList,i=ft.getIdxbyList,l=ft.getChildIdx,r=ft.getTLV,s=ft.oidname,o=ht.crypto.Util.hashHex;void 0===t.cms&&(0,ht.lang.String.isHex)(t.cms);var a=t.cms,u=function(t,r){var o=r.idx;r.signerid_issuer1=n(t,o,[1,0],"30"),r.signerid_serial1=e(t,o,[1,1],"02"),r.hashalg=s(e(t,o,[2,0],"06"));var a=i(t,o,[3],"a0");r.idxSignedAttrs=a,c(t,r,a);var u=l(t,o).length;if(u<6)throw"malformed SignerInfo";r.sigalg=s(e(t,o,[u-2,0],"06")),r.sigval=e(t,o,[u-1],"04")},c=function(t,n,i){var r=l(t,i);n.signedAttrIdxList=r;for(var s=0;s<r.length;s++){var o,a=r[s],u=e(t,a,[0],"06");"2a864886f70d010905"===u?(o=At(e(t,a,[1,0])),n.saSigningTime=o):"2a864886f70d010904"===u&&(o=e(t,a,[1,0],"04"),n.saMessageDigest=o)}},d=function(t,e,n,i){n.verifyDetail={};var s=n.verifyDetail,a=e.parse.econtent,u=n.hashalg,c=n.saMessageDigest;s.validMessageDigest=!1,o(a,u)===c&&(s.validMessageDigest=!0),function(t,e,n,i){var s,o=e.parse.certsIdx;if(void 0===e.certs){s=[],e.certkeys=[];for(var a=l(t,o),u=0;u<a.length;u++){var c=r(t,a[u]),d=new Yt;d.readCertHex(c),s[u]=d,e.certkeys[u]=d.getPublicKey()}e.certs=s}else s=e.certs;for(e.cccc=s.length,e.cccci=a.length,u=0;u<s.length;u++){var h=d.getIssuerHex(),p=d.getSerialNumberHex();n.signerid_issuer1===h&&n.signerid_serial1===p&&(n.certkey_idx=u)}}(t,e,n),s.validSignatureValue=!1;var d=n.sigalg,h="31"+r(t,n.idxSignedAttrs).substr(2);n.signedattrshex=h;var p=e.certs[n.certkey_idx].getPublicKey(),g=new ht.crypto.Signature({alg:d});g.init(p),g.updateHex(h);var f=g.verify(n.sigval);s.validSignatureValue_isValid=f,!0===f&&(s.validSignatureValue=!0),n.isValid=!1,s.validMessageDigest&&s.validSignatureValue&&(n.isValid=!0)},h={isValid:!1,parse:{}};return function(t,n){if("2a864886f70d010702"!==e(t,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=e(t,0,[1,0,2,1,0]),function(t,e){for(var n,l=3;l<6;l++)if(void 0!==(n=i(t,0,[1,0,l]))){var r=t.substr(n,2);"a0"===r&&(e.certsIdx=n),"a1"===r&&(e.revinfosIdx=n),"31"===r&&(e.signerinfosIdx=n)}}(t,n),n.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var i=l(t,n);e.signerInfoIdxList=i;for(var r=0;r<i.length;r++){var s={idx:i[r]};u(t,s),e.signerInfos.push(s)}}}(t,n)}(a,h.parse),function(t,e){for(var n=e.parse.signerInfos,i=n.length,l=!0,r=0;r<i;r++){var s=n[r];d(t,e,s),s.isValid||(l=!1)}e.isValid=l}(a,h),h},void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),void 0!==ht.asn1.tsp&&ht.asn1.tsp||(ht.asn1.tsp={}),ht.asn1.tsp.Accuracy=function(t){var e=ht.asn1,n=e.DERInteger,i=e.DERSequence,l=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,r=null,s=[];if(null!=this.seconds&&(t=new n({int:this.seconds}),s.push(t)),null!=this.millis){var o=new n({int:this.millis});e=new l({obj:o,tag:"80",explicit:!1}),s.push(e)}if(null!=this.micros){var a=new n({int:this.micros});r=new l({obj:a,tag:"81",explicit:!1}),s.push(r)}var u=new i({array:s});return this.hTLV=u.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},l.lang.extend(ht.asn1.tsp.Accuracy,ht.asn1.ASN1Object),ht.asn1.tsp.MessageImprint=function(t){var e=ht.asn1,n=e.DERSequence,i=e.DEROctetString,l=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new l({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new i({hex:t.hashValue})))},l.lang.extend(ht.asn1.tsp.MessageImprint,ht.asn1.ASN1Object),ht.asn1.tsp.TimeStampReq=function(t){var e=ht.asn1,n=e.DERSequence,i=e.DERInteger,l=e.DERBoolean,r=e.DERObjectIdentifier,s=e.tsp,o=s.MessageImprint;s.TimeStampReq.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof o?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new o(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new l);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new r(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new i(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},l.lang.extend(ht.asn1.tsp.TimeStampReq,ht.asn1.ASN1Object),ht.asn1.tsp.TSTInfo=function(t){var e=ht.asn1,n=e.DERSequence,i=e.DERInteger,l=e.DERBoolean,r=e.DERGeneralizedTime,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint,u=o.Accuracy,c=e.x509.X500Name;if(o.TSTInfo.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new s({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new a(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new i(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new r(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new u(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new l),void 0!==t.nonce&&(this.dNonce=new i(t.nonce)),void 0!==t.tsa&&(this.dTsa=new c(t.tsa))}},l.lang.extend(ht.asn1.tsp.TSTInfo,ht.asn1.ASN1Object),ht.asn1.tsp.TimeStampResp=function(t){var e=ht.asn1,n=e.DERSequence,i=e.ASN1Object,l=e.tsp,r=l.PKIStatusInfo;l.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new r(t.status)),void 0!==t.tst&&t.tst instanceof i&&(this.dTST=t.tst.getContentInfo()))},l.lang.extend(ht.asn1.tsp.TimeStampResp,ht.asn1.ASN1Object),ht.asn1.tsp.PKIStatusInfo=function(t){var e=ht.asn1,n=e.DERSequence,i=e.tsp,l=i.PKIStatus,r=i.PKIFreeText,s=i.PKIFailureInfo;i.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new l(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new r({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new s(t.failinfo)))},l.lang.extend(ht.asn1.tsp.PKIStatusInfo,ht.asn1.ASN1Object),ht.asn1.tsp.PKIStatus=function(t){var e=ht.asn1,n=e.DERInteger,i=e.tsp,l=i.PKIStatus;if(i.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var r=l.valueList;if(void 0===r[t.name])throw"name undefined: "+t.name;this.dStatus=new n({int:r[t.name]})}else this.dStatus=new n(t)},l.lang.extend(ht.asn1.tsp.PKIStatus,ht.asn1.ASN1Object),ht.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},ht.asn1.tsp.PKIFreeText=function(t){var e=ht.asn1,n=e.DERSequence,i=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new i({str:this.textList[e]}));var l=new n({array:t});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},l.lang.extend(ht.asn1.tsp.PKIFreeText,ht.asn1.ASN1Object),ht.asn1.tsp.PKIFailureInfo=function(t){var e=ht.asn1,n=e.DERBitString,i=e.tsp.PKIFailureInfo;if(i.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new n;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var l=i.valueList;if(void 0===l[t.name])throw"name undefined: "+t.name;this.value=l[t.name]}else"number"==typeof t.int&&(this.value=t.int)},l.lang.extend(ht.asn1.tsp.PKIFailureInfo,ht.asn1.ASN1Object),ht.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},ht.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},ht.asn1.tsp.SimpleTSAAdapter=function(t){var e=ht.asn1.tsp,n=ht.crypto.Util.hashHex;e.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,i){var l=n(t,i);this.params.tstInfo.messageImprint={hashAlg:i,hashValue:l},this.params.tstInfo.serialNumber={int:this.serial++};var r=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:r},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},l.lang.extend(ht.asn1.tsp.SimpleTSAAdapter,ht.asn1.tsp.AbstractTSAAdapter),ht.asn1.tsp.FixedTSAAdapter=function(t){var e=ht.asn1.tsp,n=ht.crypto.Util.hashHex;e.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,i){var l=n(t,i);return this.params.tstInfo.messageImprint={hashAlg:i,hashValue:l},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},l.lang.extend(ht.asn1.tsp.FixedTSAAdapter,ht.asn1.tsp.AbstractTSAAdapter),ht.asn1.tsp.TSPUtil=new function(){},ht.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=ht.asn1,n=e.cms,i=e.tsp.TSTInfo,l=new n.SignedData,r=new i(t.tstInfo).getEncodedHex();if(l.dEncapContentInfo.setContentValue({hex:r}),l.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var s=0;s<t.certs.length;s++)l.addCertificatesByPEM(t.certs[s]);var o=l.signerInfoList[0];o.setSignerIdentifier(t.signerCert),o.setForContentAndHash({sdObj:l,eciObj:l.dEncapContentInfo,hashAlg:t.hashAlg});var a=new n.SigningCertificate({array:[t.signerCert]});return o.dSignedAttrs.add(a),o.sign(t.signerPrvKey,t.sigAlg),l},ht.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=ft,n=e.getV,i=e.getTLV,l={certreq:!1},r=(0,e.getChildIdx)(t,0);if(r.length<2)throw"TimeStampReq must have at least 2 items";var s=i(t,r[1]);l.mi=ht.asn1.tsp.TSPUtil.parseMessageImprint(s);for(var o=2;o<r.length;o++){var a=r[o],u=t.substr(a,2);if("06"==u){var c=n(t,a);l.policy=e.hextooidstr(c)}"02"==u&&(l.nonce=n(t,a)),"01"==u&&(l.certreq=!0)}return l},ht.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=ft,n=e.getChildIdx,i=e.getV,l=e.getIdxbyList,r={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";n(t,0);var s=i(t,l(t,0,[0,0])),o=e.hextooidstr(s),a=ht.asn1.x509.OID.oid2name(o);if(""==a)throw"hashAlg name undefined: "+o;var u=a,c=l(t,0,[1]);return r.hashAlg=u,r.hashValue=i(t,c),r},void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),void 0!==ht.asn1.cades&&ht.asn1.cades||(ht.asn1.cades={}),ht.asn1.cades.SignaturePolicyIdentifier=function(t){var e=ht.asn1,n=e.DERObjectIdentifier,i=e.DERSequence,l=e.cades,r=l.OtherHashAlgAndValue;if(l.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var s=new i({array:[new n({oid:t.oid}),new r(t.hash)]});this.valueList=[s]}},l.lang.extend(ht.asn1.cades.SignaturePolicyIdentifier,ht.asn1.cms.Attribute),ht.asn1.cades.OtherHashAlgAndValue=function(t){var e=ht.asn1,n=e.DERSequence,i=e.DEROctetString,l=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new n({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new l({name:t.alg}),this.dHash=new i({hex:t.hash}))},l.lang.extend(ht.asn1.cades.OtherHashAlgAndValue,ht.asn1.ASN1Object),ht.asn1.cades.SignatureTimeStamp=function(t){var e=ht.asn1,n=e.ASN1Object;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var i=new n;this.tstHex=t.tst,i.hTLV=this.tstHex,i.getEncodedHex(),this.valueList=[i]}else if(!(t.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},l.lang.extend(ht.asn1.cades.SignatureTimeStamp,ht.asn1.cms.Attribute),ht.asn1.cades.CompleteCertificateRefs=function(t){var e=ht.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var i=new e.OtherCertID(t[n]);this.valueList.push(i)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},l.lang.extend(ht.asn1.cades.CompleteCertificateRefs,ht.asn1.cms.Attribute),ht.asn1.cades.OtherCertID=function(t){var e=ht.asn1,n=e.cms,i=e.cades;i.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new i.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},l.lang.extend(ht.asn1.cades.OtherCertID,ht.asn1.ASN1Object),ht.asn1.cades.OtherHash=function(t){var e=ht.asn1,n=e.cades,i=n.OtherHashAlgAndValue,l=ht.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=kt(t),n=l(e,this.alg);this.dOtherHash=new i({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new i(t))},l.lang.extend(ht.asn1.cades.OtherHash,ht.asn1.ASN1Object),ht.asn1.cades.CAdESUtil=new function(){},ht.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},ht.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=ft.getChildIdx,n=ft.getTLV,i=ft.getIdxbyList,l=ht.asn1,r=l.ASN1Object,s=l.cms.SignedData,o=l.cades.CAdESUtil,a={};if("06092a864886f70d010702"!=(0,ft.getTLVbyList)(t,0,[0]))throw"hex is not CMS SignedData";var u=e(t,i(t,0,[1,0]));if(u.length<4)throw"num of SignedData elem shall be 4 at least";var c=u.shift();a.version=n(t,c);var d=u.shift();a.algs=n(t,d);var h=u.shift();a.encapcontent=n(t,h),a.certs=null,a.revs=null,a.si=[];var p=u.shift();"a0"==t.substr(p,2)&&(a.certs=n(t,p),p=u.shift()),"a1"==t.substr(p,2)&&(a.revs=n(t,p),p=u.shift());var g=p;if("31"!=t.substr(g,2))throw"Can't find signerInfos";for(var f=e(t,g),m=0;m<f.length;m++){var v=o.parseSignerInfoForAddingUnsigned(t,f[m],m);a.si[m]=v}var y=null;for(a.obj=new s,(y=new r).hTLV=a.version,a.obj.dCMSVersion=y,(y=new r).hTLV=a.algs,a.obj.dDigestAlgs=y,(y=new r).hTLV=a.encapcontent,a.obj.dEncapContentInfo=y,(y=new r).hTLV=a.certs,a.obj.dCerts=y,a.obj.signerInfoList=[],m=0;m<a.si.length;m++)a.obj.signerInfoList.push(a.si[m].obj);return a},ht.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var i=ft.getTLV,l=ft.getV,r=ht.asn1,s=r.ASN1Object,o=r.cms,a=o.AttributeList,u=o.SignerInfo,c={},d=(0,ft.getChildIdx)(t,e);if(6!=d.length)throw"not supported items for SignerInfo (!=6)";var h=d.shift();c.version=i(t,h);var p=d.shift();c.si=i(t,p);var g=d.shift();c.digalg=i(t,g);var f=d.shift();c.sattrs=i(t,f);var m=d.shift();c.sigalg=i(t,m);var v=d.shift();c.sig=i(t,v),c.sigval=l(t,v);var y=null;return c.obj=new u,(y=new s).hTLV=c.version,c.obj.dCMSVersion=y,(y=new s).hTLV=c.si,c.obj.dSignerIdentifier=y,(y=new s).hTLV=c.digalg,c.obj.dDigestAlgorithm=y,(y=new s).hTLV=c.sattrs,c.obj.dSignedAttrs=y,(y=new s).hTLV=c.sigalg,c.obj.dSigAlg=y,(y=new s).hTLV=c.sig,c.obj.dSig=y,c.obj.dUnsignedAttrs=new a,c},void 0!==ht.asn1.csr&&ht.asn1.csr||(ht.asn1.csr={}),ht.asn1.csr.CertificationRequest=function(t){var e=ht,n=e.asn1,i=n.DERBitString,l=n.DERSequence,r=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new r.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var s=new l({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=s.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Nt(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},l.lang.extend(ht.asn1.csr.CertificationRequest,ht.asn1.ASN1Object),ht.asn1.csr.CertificationRequestInfo=function(t){var e=ht.asn1,n=e.DERInteger,i=e.DERSequence,l=e.DERSet,r=e.DERNull,s=e.DERTaggedObject,o=e.DERObjectIdentifier,a=e.x509,u=a.X500Name,c=a.Extension,d=Mt;e.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new u(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=d.getKey(t);this.asn1SubjPKey=new a.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){c.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new i({array:this.extensionsArray}),e=new l({array:[t]}),n=new i({array:[new o({oid:"1.2.840.113549.1.9.14"}),e]}),a=new s({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(a)}else a=new s({explicit:!1,tag:"a0",obj:new r}),this.asn1Array.push(a);var u=new i({array:this.asn1Array});return this.hTLV=u.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},l.lang.extend(ht.asn1.csr.CertificationRequestInfo,ht.asn1.ASN1Object),ht.asn1.csr.CSRUtil=new function(){},ht.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Mt,n=ht.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var i=new n.CertificationRequestInfo;if(i.setSubjectByParam(t.subject),i.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var l=0;l<t.ext.length;l++)for(key in t.ext[l])i.appendExtensionByName(key,t.ext[l][key]);var r=new n.CertificationRequest({csrinfo:i}),s=e.getKey(t.sbjprvkey);return r.sign(t.sigalg,s),r.getPEMString()},ht.asn1.csr.CSRUtil.getInfo=function(t){var e=ft.getTLVbyList,n={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var i=kt(t,"CERTIFICATE REQUEST");return n.subject.hex=e(i,0,[0,1]),n.subject.name=Yt.hex2dn(n.subject.hex),n.pubkey.hex=e(i,0,[0,2]),n.pubkey.obj=Mt.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==ht&&ht||(ht={}),void 0!==ht.asn1&&ht.asn1||(ht.asn1={}),void 0!==ht.asn1.ocsp&&ht.asn1.ocsp||(ht.asn1.ocsp={}),ht.asn1.ocsp.DEFAULT_HASH="sha1",ht.asn1.ocsp.CertID=function(t){var e=ht.asn1,n=e.DEROctetString,i=e.DERInteger,l=e.DERSequence,r=e.x509.AlgorithmIdentifier,s=e.ocsp,o=s.DEFAULT_HASH,a=ht.crypto.Util.hashHex,u=Yt,c=ft;if(s.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,l,s){void 0===s&&(s=o),this.dHashAlg=new r({name:s}),this.dIssuerNameHash=new n({hex:t}),this.dIssuerKeyHash=new n({hex:e}),this.dSerialNumber=new i({hex:l})},this.setByCert=function(t,e,n){void 0===n&&(n=o);var i=new u;i.readCertPEM(e);var l=new u;l.readCertPEM(t);var r=l.getPublicKeyHex(),s=c.getTLVbyList(r,0,[1,0],"30"),d=i.getSerialNumberHex(),h=a(l.getSubjectHex(),n),p=a(s,n);this.setByValue(h,p,d,n),this.hoge=i.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=new l({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var d=t;if(void 0!==d.issuerCert&&void 0!==d.subjectCert){var h=o;void 0===d.alg&&(h=void 0),this.setByCert(d.issuerCert,d.subjectCert,h)}else{if(void 0===d.namehash||void 0===d.keyhash||void 0===d.serial)throw"invalid constructor arguments";h=o,void 0===d.alg&&(h=void 0),this.setByValue(d.namehash,d.keyhash,d.serial,h)}}},l.lang.extend(ht.asn1.ocsp.CertID,ht.asn1.ASN1Object),ht.asn1.ocsp.Request=function(t){var e=ht.asn1,n=e.DERSequence,i=e.ocsp;if(i.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var l=new i.CertID(t);this.dReqCert=l}},l.lang.extend(ht.asn1.ocsp.Request,ht.asn1.ASN1Object),ht.asn1.ocsp.TBSRequest=function(t){var e=ht.asn1,n=e.DERSequence,i=e.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var l=new i.Request(t[0]);e.push(l)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var i=new n({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},l.lang.extend(ht.asn1.ocsp.TBSRequest,ht.asn1.ASN1Object),ht.asn1.ocsp.OCSPRequest=function(t){var e=ht.asn1,n=e.DERSequence,i=e.ocsp;if(i.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var l=new i.TBSRequest(t);this.dTbsRequest=l}},l.lang.extend(ht.asn1.ocsp.OCSPRequest,ht.asn1.ASN1Object),ht.asn1.ocsp.OCSPUtil={},ht.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var i=ht.asn1.ocsp;return void 0===n&&(n=i.DEFAULT_HASH),new i.OCSPRequest({reqList:[{alg:n,issuerCert:t,subjectCert:e}]}).getEncodedHex()},ht.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=ft.getVbyList,n=ft.getIdxbyList,i=(e=ft.getVbyList,ft.getV),l={};try{var s=e(t,0,[0],"0a");l.responseStatus=parseInt(s,16)}catch(r){}if(0!==l.responseStatus)return l;try{var o=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(o,2)?l.certStatus="good":"a1"===t.substr(o,2)?(l.certStatus="revoked",l.revocationTime=At(e(t,o,[0]))):"82"===t.substr(o,2)&&(l.certStatus="unknown")}catch(r){}try{var a=n(t,0,[1,0,1,0,0,2,0,2]);l.thisUpdate=At(i(t,a))}catch(r){}try{var u=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(u,2)&&(l.nextUpdate=At(e(t,u,[0])))}catch(r){}return l},void 0!==ht&&ht||(ht={}),void 0!==ht.lang&&ht.lang||(ht.lang={}),ht.lang.String=function(){},"function"==typeof Buffer?(pt=function(t){return bt(new Buffer(t,"utf8").toString("base64"))},gt=function(t){return new Buffer(_t(t),"base64").toString("utf8")}):(pt=function(t){return Ct(Dt(jt(t)))},gt=function(t){return decodeURIComponent(Ht(Et(t)))}),ht.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},ht.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},ht.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},ht.lang.String.isBase64URL=function(t){return!t.match(/[+\/=]/)&&(t=_t(t),ht.lang.String.isBase64(t))},ht.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==ht&&ht||(ht={}),void 0!==ht.crypto&&ht.crypto||(ht.crypto={}),ht.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var i=this.getDigestInfoHex(t,e),l=n/4;if(i.length+22>l)throw"key is too short for SigAlg: keylen="+n+","+e;for(var r="0001",s="00"+i,o="",a=l-r.length-s.length,u=0;u<a;u+=2)o+="ff";return r+o+s},this.hashString=function(t,e){return new ht.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new ht.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new ht.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new ht.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new ht.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new ht.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new ht.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},ht.crypto.Util.md5=function(t){return new ht.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},ht.crypto.Util.ripemd160=function(t){return new ht.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},ht.crypto.Util.SECURERANDOMGEN=new it,ht.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return ht.crypto.Util.SECURERANDOMGEN.nextBytes(e),yt(e)},ht.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new E(ht.crypto.Util.getRandomHexOfNbytes(t),16)},ht.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return ht.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],yt(n)},ht.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new E(ht.crypto.Util.getRandomHexOfNbits(t),16)},ht.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=ht.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},ht.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var i=e.subtract(t);return ht.crypto.Util.getRandomBigIntegerZeroToMax(i).add(t)},ht.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=ht.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=ht.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=ht.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(r){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+r}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(r){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+r}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ht.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ht.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},ht.crypto.MessageDigest.getHashLength=function(t){var e=ht.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},ht.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ht.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=ht.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{this.mac=m.algo.HMAC.create(ht.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(d){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+d}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=xt(t)),void(this.pass=m.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=wt(t.utf8)),void 0!==t.rstr&&(e=xt(t.rstr)),void 0!==t.b64&&(e=_(t.b64)),void 0!==t.b64u&&(e=Et(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=m.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ht.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ht.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",i=e/4-t.length,l=0;l<i;l++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ht.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(t,e){var n=null;try{n=void 0===e?Mt.getKey(t):Mt.getKey(t,e)}catch(i){throw"init failed:"+i}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new ht.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof st&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof st&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ht.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ht.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new ht.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof st&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof st&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ht.crypto.ECDSA&&this.pubKey instanceof ht.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ht.crypto.DSA&&this.pubKey instanceof ht.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?ht.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Mt.getKey(t.prvkeypem),this.init(e)}catch(c){throw"fatal error to load pem private key: "+c}}},ht.crypto.Cipher=function(t){},ht.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof st&&e.isPublic){var i=ht.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===i)return e.encrypt(t);if("RSAOAEP"===i)return e.encryptOAEP(t,"sha1");var l=i.match(/^RSAOAEP(\d+)$/);if(null!==l)return e.encryptOAEP(t,"sha"+l[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ht.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof st&&e.isPrivate){var i=ht.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===i)return e.decrypt(t);if("RSAOAEP"===i)return e.decryptOAEP(t,"sha1");var l=i.match(/^RSAOAEP(\d+)$/);if(null!==l)return e.decryptOAEP(t,"sha"+l[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ht.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof st){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},ht.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ht&&ht||(ht={}),void 0!==ht.crypto&&ht.crypto||(ht.crypto={}),ht.crypto.ECDSA=function(t){var e=new it;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new E(t.bitLength(),e).mod(t.subtract(E.ONE)).add(E.ONE)},this.setNamedCurve=function(t){this.ecparams=ht.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),e=this.ecparams.G.multiply(t),n=e.getX().toBigInteger(),i=e.getY().toBigInteger(),l=this.ecparams.keylen/4,r=("0000000000"+t.toString(16)).slice(-l),s="04"+("0000000000"+n.toString(16)).slice(-l)+("0000000000"+i.toString(16)).slice(-l);return this.setPrivateKeyHex(r),this.setPublicKeyHex(s),{ecprvhex:r,ecpubhex:s}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new E(e,16),i=this.ecparams.n,l=new E(t,16);do{var r=this.getBigRandom(i),s=this.ecparams.G.multiply(r).getX().toBigInteger().mod(i)}while(s.compareTo(E.ZERO)<=0);var o=r.modInverse(i).multiply(l.add(n.multiply(s))).mod(i);return ht.crypto.ECDSA.biRSSigToASN1Sig(s,o)},this.sign=function(t,e){var n=e,i=this.ecparams.n,l=E.fromByteArrayUnsigned(t);do{var r=this.getBigRandom(i),s=this.ecparams.G.multiply(r).getX().toBigInteger().mod(i)}while(s.compareTo(E.ZERO)<=0);var o=r.modInverse(i).multiply(l.add(n.multiply(s))).mod(i);return this.serializeSig(s,o)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var i,l,r,s=ht.crypto.ECDSA.parseSigHex(e);i=s.r,l=s.s,r=ut.decodeFromHex(this.ecparams.curve,n);var o=new E(t,16);return this.verifyRaw(o,i,l,r)},this.verify=function(t,e,n){var i,l,r;if(Bitcoin.Util.isArray(e)){var s=this.parseSig(e);i=s.r,l=s.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";i=e.r,l=e.s}if(n instanceof ut)r=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";r=ut.decodeFrom(this.ecparams.curve,n)}var o=E.fromByteArrayUnsigned(t);return this.verifyRaw(o,i,l,r)},this.verifyRaw=function(t,e,n,i){var l=this.ecparams.n,r=this.ecparams.G;if(e.compareTo(E.ONE)<0||e.compareTo(l)>=0)return!1;if(n.compareTo(E.ONE)<0||n.compareTo(l)>=0)return!1;var s=n.modInverse(l),o=t.multiply(s).mod(l),a=e.multiply(s).mod(l);return r.multiply(o).add(i.multiply(a)).getX().toBigInteger().mod(l).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),i=e.toByteArraySigned(),l=[];return l.push(2),l.push(n.length),(l=l.concat(n)).push(2),l.push(i.length),(l=l.concat(i)).unshift(l.length),l.unshift(48),l},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var i=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:E.fromByteArrayUnsigned(n),s:E.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:E.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:E.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,n,i,l=ht.crypto.ECDSA.getName,r=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{e=r(t,0,[2,0],"06"),n=r(t,0,[1],"04");try{i=r(t,0,[3,0],"03").substr(2)}catch(a){}}catch(a){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=l(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,n,i,l=ht.crypto.ECDSA.getName,r=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{r(t,0,[1,0],"06"),e=r(t,0,[1,1],"06"),n=r(t,0,[2,0,1],"04");try{i=r(t,0,[2,0,2,0],"03").substr(2)}catch(s){}}catch(s){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=l(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,n,i=ht.crypto.ECDSA.getName,l=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{l(t,0,[0,0],"06"),e=l(t,0,[0,1],"06"),n=l(t,0,[1],"03").substr(2)}catch(a){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var n,i,l=ht.crypto.ECDSA.getName,r=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{n=r(t,0,[0,e,0,1],"06"),i=r(t,0,[0,e,1],"03").substr(2)}catch(a){throw"malformed X.509 certificate ECC public key"}if(this.curveName=l(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},ht.crypto.ECDSA.parseSigHex=function(t){var e=ht.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new E(e.r,16),s:new E(e.s,16)}},ht.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=ft.getChildIdx,n=ft.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var i=e(t,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var l=i[0],r=i[1];if("02"!=t.substr(l,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(r,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,l),s:n(t,r)}},ht.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=ht.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,i=e.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),n.length%32==30&&(n="00"+n),i.length%32==30&&(i="00"+i),n.length%32!=0)throw"unknown ECDSA sig r length error";if(i.length%32!=0)throw"unknown ECDSA sig s length error";return n+i},ht.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return ht.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},ht.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new E(t,16),i=new E(e,16);return ht.crypto.ECDSA.biRSSigToASN1Sig(n,i)},ht.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=ht.asn1,i=new n.DERInteger({bigint:t}),l=new n.DERInteger({bigint:e});return new n.DERSequence({array:[i,l]}).getEncodedHex()},ht.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==ht&&ht||(ht={}),void 0!==ht.crypto&&ht.crypto||(ht.crypto={}),ht.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new E(t,16)}this.getByName=function(n){var i=n;if(void 0!==e[i]&&(i=e[n]),void 0!==t[i])return t[i];throw"unregistered EC curve name: "+i},this.regist=function(i,l,r,s,o,a,u,c,d,h,p,g){t[i]={};var f=n(r),m=n(s),v=n(o),y=n(a),S=n(u),b=new ct(f,m,v),_=b.decodePointHex("04"+c+d);t[i].name=i,t[i].keylen=l,t[i].curve=b,t[i].G=_,t[i].n=y,t[i].h=S,t[i].oid=p,t[i].info=g;for(var C=0;C<h.length;C++)e[h[C]]=i}},ht.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ht.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ht.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ht.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ht.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ht.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ht.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ht.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ht.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ht.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ht&&ht||(ht={}),void 0!==ht.crypto&&ht.crypto||(ht.crypto={}),ht.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,i,l){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=i,this.x=l},this.setPrivateHex=function(t,e,n,i,l){var r,s,o,a,u;r=new E(t,16),s=new E(e,16),o=new E(n,16),a="string"==typeof i&&i.length>1?new E(i,16):null,u=new E(l,16),this.setPrivate(r,s,o,a,u)},this.setPublic=function(t,e,n,i){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=i,this.x=null},this.setPublicHex=function(t,e,n,i){var l,r,s,o;l=new E(t,16),r=new E(e,16),s=new E(n,16),o=new E(i,16),this.setPublic(l,r,s,o)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,i=this.g,l=this.x,r=ht.crypto.Util.getRandomBigIntegerMinToMax(E.ONE.add(E.ONE),n.subtract(E.ONE)),s=new E(t.substr(0,n.bitLength()/4),16),o=i.modPow(r,e).mod(n),a=r.modInverse(n).multiply(s.add(l.multiply(o))).mod(n);return ht.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:o}},{int:{bigint:a}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,i=this.q,l=this.g,r=this.y,s=this.parseASN1Signature(e),o=s[0],a=s[1],u=new E(t.substr(0,i.bitLength()/4),16);if(E.ZERO.compareTo(o)>0||o.compareTo(i)>0)throw"invalid DSA signature";if(E.ZERO.compareTo(a)>=0||a.compareTo(i)>0)throw"invalid DSA signature";var c=a.modInverse(i),d=u.multiply(c).mod(i),h=o.multiply(c).mod(i);return 0==l.modPow(d,n).multiply(r.modPow(h,n)).mod(n).mod(i).compareTo(o)},this.parseASN1Signature=function(t){try{return[new E(ft.getVbyList(t,0,[0],"02"),16),new E(ft.getVbyList(t,0,[1],"02"),16)]}catch(o){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,n,i,l,s,o=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[1],"02"),n=o(t,0,[2],"02"),i=o(t,0,[3],"02"),l=o(t,0,[4],"02"),s=o(t,0,[5],"02")}catch(r){throw console.log("EXCEPTION:"+r),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,n,i,l,s)},this.readPKCS8PrvKeyHex=function(t){var e,n,i,l,r=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{e=r(t,0,[1,1,0],"02"),n=r(t,0,[1,1,1],"02"),i=r(t,0,[1,1,2],"02"),l=r(t,0,[2,0],"02")}catch(s){throw console.log("EXCEPTION:"+s),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,n,i,null,l)},this.readPKCS8PubKeyHex=function(t){var e,n,i,l,r=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{e=r(t,0,[0,1,0],"02"),n=r(t,0,[0,1,1],"02"),i=r(t,0,[0,1,2],"02"),l=r(t,0,[1,0],"02")}catch(s){throw console.log("EXCEPTION:"+s),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,n,i,l)},this.readCertPubKeyHex=function(t,e){var n,i,l,s;5!==e&&(e=6);var o=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{n=o(t,0,[0,e,0,1,0],"02"),i=o(t,0,[0,e,0,1,1],"02"),l=o(t,0,[0,e,0,1,2],"02"),s=o(t,0,[0,e,1,0],"02")}catch(r){throw console.log("EXCEPTION:"+r),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,i,l,s)}};var Mt=function(){var t=function(t,n,i){return e(m.AES,t,n,i)},e=function(t,e,n,i){var l=m.enc.Hex.parse(e),r=m.enc.Hex.parse(n),s=m.enc.Hex.parse(i),o={};o.key=r,o.iv=s,o.ciphertext=l;var a=t.decrypt(o,r,{iv:s});return m.enc.Hex.stringify(a)},n=function(t,e,n){return i(m.AES,t,e,n)},i=function(t,e,n,i){var l=m.enc.Hex.parse(e),r=m.enc.Hex.parse(n),s=m.enc.Hex.parse(i),o=t.encrypt(l,r,{iv:s}),a=m.enc.Hex.parse(o.toString());return m.enc.Base64.stringify(a)},l={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,i){return e(m.TripleDES,t,n,i)},eproc:function(t,e,n){return i(m.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,i){return e(m.DES,t,n,i)},eproc:function(t,e,n){return i(m.DES,t,e,n)},keylen:8,ivlen:8}},r=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var i=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(e.type=i[1]);var l=-1,r=0;-1!=t.indexOf("\r\n\r\n")&&(l=t.indexOf("\r\n\r\n"),r=2),-1!=t.indexOf("\n\n")&&(l=t.indexOf("\n\n"),r=1);var s=t.indexOf("-----END");if(-1!=l&&-1!=s){var o=t.substring(l+2*r,s-r);o=o.replace(/\s+/g,""),e.data=o}return e},s=function(t,e,n){for(var i=n.substring(0,16),r=m.enc.Hex.parse(i),s=m.enc.Utf8.parse(e),o=l[t].keylen+l[t].ivlen,a="",u=null;;){var c=m.algo.MD5.create();if(null!=u&&c.update(u),c.update(s),c.update(r),u=c.finalize(),(a+=m.enc.Hex.stringify(u)).length>=2*o)break}var d={};return d.keyhex=a.substr(0,2*l[t].keylen),d.ivhex=a.substr(2*l[t].keylen,2*l[t].ivlen),d},o=function(t,e,n,i){var r=m.enc.Base64.parse(t),s=m.enc.Hex.stringify(r);return(0,l[e].proc)(s,n,i)};return{version:"1.0.0",parsePKCS5PEM:function(t){return r(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return s(t,e,n)},decryptKeyB64:function(t,e,n,i){return o(t,e,n,i)},getDecryptedKeyHex:function(t,e){var n=r(t),i=n.cipher,l=n.ivsalt,a=n.data,u=s(i,e,l);return o(a,i,u.keyhex,l)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,i,r){var o="";if(void 0!==i&&null!=i||(i="AES-256-CBC"),void 0===l[i])throw"KEYUTIL unsupported algorithm: "+i;void 0!==r&&null!=r||(r=function(t){var e=m.lib.WordArray.random(l[i].ivlen);return m.enc.Hex.stringify(e)}().toUpperCase());var a=function(t,e,n,i){return(0,l[e].eproc)(t,n,r)}(e,i,s(i,n,r).keyhex);return o="-----BEGIN "+t+" PRIVATE KEY-----\r\n",o+="Proc-Type: 4,ENCRYPTED\r\n",o+="DEK-Info: "+i+","+r+"\r\n",o+="\r\n",(o+=a.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=ft.getChildIdx,n=ft.getV,i={},l=e(t,0);if(2!=l.length)throw"malformed format: SEQUENCE(0).items != 2: "+l.length;i.ciphertext=n(t,l[1]);var r=e(t,l[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=n(t,r[0]))throw"this only supports pkcs5PBES2";var s=e(t,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+s.length;var o=e(t,s[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+o.length;if("2a864886f70d0307"!=n(t,o[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(t,o[1]);var a=e(t,s[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+a.length;if("2a864886f70d01050c"!=n(t,a[0]))throw"this only supports pkcs5PBKDF2";var u=e(t,a[1]);if(u.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length;i.pbkdf2Salt=n(t,u[0]);var c=n(t,u[1]);try{i.pbkdf2Iter=parseInt(c,16)}catch(d){throw"malformed format pbkdf2Iter: "+c}return i},getPBKDF2KeyHexFromParam:function(t,e){var n=m.enc.Hex.parse(t.pbkdf2Salt),i=m.PBKDF2(e,n,{keySize:6,iterations:t.pbkdf2Iter});return m.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=kt(t,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(n),l=Mt.getPBKDF2KeyHexFromParam(i,e),r={};r.ciphertext=m.enc.Hex.parse(i.ciphertext);var s=m.enc.Hex.parse(l),o=m.enc.Hex.parse(i.encryptionSchemeIV),a=m.TripleDES.decrypt(r,s,{iv:o});return m.enc.Hex.stringify(a)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=ft,n=e.getChildIdx,i=e.getV,l={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var r=n(t,0);if(3!=r.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(r[1],2))throw"malformed PKCS8 private key(code:003)";var s=n(t,r[1]);if(2!=s.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(s[0],2))throw"malformed PKCS8 private key(code:005)";if(l.algoid=i(t,s[0]),"06"==t.substr(s[1],2)&&(l.algparam=i(t,s[1])),"04"!=t.substr(r[2],2))throw"malformed PKCS8 private key(code:006)";return l.keyidx=e.getVidx(t,r[2]),l},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=kt(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new st;else if("2a8648ce380401"==n.algoid)e=new ht.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";e=new ht.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=ft.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new st;else if("2a8648ce380401"===n)e=new ht.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";e=new ht.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=ft.getChildIdx,n=ft.getV,i={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var l=e(t,0);if(2!=l.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(l[0],2))throw"malformed RSA key(code:003)";if(i.n=n(t,l[0]),"02"!=t.substr(l[1],2))throw"malformed RSA key(code:004)";return i.e=n(t,l[1]),i},parsePublicPKCS8Hex:function(t){var e=ft,n=e.getChildIdx,i=e.getV,l={algparam:null},r=n(t,0);if(2!=r.length)throw"outer DERSequence shall have 2 elements: "+r.length;var s=r[0];if("30"!=t.substr(s,2))throw"malformed PKCS8 public key(code:001)";var o=n(t,s);if(2!=o.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 public key(code:003)";if(l.algoid=i(t,o[0]),"06"==t.substr(o[1],2)?l.algparam=i(t,o[1]):"30"==t.substr(o[1],2)&&(l.algparam={},l.algparam.p=e.getVbyList(t,o[1],[0],"02"),l.algparam.q=e.getVbyList(t,o[1],[1],"02"),l.algparam.g=e.getVbyList(t,o[1],[2],"02")),"03"!=t.substr(r[1],2))throw"malformed PKCS8 public key(code:004)";return l.key=i(t,r[1]).substr(2),l}}}();Mt.getKey=function(t,e,n){var i,l=(S=ft).getChildIdx,r=S.getVbyList,s=ht.crypto,o=s.ECDSA,a=s.DSA,u=st,c=kt,d=Mt;if(void 0!==u&&t instanceof u)return t;if(void 0!==o&&t instanceof o)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new o({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new o({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(N=new u).setPublic(t.n,t.e),N;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(N=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),N;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(N=new u).setPrivate(t.n,t.e,t.d),N;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(N=new a).setPublic(t.p,t.q,t.g,t.y),N;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(N=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),N;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(N=new u).setPublic(Et(t.n),Et(t.e)),N;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(N=new u).setPrivateEx(Et(t.n),Et(t.e),Et(t.d),Et(t.p),Et(t.q),Et(t.dp),Et(t.dq),Et(t.qi)),N;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(N=new u).setPrivate(Et(t.n),Et(t.e),Et(t.d)),N;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var h=(F=new o({curve:t.crv})).ecparams.keylen/4,p=("0000000000"+Et(t.x)).slice(-h),g=("0000000000"+Et(t.y)).slice(-h);return F.setPublicKeyHex(f="04"+p+g),F}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){h=(F=new o({curve:t.crv})).ecparams.keylen/4;var f="04"+(p=("0000000000"+Et(t.x)).slice(-h))+(g=("0000000000"+Et(t.y)).slice(-h)),m=("0000000000"+Et(t.d)).slice(-h);return F.setPublicKeyHex(f),F.setPrivateKeyHex(m),F}if("pkcs5prv"===n){var v,y=t,S=ft;if(9===(v=l(y,0)).length)(N=new u).readPKCS5PrvKeyHex(y);else if(6===v.length)(N=new a).readPKCS5PrvKeyHex(y);else{if(!(v.length>2&&"04"===y.substr(v[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(N=new o).readPKCS5PrvKeyHex(y)}return N}if("pkcs8prv"===n)return d.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return d._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return Yt.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Yt.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var b=kt(t,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(b)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var _=c(t,"RSA PRIVATE KEY");return d.getKey(_,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var C=r(i=c(t,"DSA PRIVATE KEY"),0,[1],"02"),w=r(i,0,[2],"02"),A=r(i,0,[3],"02"),T=r(i,0,[4],"02"),x=r(i,0,[5],"02");return(N=new a).setPrivate(new E(C,16),new E(w,16),new E(A,16),new E(T,16),new E(x,16)),N}if(-1!=t.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I=d.getDecryptedKeyHex(t,e),R=new st;return R.readPKCS5PrvKeyHex(I),R}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var F,N=r(i=d.getDecryptedKeyHex(t,e),0,[1],"04"),k=r(i,0,[2,0],"06"),P=r(i,0,[3,0],"03").substr(2);if(void 0===ht.crypto.OID.oidhex2name[k])throw"undefined OID(hex) in KJUR.crypto.OID: "+k;return(F=new o({curve:ht.crypto.OID.oidhex2name[k]})).setPublicKeyHex(P),F.setPrivateKeyHex(N),F.isPublic=!1,F}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return C=r(i=d.getDecryptedKeyHex(t,e),0,[1],"02"),w=r(i,0,[2],"02"),A=r(i,0,[3],"02"),T=r(i,0,[4],"02"),x=r(i,0,[5],"02"),(N=new a).setPrivate(new E(C,16),new E(w,16),new E(A,16),new E(T,16),new E(x,16)),N;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Mt.generateKeypair=function(t,e){if("RSA"==t){var n=e;(s=new st).generate(n,"10001"),s.isPrivate=!0,s.isPublic=!0;var i=new st,l=s.n.toString(16),r=s.e.toString(16);return i.setPublic(l,r),i.isPrivate=!1,i.isPublic=!0,(o={}).prvKeyObj=s,o.pubKeyObj=i,o}if("EC"==t){var s,o,a=e,u=new ht.crypto.ECDSA({curve:a}).generateKeyPairHex();return(s=new ht.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),s.setPrivateKeyHex(u.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(i=new ht.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),i.isPrivate=!1,i.isPublic=!0,(o={}).prvKeyObj=s,o.pubKeyObj=i,o}throw"unknown algorithm: "+t},Mt.getPEM=function(t,e,n,i,l,r){var s=ht.asn1,o=s.DERObjectIdentifier,a=s.DERInteger,u=s.ASN1Util.newObject,c=ht.crypto,d=c.DSA,h=c.ECDSA,p=st;function g(t){return u({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function f(t){return u({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function v(t){return u({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==p&&t instanceof p||void 0!==d&&t instanceof d||void 0!==h&&t instanceof h)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return Nt(_=new(0,s.x509.SubjectPublicKeyInfo)(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===n||null==n)&&1==t.isPrivate)return Nt(_=g(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==h&&t instanceof h&&(void 0===n||null==n)&&1==t.isPrivate){var y=new o({name:t.curveName}).getEncodedHex(),S=f(t).getEncodedHex(),b="";return(b+=Nt(y,"EC PARAMETERS"))+Nt(S,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===n||null==n)&&1==t.isPrivate)return Nt(_=v(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==n&&null!=n&&1==t.isPrivate){var _=g(t).getEncodedHex();return void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",_,n,i,r)}if("PKCS5PRV"==e&&void 0!==h&&t instanceof h&&void 0!==n&&null!=n&&1==t.isPrivate)return _=f(t).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",_,n,i,r);if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==n&&null!=n&&1==t.isPrivate)return _=v(t).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",_,n,i,r);var C=function(t,e){var n=E(t,e);return new u({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},E=function(t,e){var n=m.lib.WordArray.random(8),i=m.lib.WordArray.random(8),l=m.PBKDF2(e,n,{keySize:6,iterations:100}),r=m.enc.Hex.parse(t),s=m.TripleDES.encrypt(r,l,{iv:i})+"",o={};return o.ciphertext=s,o.pbkdf2Salt=m.enc.Hex.stringify(n),o.pbkdf2Iter=100,o.encryptionSchemeAlg="DES-EDE3-CBC",o.encryptionSchemeIV=m.enc.Hex.stringify(i),o};if("PKCS8PRV"==e&&null!=p&&t instanceof p&&1==t.isPrivate){var w=g(t).getEncodedHex();return _=u({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:w}}]}).getEncodedHex(),void 0===n||null==n?Nt(_,"PRIVATE KEY"):Nt(S=C(_,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==h&&t instanceof h&&1==t.isPrivate)return w=new u({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),_=u({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:w}}]}).getEncodedHex(),void 0===n||null==n?Nt(_,"PRIVATE KEY"):Nt(S=C(_,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate)return w=new a({bigint:t.x}).getEncodedHex(),_=u({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:w}}]}).getEncodedHex(),void 0===n||null==n?Nt(_,"PRIVATE KEY"):Nt(S=C(_,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Mt.getKeyFromCSRPEM=function(t){var e=kt(t,"CERTIFICATE REQUEST");return Mt.getKeyFromCSRHex(e)},Mt.getKeyFromCSRHex=function(t){var e=Mt.parseCSRHex(t);return Mt.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Mt.parseCSRHex=function(t){var e=ft.getChildIdx,n=ft.getTLV,i={},l=t;if("30"!=l.substr(0,2))throw"malformed CSR(code:001)";var r=e(l,0);if(r.length<1)throw"malformed CSR(code:002)";if("30"!=l.substr(r[0],2))throw"malformed CSR(code:003)";var s=e(l,r[0]);if(s.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(l,s[2]),i},Mt.getJWKFromKey=function(t){var e={};if(t instanceof st&&t.isPrivate)return e.kty="RSA",e.n=Ct(t.n.toString(16)),e.e=Ct(t.e.toString(16)),e.d=Ct(t.d.toString(16)),e.p=Ct(t.p.toString(16)),e.q=Ct(t.q.toString(16)),e.dp=Ct(t.dmp1.toString(16)),e.dq=Ct(t.dmq1.toString(16)),e.qi=Ct(t.coeff.toString(16)),e;if(t instanceof st&&t.isPublic)return e.kty="RSA",e.n=Ct(t.n.toString(16)),e.e=Ct(t.e.toString(16)),e;if(t instanceof ht.crypto.ECDSA&&t.isPrivate){if("P-256"!==(i=t.getShortNISTPCurveName())&&"P-384"!==i)throw"unsupported curve name for JWT: "+i;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=i,e.x=Ct(n.x),e.y=Ct(n.y),e.d=Ct(t.prvKeyHex),e}if(t instanceof ht.crypto.ECDSA&&t.isPublic){var i;if("P-256"!==(i=t.getShortNISTPCurveName())&&"P-384"!==i)throw"unsupported curve name for JWT: "+i;return n=t.getPublicKeyXYHex(),e.kty="EC",e.crv=i,e.x=Ct(n.x),e.y=Ct(n.y),e}throw"not supported key object"},st.getPosArrayOfChildrenFromHex=function(t){return ft.getChildIdx(t,0)},st.getHexValueArrayOfChildrenFromHex=function(t){var e,n=ft.getV,i=n(t,(e=st.getPosArrayOfChildrenFromHex(t))[0]),l=n(t,e[1]),r=n(t,e[2]),s=n(t,e[3]),o=n(t,e[4]),a=n(t,e[5]),u=n(t,e[6]),c=n(t,e[7]),d=n(t,e[8]);return(e=new Array).push(i,l,r,s,o,a,u,c,d),e},st.prototype.readPrivateKeyFromPEMString=function(t){var e=kt(t),n=st.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},st.prototype.readPKCS5PrvKeyHex=function(t){var e=st.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},st.prototype.readPKCS8PrvKeyHex=function(t){var e,n,i,l,r,s,o,a,u=ft.getVbyList;if(!1===ft.isASN1HEX(t))throw"not ASN.1 hex string";try{e=u(t,0,[2,0,1],"02"),n=u(t,0,[2,0,2],"02"),i=u(t,0,[2,0,3],"02"),l=u(t,0,[2,0,4],"02"),r=u(t,0,[2,0,5],"02"),s=u(t,0,[2,0,6],"02"),o=u(t,0,[2,0,7],"02"),a=u(t,0,[2,0,8],"02")}catch(g){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,n,i,l,r,s,o,a)},st.prototype.readPKCS5PubKeyHex=function(t){var e=ft,n=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var i=e.getChildIdx(t,0);if(2!==i.length||"02"!==t.substr(i[0],2)||"02"!==t.substr(i[1],2))throw"wrong hex for PKCS#5 public key";var l=n(t,i[0]),r=n(t,i[1]);this.setPublic(l,r)},st.prototype.readPKCS8PubKeyHex=function(t){var e=ft;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var n=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},st.prototype.readCertPubKeyHex=function(t,e){var n,i;(n=new Yt).readCertHex(t),i=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)};var Kt=new RegExp("");function Gt(t,e){for(var n="",i=e/4-t.length,l=0;l<i;l++)n+="0";return n+t}function Wt(t,e,n){for(var i="",l=0;i.length<e;)i+=Tt(n(xt(t+String.fromCharCode.apply(String,[(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))),l+=1;return i}function zt(t){for(var e in ht.crypto.Util.DIGESTINFOHEAD){var n=ht.crypto.Util.DIGESTINFOHEAD[e],i=n.length;if(t.substring(0,i)==n)return[e,t.substring(i)]}return[]}function Yt(){var t=ft,e=t.getChildIdx,n=t.getV,i=t.getTLV,l=t.getVbyList,r=t.getTLVbyList,s=t.getIdxbyList,o=t.getVidx,a=t.oidname,u=Yt,d=kt;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==r(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return l(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return a(l(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return r(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return u.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return r(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return u.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=l(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=l(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return s(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return s(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Mt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return a(l(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return l(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),i=r(this.hex,0,[0],"30"),l=new ht.crypto.Signature({alg:e});return l.init(t),l.updateHex(i),l.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=s(this.hex,0,[0,7,0],"30"),i=e(this.hex,n);this.aExtInfo=new Array;for(var r=0;r<i.length;r++){var a={critical:!1},u=0;3===e(this.hex,i[r]).length&&(a.critical=!0,u=1),a.oid=t.hextooidstr(l(this.hex,i[r],[0],"06"));var c=s(this.hex,i[r],[1+u]);a.vidx=o(this.hex,c),this.aExtInfo.push(a)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=ht.asn1.x509.OID.name2oid(t)),""!==n)for(var i=0;i<e.length;i++)if(e[i].oid===n)return e[i]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=n(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var i=n(e,6);return{cA:!0,pathLen:parseInt(i,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=n(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var i=parseInt(e.substr(0,2)),l=parseInt(e.substr(2),16).toString(2);return l.substr(0,l.length-i)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&e.push(Yt.KEYUSAGE_NAME[n]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:n(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var l={},r=i(this.hex,t.vidx),s=e(r,0),o=0;o<s.length;o++)"80"===r.substr(s[o],2)&&(l.kid=n(r,s[o]));return l},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var l=new Array,r=i(this.hex,t.vidx);if(""===r)return l;for(var s=e(r,0),o=0;o<s.length;o++)l.push(a(n(r,s[o])));return l},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,n=0;n<t.length;n++)"DNS"===t[n][0]&&e.push(t[n][1]);return e},this.getExtSubjectAltName2=function(){var t,l,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var o=new Array,a=i(this.hex,s.vidx),u=e(a,0),c=0;c<u.length;c++)r=a.substr(u[c],2),t=n(a,u[c]),"81"===r&&(l=At(t),o.push(["MAIL",l])),"82"===r&&(l=At(t),o.push(["DNS",l])),"84"===r&&(l=Yt.hex2dn(t,0),o.push(["DN",l])),"86"===r&&(l=At(t),o.push(["URI",l])),"87"===r&&(l=Vt(t),o.push(["IP",l]));return o},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var n=new Array,i=e(this.hex,t.vidx),r=0;r<i.length;r++)try{var s=At(l(this.hex,i[r],[0,0,0],"86"));n.push(s)}catch(o){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var n={ocsp:[],caissuer:[]},i=e(this.hex,t.vidx),r=0;r<i.length;r++){var s=l(this.hex,i[r],[0],"06"),o=l(this.hex,i[r],[1],"86");"2b06010505073001"===s&&n.ocsp.push(At(o)),"2b06010505073002"===s&&n.caissuer.push(At(o))}return n},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var r=i(this.hex,t.vidx),s=[],o=e(r,0),u=0;u<o.length;u++){var c={},d=e(r,o[u]);if(c.id=a(n(r,d[0])),2===d.length)for(var h=e(r,d[1]),p=0;p<h.length;p++){var g=l(r,h[p],[0],"06");"2b06010505070201"===g?c.cps=At(l(r,h[p],[1])):"2b06010505070202"===g&&(c.unotice=At(l(r,h[p],[1,0])))}s.push(c)}return s},this.readCertPEM=function(t){this.readCertHex(d(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{s(this.hex,0,[0,7],"a3"),this.parseExt()}catch(c){}},this.getInfo=function(){var t,e,n;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+Ut(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+Ut(e.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var i=0;i<n.length;i++){var l=n[i],r=ht.asn1.x509.OID.oid2name(l.oid);""===r&&(r=l.oid);var s="";if(!0===l.critical&&(s="CRITICAL"),t+="  "+r+" "+s+":\n","basicConstraints"===r){var o=this.getExtBasicConstraints();void 0===o.cA?t+="    {}\n":(t+="    cA=true",void 0!==o.pathLen&&(t+=", pathLen="+o.pathLen),t+="\n")}else if("keyUsage"===r)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===r)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===r){var a=this.getExtAuthorityKeyIdentifier();void 0!==a.kid&&(t+="    kid="+a.kid+"\n")}else if("extKeyUsage"===r)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===r)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===r)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===r){var u=this.getExtAIAInfo();void 0!==u.ocsp&&(t+="    ocsp: "+u.ocsp.join(",")+"\n"),void 0!==u.caissuer&&(t+="    caissuer: "+u.caissuer.join(",")+"\n")}else if("certificatePolicies"===r)for(var c=this.getExtCertificatePolicies(),d=0;d<c.length;d++)void 0!==c[d].id&&(t+="    policy oid: "+c[d].id+"\n"),void 0!==c[d].cps&&(t+="    cps: "+c[d].cps+"\n")}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Kt.compile("[^0-9a-f]","gi"),st.prototype.sign=function(t,e){var n=ht.crypto.Util.hashString(t,e);return this.signWithMessageHash(n,e)},st.prototype.signWithMessageHash=function(t,e){var n=lt(ht.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return Gt(this.doPrivate(n).toString(16),this.n.bitLength())},st.prototype.signPSS=function(t,e,n){var i,l=(i=xt(t),ht.crypto.Util.hashHex(i,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(l,e,n)},st.prototype.signWithMessageHashPSS=function(t,e,n){var i,l=Tt(t),r=l.length,s=this.n.bitLength()-1,o=Math.ceil(s/8),a=function(t){return ht.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=r;else if(-2===n)n=o-r-2;else if(n<-2)throw"invalid salt length";if(o<r+n+2)throw"data too long";var u="";n>0&&(u=new Array(n),(new it).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=Tt(a(xt("\0\0\0\0\0\0\0\0"+l+u))),d=[];for(i=0;i<o-n-r-2;i+=1)d[i]=0;var h=String.fromCharCode.apply(String,d)+"\x01"+u,p=Wt(c,h.length,a),g=[];for(i=0;i<h.length;i+=1)g[i]=h.charCodeAt(i)^p.charCodeAt(i);for(g[0]&=~(65280>>8*o-s&255),i=0;i<r;i++)g.push(c.charCodeAt(i));return g.push(188),Gt(this.doPrivate(new E(g)).toString(16),this.n.bitLength())},st.prototype.verify=function(t,e){var n=lt(e=(e=e.replace(Kt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var i=zt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=i.length&&i[1]==ht.crypto.Util.hashString(t,i[0])},st.prototype.verifyWithMessageHash=function(t,e){var n=lt(e=(e=e.replace(Kt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var i=zt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=i.length&&i[1]==t},st.prototype.verifyPSS=function(t,e,n,i){var l,r=(l=xt(t),ht.crypto.Util.hashHex(l,n));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(r,e,n,i)},st.prototype.verifyWithMessageHashPSS=function(t,e,n,i){var l=new E(e,16);if(l.bitLength()>this.n.bitLength())return!1;var r,s=function(t){return ht.crypto.Util.hashHex(t,n)},o=Tt(t),a=o.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===i||void 0===i)i=a;else if(-2===i)i=c-a-2;else if(i<-2)throw"invalid salt length";if(c<a+i+2)throw"data too long";var d=this.doPublic(l).toByteArray();for(r=0;r<d.length;r+=1)d[r]&=255;for(;d.length<c;)d.unshift(0);if(188!==d[c-1])throw"encoded message does not end in 0xbc";var h=(d=String.fromCharCode.apply(String,d)).substr(0,c-a-1),p=d.substr(h.length,a),g=65280>>8*c-u&255;if(0!=(h.charCodeAt(0)&g))throw"bits beyond keysize not zero";var f=Wt(p,h.length,s),m=[];for(r=0;r<h.length;r+=1)m[r]=h.charCodeAt(r)^f.charCodeAt(r);m[0]&=~g;var v=c-a-i-2;for(r=0;r<v;r+=1)if(0!==m[r])throw"leftmost octets not zero";if(1!==m[v])throw"0x01 marker not found";return p===Tt(s(xt("\0\0\0\0\0\0\0\0"+o+String.fromCharCode.apply(String,m.slice(-i)))))},st.SALT_LEN_HLEN=-1,st.SALT_LEN_MAX=-2,st.SALT_LEN_RECOVER=-2,Yt.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,i=ft.getChildIdx(t,e),l=0;l<i.length;l++)n.push(Yt.hex2rdn(t,i[l]));return"/"+(n=n.map(function(t){return t.replace("/","\\/")})).join("/")},Yt.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,i=ft.getChildIdx(t,e),l=0;l<i.length;l++)n.push(Yt.hex2attrTypeValue(t,i[l]));return(n=n.map(function(t){return t.replace("+","\\+")})).join("+")},Yt.hex2attrTypeValue=function(t,e){var n=ft,i=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var l=n.getChildIdx(t,e);2!==l.length||t.substr(l[0],2);var r=i(t,l[0]),s=ht.asn1.ASN1Util.oidHexToInt(r);return ht.asn1.x509.OID.oid2atype(s)+"="+Tt(i(t,l[1]))},Yt.getPublicKeyFromCertHex=function(t){var e=new Yt;return e.readCertHex(t),e.getPublicKey()},Yt.getPublicKeyFromCertPEM=function(t){var e=new Yt;return e.readCertPEM(t),e.getPublicKey()},Yt.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,i=ft.getVbyList,l={algparam:null};return(e=new Yt).readCertPEM(t),n=e.getPublicKeyHex(),l.keyhex=i(n,0,[1],"03").substr(2),l.algoid=i(n,0,[0,0],"06"),"2a8648ce3d0201"===l.algoid&&(l.algparam=i(n,0,[0,1],"06")),l},Yt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ht&&ht||(ht={}),void 0!==ht.jws&&ht.jws||(ht.jws={}),ht.jws.JWS=function(){var t=ht.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var i=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var l=i[1],r=i[2],s=i[3],o=l+"."+r;if(this.parsedJWS={},this.parsedJWS.headB64U=l,this.parsedJWS.payloadB64U=r,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=o,!n){var a=Et(s),u=lt(a,16);this.parsedJWS.sigvalH=a,this.parsedJWS.sigvalBI=u}var c=gt(l),d=gt(r);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=d,!t(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},ht.jws.JWS.sign=function(t,e,n,i,l){var r,s,o,a=ht.jws.JWS,u=a.readSafeJSONString,c=a.isSafeJSONString,d=ht.crypto,h=d.Mac,p=d.Signature,g=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(r=g.stringify(s=e)),"string"==typeof e){if(!c(r=e))throw"JWS Head is not safe JSON string: "+r;s=u(r)}if(o=n,"object"==typeof n&&(o=g.stringify(n)),""!=t&&null!=t||void 0===s.alg||(t=s.alg),""!=t&&null!=t&&void 0===s.alg&&(s.alg=t,r=g.stringify(s)),t!==s.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+s.alg;var f=null;if(void 0===a.jwsalg2sigalg[t])throw"unsupported alg name: "+t;f=a.jwsalg2sigalg[t];var m=pt(r)+"."+pt(o),v="";if("Hmac"==f.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var y=new h({alg:f,prov:"cryptojs",pass:i});y.updateString(m),v=y.doFinal()}else{var S;-1!=f.indexOf("withECDSA")?((S=new p({alg:f})).init(i,l),S.updateString(m),hASN1Sig=S.sign(),v=ht.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=f&&((S=new p({alg:f})).init(i,l),S.updateString(m),v=S.sign())}return m+"."+Ct(v)},ht.jws.JWS.verify=function(t,e,n){var i,l=ht.jws.JWS,r=l.readSafeJSONString,s=ht.crypto,o=s.ECDSA,a=s.Mac,u=s.Signature;i=st;var c=t.split(".");if(3!==c.length)return!1;var d,h=c[0]+"."+c[1],p=Et(c[2]),g=r(gt(c[0])),f=null;if(void 0===g.alg)throw"algorithm not specified in header";if(d=(f=g.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+f+":"))throw"algorithm '"+f+"' not accepted in the list";if("none"!=f&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Mt.getKey(e)),!("RS"!=d&&"PS"!=d||e instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==d&&!(e instanceof o))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===l.jwsalg2sigalg[g.alg])throw"unsupported alg name: "+f;if("none"==(m=l.jwsalg2sigalg[f]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var v=new a({alg:m,pass:e});return v.updateString(h),p==v.doFinal()}if(-1!=m.indexOf("withECDSA")){var y,S=null;try{S=o.concatSigToASN1Sig(p)}catch(b){return!1}return(y=new u({alg:m})).init(e),y.updateString(h),y.verify(S)}return(y=new u({alg:m})).init(e),y.updateString(h),y.verify(p)},ht.jws.JWS.parse=function(t){var e,n,i=t.split("."),l={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[1],3==i.length&&(n=i[2]),l.headerObj=ht.jws.JWS.readSafeJSONString(gt(i[0])),l.payloadObj=ht.jws.JWS.readSafeJSONString(gt(e)),l.headerPP=JSON.stringify(l.headerObj,null,"  "),l.payloadPP=null==l.payloadObj?gt(e):JSON.stringify(l.payloadObj,null,"  "),void 0!==n&&(l.sigHex=Et(n)),l},ht.jws.JWS.verifyJWT=function(t,e,n){var i=ht.jws,l=i.JWS,r=l.readSafeJSONString,s=l.inArray,o=l.includedArray,a=t.split("."),u=a[0],c=a[1],d=(Et(a[2]),r(gt(u))),h=r(gt(c));if(void 0===d.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!s(d.alg,n.alg))return!1;if(void 0!==h.iss&&"object"==typeof n.iss&&!s(h.iss,n.iss))return!1;if(void 0!==h.sub&&"object"==typeof n.sub&&!s(h.sub,n.sub))return!1;if(void 0!==h.aud&&"object"==typeof n.aud)if("string"==typeof h.aud){if(!s(h.aud,n.aud))return!1}else if("object"==typeof h.aud&&!o(h.aud,n.aud))return!1;var p=i.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(p=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+n.gracePeriod<p||void 0!==h.nbf&&"number"==typeof h.nbf&&p<h.nbf-n.gracePeriod||void 0!==h.iat&&"number"==typeof h.iat&&p<h.iat-n.gracePeriod||void 0!==h.jti&&void 0!==n.jti&&h.jti!==n.jti||!l.verify(t,e,n.alg))},ht.jws.JWS.includedArray=function(t,e){var n=ht.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],e))return!1;return!0},ht.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},ht.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ht.jws.JWS.isSafeJSONString=function(t,e,n){var i=null;try{return"object"!=typeof(i=dt(t))?0:i.constructor===Array?0:(e&&(e[n]=i),1)}catch(s){return 0}},ht.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=dt(t))?null:e.constructor===Array?null:e}catch(s){return null}},ht.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},ht.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=xt(e);return Ct(ht.crypto.Util.hashHex(n,"sha256"))},ht.jws.IntDate={},ht.jws.IntDate.get=function(t){var e=ht.jws.IntDate,n=e.getNow,i=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return i(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},ht.jws.IntDate.getZulu=function(t){return Ot(t)},ht.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ht.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},ht.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==ht&&ht||(ht={}),void 0!==ht.jws&&ht.jws||(ht.jws={}),ht.jws.JWSJS=function(){var t=ht.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,i){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var r=ht.jws.JWS.sign(t,e,this.sPayload,n,i).split(".");this.aHeader.push(r[0]),this.aSignature.push(r[2])}catch(g){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+g}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,i){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var l=this.aHeader[e]+"."+this.sPayload+"."+this.aSignature[e],r=!1;try{r=t.verify(l,n,i)}catch(g){return!1}return r},this.readJWSJS=function(t){if("string"==typeof t){var n=e(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(r){throw"malformed JWS-JS JSON object: "+r}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=it,e.rng_seed_time=$,e.BigInteger=E,e.RSAKey=st,e.ECDSA=ht.crypto.ECDSA,e.DSA=ht.crypto.DSA,e.Signature=ht.crypto.Signature,e.MessageDigest=ht.crypto.MessageDigest,e.Mac=ht.crypto.Mac,e.Cipher=ht.crypto.Cipher,e.KEYUTIL=Mt,e.ASN1HEX=ft,e.X509=Yt,e.CryptoJS=m,e.b64tohex=_,e.b64toBA=C,e.stoBA=mt,e.BAtos=vt,e.BAtohex=yt,e.stohex=St,e.stob64=function(t){return b(St(t))},e.stob64u=function(t){return bt(b(St(t)))},e.b64utos=function(t){return vt(C(_t(t)))},e.b64tob64u=bt,e.b64utob64=_t,e.hex2b64=b,e.hextob64u=Ct,e.b64utohex=Et,e.utf8tob64u=pt,e.b64utoutf8=gt,e.utf8tob64=function(t){return b(Dt(jt(t)))},e.b64toutf8=function(t){return decodeURIComponent(Ht(_(t)))},e.utf8tohex=wt,e.hextoutf8=At,e.hextorstr=Tt,e.rstrtohex=xt,e.hextob64=It,e.hextob64nl=Rt,e.b64nltohex=Ft,e.hextopem=Nt,e.pemtohex=kt,e.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),n=new DataView(e),i=0;i<t.length/2;i++)n.setUint8(i,parseInt(t.substr(2*i,2),16));return e},e.ArrayBuffertohex=function(t){for(var e="",n=new DataView(t),i=0;i<t.byteLength;i++)e+=("00"+n.getUint8(i).toString(16)).slice(-2);return e},e.zulutomsec=Pt,e.zulutosec=Ot,e.zulutodate=function(t){return new Date(Pt(t))},e.datetozulu=function(t,e,n){var i,l=t.getUTCFullYear();if(e){if(l<1950||2049<l)throw"not proper year for UTCTime: "+l;i=(""+l).slice(-2)}else i=("000"+l).slice(-4);if(i+=("0"+(t.getUTCMonth()+1)).slice(-2),i+=("0"+t.getUTCDate()).slice(-2),i+=("0"+t.getUTCHours()).slice(-2),i+=("0"+t.getUTCMinutes()).slice(-2),i+=("0"+t.getUTCSeconds()).slice(-2),n){var r=t.getUTCMilliseconds();0!==r&&(i+="."+(r=(r=("00"+r).slice(-3)).replace(/0+$/g,"")))}return i+"Z"},e.uricmptohex=Dt,e.hextouricmp=Ht,e.ipv6tohex=Lt,e.hextoipv6=Bt,e.hextoip=Vt,e.iptohex=function(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Lt(t);throw e}var n=t.split(".");if(4!==n.length)throw e;var i="";try{for(var l=0;l<4;l++)i+=("0"+parseInt(n[l]).toString(16)).slice(-2);return i}catch(p){throw e}},e.encodeURIComponentAll=jt,e.newline_toUnix=function(t){return t.replace(/\r\n/gm,"\n")},e.newline_toDos=function(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=Ut,e.intarystrtohex=qt,e.strdiffidx=function(t,e){var n=t.length;t.length>e.length&&(n=e.length);for(var i=0;i<n;i++)if(t.charCodeAt(i)!=e.charCodeAt(i))return i;return t.length!=e.length?n:-1},e.KJUR=ht,e.crypto=ht.crypto,e.asn1=ht.asn1,e.jws=ht.jws,e.lang=ht.lang},p4DR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Ip0R"),l=n("CcnG"),r=n("DtyJ");e.RECAPTCHA_LANGUAGE=new l.InjectionToken("recaptcha-language"),e.RECAPTCHA_BASE_URL=new l.InjectionToken("recaptcha-base-url"),e.RECAPTCHA_NONCE=new l.InjectionToken("recaptcha-nonce-tag"),e.RecaptchaLoaderService=function(){function t(e,n,l,s){this.platformId=e,this.language=n,this.baseUrl=l,this.nonce=s,this.init(),this.ready=i.isPlatformBrowser(this.platformId)?t.ready.asObservable():r.of()}return t.prototype.init=function(){if(!t.ready&&i.isPlatformBrowser(this.platformId)){window.ng2recaptchaloaded=function(){t.ready.next(grecaptcha)},t.ready=new r.BehaviorSubject(null);var e=document.createElement("script");e.innerHTML="",e.src=(this.baseUrl||"https://www.google.com/recaptcha/api.js")+"?render=explicit&onload=ng2recaptchaloaded"+(this.language?"&hl="+this.language:""),this.nonce&&(e.nonce=this.nonce),e.async=!0,e.defer=!0,document.head.appendChild(e)}},t.ready=null,t.decorators=[{type:l.Injectable}],t}()},"uOf+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CcnG"),l=n("WH67"),r=n("p4DR"),s=n("15PL");e.RecaptchaModule=function(){function t(){}return t.forRoot=function(){return t},t.decorators=[{type:i.NgModule,args:[{exports:[s.RecaptchaComponent],imports:[l.RecaptchaCommonModule],providers:[r.RecaptchaLoaderService]}]}],t}()},wrqk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("CcnG");e.RECAPTCHA_SETTINGS=new i.InjectionToken("recaptcha-settings")}}]);
